(()=>{"use strict";const e={masterList:[],lowPrio:[],medPrio:[],highPrio:[],isSorted:!1,projects:["None","Pulls","Ascension"]},t=()=>{e.highPrio=e.masterList.filter((e=>"High"===e.priority)),e.medPrio=e.masterList.filter((e=>"Medium"===e.priority)),e.lowPrio=e.masterList.filter((e=>"Low"===e.priority))},l=e=>{let t=["Task Name","Description","Project","Due Date","Priority",""],l=document.getElementById("task-table"),n=document.createElement("tr");l.prepend(n);for(let e=0;e<t.length;e++){let l=document.createElement("th");l.innerHTML=t[e],n.appendChild(l)}for(let t=0;t<e.length;t++)o(t,e);const s=document.getElementsByClassName("del-btn");console.log(s);for(let e=0;e<s.length;e++)console.log("here"),s[e].addEventListener("click",i);const r=document.getElementsByClassName("edit-btn");for(let e=0;e<r.length;e++)r[e].addEventListener("click",u);const a=document.getElementsByClassName("comp-btn");for(let e=0;e<a.length;e++)console.log(a[e].id),a[e].id,a[e].addEventListener("click",d)},o=(e,t)=>{let l=document.querySelector("#task-table-body"),o=t[e].id,n=document.createElement("tr");1==t[e].complete&&n.classList.add("complete"),n.setAttribute("data-key",o),n.id="task-"+o,n.classList.add("task-item");let i=document.createElement("td");i.innerHTML=t[e].taskName,n.appendChild(i);let d=document.createElement("td");d.innerHTML=t[e].description,n.appendChild(d);let s=document.createElement("td");s.innerHTML=t[e].project,n.appendChild(s);let r=document.createElement("td");r.innerHTML=t[e].dueDate,n.appendChild(r);let a=document.createElement("td");a.innerHTML=t[e].priority,n.appendChild(a);let c=document.createElement("td");c.setAttribute("data-key",o);let m=document.createElement("button"),u=document.createElement("button");c.appendChild(u),u.setAttribute("type","button"),u.innerHTML='<i class="fa-solid fa-check"></i>',u.classList.add("comp-btn"),u.id=o,c.appendChild(m),m.setAttribute("type","button"),m.innerHTML='<i class="fa-solid fa-trash"></i>',m.classList.add("del-btn");let p=document.createElement("button");c.appendChild(p),p.setAttribute("type","button"),p.innerHTML='<i class="fa-solid fa-pencil"></i>',p.classList.add("edit-btn"),n.appendChild(c),l.appendChild(n)},n=()=>{let e=document.querySelector("#task-table-body");for(;e.firstChild;)e.removeChild(e.firstChild)},i=l=>{let o=l.target.parentNode.parentNode.getAttribute("data-key");console.log("here",o);let n=e.masterList.filter((e=>e.id!=o));e.masterList=n,t(),s(),console.log(e.highPrio),console.log(e.medPrio),console.log(e.lowPrio)},d=t=>{console.log("Complete Task");let l=t.target.parentNode.parentNode.getAttribute("data-key");console.log(l);let o='[data-key="'+l+'"]',n=document.querySelector(o);console.log(n);for(let t=0;t<e.masterList.length;t++)e.masterList[t].id==l&&(!1===e.masterList[t].complete?(n.classList.add("complete"),e.masterList[t].complete=!0):!0===e.masterList[t].complete&&(n.classList.remove("complete"),e.masterList[t].complete=!1));console.log(n.classList)},s=()=>{n(),l(e.masterList)},r=t=>{if("default"===t&&(n(),l(e.masterList)),"lowToHigh"===t&&(n(),l(e.lowPrio),l(e.medPrio),l(e.highPrio)),"highToLow"===t&&(n(),l(e.highPrio),l(e.medPrio),l(e.lowPrio)),"projectSorting"===t){n();for(let t=0;t<e.projects.length;t++){let o=e.masterList.filter((l=>l.project==e.projects[t]));console.log(o),l(o.filter((e=>"High"===e.priority))),l(o.filter((e=>"Medium"===e.priority))),l(o.filter((e=>"Low"===e.priority)))}}},a=()=>{let t=document.getElementById("projectInput"),l=document.getElementById("projectEdit");for(;t.childNodes.length>2;)t.removeChild(t.lastChild);for(;l.childNodes.length>2;)l.removeChild(l.lastChild);for(let l=0;l<e.projects.length;l++){let o=document.createElement("option");o.value=e.projects[l],o.innerHTML=e.projects[l],t.appendChild(o)}for(let t=0;t<e.projects.length;t++){let o=document.createElement("option");o.value=e.projects[t],o.innerHTML=e.projects[t],l.appendChild(o)}},c=()=>{let e=document.getElementById("task-table");e.removeChild(e.firstChild)},m=function(e,t,l,o,n){this.taskName=e,this.description=t,this.dueDate=l,this.priority=o,this.complete=!1,this.project=n,this.id=Math.floor(1e3*Math.random())},u=t=>{let l=document.getElementById("editModal");l.style.display="block";let o=t.target.parentNode.parentNode.getAttribute("data-key"),n=0;for(let t=0;t<e.masterList.length;t++)console.log("TDL ID",e.masterList[t].id),o==e.masterList[t].id&&(n=t);console.log("id ",o),console.log("index ",n),document.getElementById("taskNameEdit").value=e.masterList[n].taskName,document.getElementById("descriptionEdit").value=e.masterList[n].description,document.getElementById("dateEdit").value=e.masterList[n].dueDate,document.getElementById("priorityEdit").value=e.masterList[n].priority,document.getElementById("projectEdit").value=e.masterList[n].project,document.getElementById("submit-edit-btn").onclick=function(){e.masterList[n].taskName=document.getElementById("taskNameEdit").value,e.masterList[n].description=document.getElementById("descriptionEdit").value,e.masterList[n].dueDate=document.getElementById("dateEdit").value,e.masterList[n].priority=document.getElementById("priorityEdit").value,e.masterList[n].project=document.getElementById("projectEdit").value,e.highPrio=e.masterList.filter((e=>"High"===e.priority)),e.medPrio=e.masterList.filter((e=>"Medium"===e.priority)),e.lowPrio=e.masterList.filter((e=>"Low"===e.priority)),s(),l.style.display="none"}},p=()=>{document.getElementById("task-table-body");for(let t=0;t<e.projects.length;t++)y(t);const t=document.getElementsByClassName("del-btn");for(let e=0;e<t.length;e++)t[e].addEventListener("click",E);const l=document.getElementsByClassName("edit-btn");for(let e=0;e<l.length;e++)l[e].addEventListener("click",L)},y=t=>{let l=document.querySelector("#task-table-body"),o=document.createElement("tr");o.setAttribute("data-key",t),o.id="task-"+t,o.classList.add("task-item");let n=document.createElement("td");n.innerHTML=e.projects[t],o.appendChild(n);let i=document.createElement("td");i.id=t,i.setAttribute("data-key",t);let d=document.createElement("button");i.appendChild(d),d.setAttribute("type","button"),d.innerHTML='<i class="fa-solid fa-trash"></i>',d.classList.add("del-btn"),d.id=t;let s=document.createElement("button");i.appendChild(s),s.setAttribute("type","button"),s.innerHTML='<i class="fa-solid fa-pencil"></i>',s.classList.add("edit-btn"),s.id=t,o.appendChild(i),l.appendChild(o)},g=()=>{let e=document.querySelector("#task-table-body");for(;e.firstChild;)e.removeChild(e.firstChild)},h=()=>{g(),p()},E=t=>{let l=t.target.parentNode.id;console.log(l);let o=e.projects[l];console.log(o);let n=e.projects.filter((e=>e!=o));e.projects=n,h()},L=t=>{let l=document.getElementById("editProjectModal");l.style.display="block",console.log(l);let o=t.target.parentNode.id;console.log(t.target.parentNode);let n=e.projects[o];document.getElementById("editProjectName").value=n,document.getElementById("submit-project-edit-btn").onclick=function(){e.projects[o]=document.getElementById("editProjectName").value;let t=document.getElementById("editProjectName").value;for(let l=0;l<e.masterList.length;l++)e.masterList[l].project===n&&(e.masterList[l].project=t);l.style.display="none",h()}};console.log(e.masterList);let I=new m("Roll for Yelan","Pull Yelan bc mommy","5/10/22","Medium","Pulls");e.masterList.push(I);let f=new m("Roll for Ayaka","Use all means necessary to pull Ayaka","4/19/22","High","Ascension");e.masterList.push(f);let k=new m("Roll for Ayato"," pull Ayato","4/19/22","Low","Pulls");e.masterList.push(k),t(),l(e.masterList),(()=>{let t=document.getElementById("taskModal"),o=document.getElementById("newTaskBtn"),i=document.getElementById("editModal"),d=document.getElementById("projectModal"),u=document.getElementById("newProject"),y=document.getElementById("sortModal"),h=document.getElementById("editProjectModal");u.onclick=function(){d.style.display="block"},o.onclick=function(){t.style.display="block"},window.onclick=function(e){e.target==t&&(console.log("close modal"),t.style.display="none",document.getElementById("taskNameInput").value="",document.getElementById("descriptionInput").value="",document.getElementById("dateInput").value="",document.getElementById("priorityInput").selectedIndex=0),e.target==i&&(i.style.display="none"),e.target==d&&(d.style.display="none",document.getElementById("projectName").value=""),e.target==y&&(y.style.display="none"),e.target==h&&(h.style.display="none")},document.getElementById("submit-task-btn").onclick=function(){(()=>{let t=document.getElementById("taskNameInput").value,l=document.getElementById("descriptionInput").value,o=document.getElementById("dateInput").value,n=document.getElementById("priorityInput").value,i=new m(t,l,o,n,"default");e.masterList.push(i),"Low"===i.priority&&e.lowPrio.push(i),"Medium"===i.priority&&e.medPrio.push(i),"High"===i.priority&&e.highPrio.push(i),console.log(e.isSorted),!1===e.isSorted?s():r()})(),document.getElementById("taskModal").style.display="none",document.getElementById("taskNameInput").value="",document.getElementById("descriptionInput").value="",document.getElementById("dateInput").value="",document.getElementById("priorityInput").selectedIndex=0};let E=document.getElementById("sortType");E.onchange=function(){console.log("here");let e=E.value;r(e)},document.getElementById("submit-project-btn").onclick=function(){(()=>{let t=document.getElementById("projectName").value;e.projects.push(t)})(),d.style.display="none",document.getElementById("projectName").value="",a()},document.getElementById("project-view").onclick=function(){n(),c(),(()=>{let e=document.getElementById("task-table"),t=["Project Name",""],l=document.createElement("tr");e.prepend(l);for(let e=0;e<t.length;e++){let o=document.createElement("th");o.innerHTML=t[e],l.appendChild(o)}})(),p()},document.getElementById("all-tasks").onclick=function(){c(),g(),l(e.masterList)},document.getElementById("complete-tasks").onclick=function(){c(),g(),l(e.masterList.filter((e=>1==e.complete)))},document.getElementById("incomplete-tasks").onclick=function(){c(),g(),l(e.masterList.filter((e=>0==e.complete)))}})(),a()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoibUJBQUEsTUFBTUEsRUFPRyxDQUFFQyxXQUxRLEdBS0lDLFFBSlAsR0FJZ0JDLFFBSGhCLEdBR3lCQyxTQUZ4QixHQUVrQ0MsVUFObEMsRUFNNENDLFNBRDVDLENBQUMsT0FBUSxRQUFTLGNBSTdCQyxFQUFnQixLQUNwQlAsRUFBU0ksU0FBV0osRUFBU0MsV0FBV08sUUFDckNDLEdBQTZCLFNBQW5CQSxFQUFNQyxXQUVuQlYsRUFBU0csUUFBVUgsRUFBU0MsV0FBV08sUUFDcENDLEdBQTZCLFdBQW5CQSxFQUFNQyxXQUVuQlYsRUFBU0UsUUFBVUYsRUFBU0MsV0FBV08sUUFDcENDLEdBQTZCLFFBQW5CQSxFQUFNQyxZQ2hCZkMsRUFBZUMsSUFDbkIsSUFBSUMsRUFBWSxDQUNkLFlBQ0EsY0FDQSxVQUNBLFdBQ0EsV0FDQSxJQUVFQyxFQUFhQyxTQUFTQyxlQUFlLGNBQ3JDQyxFQUFZRixTQUFTRyxjQUFjLE1BQ3ZDSixFQUFXSyxRQUFRRixHQUNuQixJQUFLLElBQUlHLEVBQUksRUFBR0EsRUFBSVAsRUFBVVEsT0FBUUQsSUFBSyxDQUN6QyxJQUFJRSxFQUFLUCxTQUFTRyxjQUFjLE1BQ2hDSSxFQUFHQyxVQUFZVixFQUFVTyxHQUN6QkgsRUFBVU8sWUFBWUYsR0FFeEIsSUFBSyxJQUFJRyxFQUFJLEVBQUdBLEVBQUliLEVBQU1TLE9BQVFJLElBQ2hDQyxFQUFVRCxFQUFHYixHQUVmLE1BQU1lLEVBQVVaLFNBQVNhLHVCQUF1QixXQUNoREMsUUFBUUMsSUFBSUgsR0FDWixJQUFLLElBQUlJLEVBQUksRUFBR0EsRUFBSUosRUFBUU4sT0FBUVUsSUFDbENGLFFBQVFDLElBQUksUUFDWkgsRUFBUUksR0FBR0MsaUJBQWlCLFFBQVNDLEdBR3ZDLE1BQU1DLEVBQVduQixTQUFTYSx1QkFBdUIsWUFDakQsSUFBSyxJQUFJTyxFQUFJLEVBQUdBLEVBQUlELEVBQVNiLE9BQVFjLElBQ25DRCxFQUFTQyxHQUFHSCxpQkFBaUIsUUFBU0ksR0FHeEMsTUFBTUMsRUFBZXRCLFNBQVNhLHVCQUF1QixZQUNyRCxJQUFLLElBQUlVLEVBQUksRUFBR0EsRUFBSUQsRUFBYWhCLE9BQVFpQixJQUN2Q1QsUUFBUUMsSUFBSU8sRUFBYUMsR0FBR0MsSUFDaEJGLEVBQWFDLEdBQUdDLEdBQzVCRixFQUFhQyxHQUFHTixpQkFBaUIsUUFBU1EsSUFJeENkLEVBQVksQ0FBQ0QsRUFBR2IsS0FDcEIsSUFBSTZCLEVBQVkxQixTQUFTMkIsY0FBYyxvQkFHbkNDLEVBQUsvQixFQUFNYSxHQUFHYyxHQUNkSyxFQUFNN0IsU0FBU0csY0FBYyxNQUNSLEdBQXJCTixFQUFNYSxHQUFHb0IsVUFDWEQsRUFBSUUsVUFBVUMsSUFBSSxZQUVwQkgsRUFBSUksYUFBYSxXQUFZTCxHQUM3QkMsRUFBSUwsR0FBSyxRQUFVSSxFQUNuQkMsRUFBSUUsVUFBVUMsSUFBSSxhQUNsQixJQUFJRSxFQUFRbEMsU0FBU0csY0FBYyxNQUNuQytCLEVBQU0xQixVQUFZWCxFQUFNYSxHQUFHeUIsU0FDM0JOLEVBQUlwQixZQUFZeUIsR0FFaEIsSUFBSUUsRUFBY3BDLFNBQVNHLGNBQWMsTUFDekNpQyxFQUFZNUIsVUFBWVgsRUFBTWEsR0FBRzBCLFlBQ2pDUCxFQUFJcEIsWUFBWTJCLEdBRWhCLElBQUlDLEVBQVVyQyxTQUFTRyxjQUFjLE1BQ3JDa0MsRUFBUTdCLFVBQVlYLEVBQU1hLEdBQUcyQixRQUM3QlIsRUFBSXBCLFlBQVk0QixHQUVoQixJQUFJQyxFQUFVdEMsU0FBU0csY0FBYyxNQUNyQ21DLEVBQVE5QixVQUFZWCxFQUFNYSxHQUFHNEIsUUFDN0JULEVBQUlwQixZQUFZNkIsR0FFaEIsSUFBSUMsRUFBT3ZDLFNBQVNHLGNBQWMsTUFDbENvQyxFQUFLL0IsVUFBWVgsRUFBTWEsR0FBR2YsU0FDMUJrQyxFQUFJcEIsWUFBWThCLEdBSWhCLElBQUlDLEVBQVV4QyxTQUFTRyxjQUFjLE1BQ3JDcUMsRUFBUVAsYUFBYSxXQUFZTCxHQUNqQyxJQUFJYSxFQUFTekMsU0FBU0csY0FBYyxVQUNoQ3VDLEVBQVUxQyxTQUFTRyxjQUFjLFVBQ3JDcUMsRUFBUS9CLFlBQVlpQyxHQUNwQkEsRUFBUVQsYUFBYSxPQUFRLFVBQzdCUyxFQUFRbEMsVUFBWSxvQ0FDcEJrQyxFQUFRWCxVQUFVQyxJQUFJLFlBQ3RCVSxFQUFRbEIsR0FBS0ksRUFDYlksRUFBUS9CLFlBQVlnQyxHQUNwQkEsRUFBT1IsYUFBYSxPQUFRLFVBQzVCUSxFQUFPakMsVUFBWSxvQ0FDbkJpQyxFQUFPVixVQUFVQyxJQUFJLFdBQ3JCLElBQUlXLEVBQVUzQyxTQUFTRyxjQUFjLFVBQ3JDcUMsRUFBUS9CLFlBQVlrQyxHQUNwQkEsRUFBUVYsYUFBYSxPQUFRLFVBQzdCVSxFQUFRbkMsVUFBWSxxQ0FDcEJtQyxFQUFRWixVQUFVQyxJQUFJLFlBQ3RCSCxFQUFJcEIsWUFBWStCLEdBRWhCZCxFQUFVakIsWUFBWW9CLElBR2xCZSxFQUFhLEtBQ2pCLElBQUlDLEVBQWE3QyxTQUFTMkIsY0FBYyxvQkFDeEMsS0FBT2tCLEVBQVdDLFlBQ2hCRCxFQUFXRSxZQUFZRixFQUFXQyxhQUloQzVCLEVBQWM4QixJQUNsQixJQUFJeEIsRUFBS3dCLEVBQUVDLE9BQU9DLFdBQVdBLFdBQVdDLGFBQWEsWUFDckRyQyxRQUFRQyxJQUFJLE9BQVFTLEdBQ3BCLElBQUk0QixFQUFZbkUsRUFBU0MsV0FBV08sUUFBUTRELEdBQVNBLEVBQUs3QixJQUFNQSxJQUNoRXZDLEVBQVNDLFdBQWFrRSxFQUN0QjVELElBQ0E4RCxJQUNBeEMsUUFBUUMsSUFBSTlCLEVBQVNJLFVBQ3JCeUIsUUFBUUMsSUFBSTlCLEVBQVNHLFNBQ3JCMEIsUUFBUUMsSUFBSTlCLEVBQVNFLFVBR2pCc0MsRUFBZ0J1QixJQUNwQmxDLFFBQVFDLElBQUksaUJBQ1osSUFBSVMsRUFBS3dCLEVBQUVDLE9BQU9DLFdBQVdBLFdBQVdDLGFBQWEsWUFDckRyQyxRQUFRQyxJQUFJUyxHQUNaLElBQUkrQixFQUFRLGNBQXFCL0IsRUFBSyxLQUNsQ0ssRUFBTTdCLFNBQVMyQixjQUFjNEIsR0FDakN6QyxRQUFRQyxJQUFJYyxHQUNaLElBQUssSUFBSW5CLEVBQUksRUFBR0EsRUFBSXpCLEVBQVNDLFdBQVdvQixPQUFRSSxJQUMxQ3pCLEVBQVNDLFdBQVd3QixHQUFHYyxJQUFNQSxLQUNTLElBQXBDdkMsRUFBU0MsV0FBV3dCLEdBQUdvQixVQUN6QkQsRUFBSUUsVUFBVUMsSUFBSSxZQUNsQi9DLEVBQVNDLFdBQVd3QixHQUFHb0IsVUFBVyxJQUNXLElBQXBDN0MsRUFBU0MsV0FBV3dCLEdBQUdvQixXQUNoQ0QsRUFBSUUsVUFBVXlCLE9BQU8sWUFDckJ2RSxFQUFTQyxXQUFXd0IsR0FBR29CLFVBQVcsSUFJeENoQixRQUFRQyxJQUFJYyxFQUFJRSxZQUdadUIsRUFBaUIsS0FDckJWLElBQ0FoRCxFQUFZWCxFQUFTQyxhQUdqQnVFLEVBQWVDLElBbUJuQixHQWxCaUIsWUFBYkEsSUFDRmQsSUFDQWhELEVBQVlYLEVBQVNDLGFBRU4sY0FBYndFLElBQ0ZkLElBQ0FoRCxFQUFZWCxFQUFTRSxTQUNyQlMsRUFBWVgsRUFBU0csU0FDckJRLEVBQVlYLEVBQVNJLFdBR04sY0FBYnFFLElBQ0ZkLElBQ0FoRCxFQUFZWCxFQUFTSSxVQUNyQk8sRUFBWVgsRUFBU0csU0FDckJRLEVBQVlYLEVBQVNFLFVBR04sbUJBQWJ1RSxFQUErQixDQUNqQ2QsSUFDQSxJQUFLLElBQUlsQyxFQUFJLEVBQUdBLEVBQUl6QixFQUFTTSxTQUFTZSxPQUFRSSxJQUFLLENBQ2pELElBQUlpRCxFQUFVMUUsRUFBU0MsV0FBV08sUUFDL0JDLEdBQVVBLEVBQU0yQyxTQUFXcEQsRUFBU00sU0FBU21CLEtBRWhESSxRQUFRQyxJQUFJNEMsR0FDWi9ELEVBQVkrRCxFQUFRbEUsUUFBUUMsR0FBNkIsU0FBbkJBLEVBQU1DLFlBQzVDQyxFQUFZK0QsRUFBUWxFLFFBQVFDLEdBQTZCLFdBQW5CQSxFQUFNQyxZQUM1Q0MsRUFBWStELEVBQVFsRSxRQUFRQyxHQUE2QixRQUFuQkEsRUFBTUMsZUFLNUNpRSxFQUE2QixLQUNqQyxJQUFJQyxFQUFrQjdELFNBQVNDLGVBQWUsZ0JBQzFDNkQsRUFBYzlELFNBQVNDLGVBQWUsZUFDMUMsS0FBTzRELEVBQWdCRSxXQUFXekQsT0FBUyxHQUN6Q3VELEVBQWdCZCxZQUFZYyxFQUFnQkcsV0FFOUMsS0FBT0YsRUFBWUMsV0FBV3pELE9BQVMsR0FDckN3RCxFQUFZZixZQUFZZSxFQUFZRSxXQUV0QyxJQUFLLElBQUl0RCxFQUFJLEVBQUdBLEVBQUl6QixFQUFTTSxTQUFTZSxPQUFRSSxJQUFLLENBQ2pELElBQUl1RCxFQUFNakUsU0FBU0csY0FBYyxVQUNqQzhELEVBQUlDLE1BQVFqRixFQUFTTSxTQUFTbUIsR0FDOUJ1RCxFQUFJekQsVUFBWXZCLEVBQVNNLFNBQVNtQixHQUNsQ21ELEVBQWdCcEQsWUFBWXdELEdBRTlCLElBQUssSUFBSWpELEVBQUksRUFBR0EsRUFBSS9CLEVBQVNNLFNBQVNlLE9BQVFVLElBQUssQ0FDakQsSUFBSWlELEVBQU1qRSxTQUFTRyxjQUFjLFVBQ2pDOEQsRUFBSUMsTUFBUWpGLEVBQVNNLFNBQVN5QixHQUM5QmlELEVBQUl6RCxVQUFZdkIsRUFBU00sU0FBU3lCLEdBQ2xDOEMsRUFBWXJELFlBQVl3RCxLQUl0QkUsRUFBZ0IsS0FDcEIsSUFBSUMsRUFBU3BFLFNBQVNDLGVBQWUsY0FDckNtRSxFQUFPckIsWUFBWXFCLEVBQU90QixhQ3ZNdEJ1QixFQUFPLFNBQVVsQyxFQUFVQyxFQUFhRSxFQUFTM0MsRUFBVTBDLEdBQy9EaUMsS0FBS25DLFNBQVdBLEVBQ2hCbUMsS0FBS2xDLFlBQWNBLEVBQ25Ca0MsS0FBS2hDLFFBQVVBLEVBQ2ZnQyxLQUFLM0UsU0FBV0EsRUFDaEIyRSxLQUFLeEMsVUFBVyxFQUNoQndDLEtBQUtqQyxRQUFVQSxFQUNmaUMsS0FBSzlDLEdBQUsrQyxLQUFLQyxNQUFzQixJQUFoQkQsS0FBS0UsV0E4QnRCcEQsRUFBWTJCLElBQ2hCLElBQUkwQixFQUFRMUUsU0FBU0MsZUFBZSxhQUNwQ3lFLEVBQU1DLE1BQU1DLFFBQVUsUUFFdEIsSUFBSXBELEVBQUt3QixFQUFFQyxPQUFPQyxXQUFXQSxXQUFXQyxhQUFhLFlBQ2pEMEIsRUFBUSxFQUNaLElBQUssSUFBSW5FLEVBQUksRUFBR0EsRUFBSXpCLEVBQVNDLFdBQVdvQixPQUFRSSxJQUM5Q0ksUUFBUUMsSUFBSSxTQUFVOUIsRUFBU0MsV0FBV3dCLEdBQUdjLElBQ3pDQSxHQUFNdkMsRUFBU0MsV0FBV3dCLEdBQUdjLEtBQy9CcUQsRUFBUW5FLEdBSVpJLFFBQVFDLElBQUksTUFBT1MsR0FDbkJWLFFBQVFDLElBQUksU0FBVThELEdBQ3RCN0UsU0FBU0MsZUFBZSxnQkFBZ0JpRSxNQUN0Q2pGLEVBQVNDLFdBQVcyRixHQUFPMUMsU0FDN0JuQyxTQUFTQyxlQUFlLG1CQUFtQmlFLE1BQ3pDakYsRUFBU0MsV0FBVzJGLEdBQU96QyxZQUM3QnBDLFNBQVNDLGVBQWUsWUFBWWlFLE1BQ2xDakYsRUFBU0MsV0FBVzJGLEdBQU92QyxRQUM3QnRDLFNBQVNDLGVBQWUsZ0JBQWdCaUUsTUFDdENqRixFQUFTQyxXQUFXMkYsR0FBT2xGLFNBQzdCSyxTQUFTQyxlQUFlLGVBQWVpRSxNQUNyQ2pGLEVBQVNDLFdBQVcyRixHQUFPeEMsUUFFUnJDLFNBQVNDLGVBQWUsbUJBQzlCNkUsUUFBVSxXQUN2QjdGLEVBQVNDLFdBQVcyRixHQUFPMUMsU0FDekJuQyxTQUFTQyxlQUFlLGdCQUFnQmlFLE1BQzFDakYsRUFBU0MsV0FBVzJGLEdBQU96QyxZQUN6QnBDLFNBQVNDLGVBQWUsbUJBQW1CaUUsTUFDN0NqRixFQUFTQyxXQUFXMkYsR0FBT3ZDLFFBQ3pCdEMsU0FBU0MsZUFBZSxZQUFZaUUsTUFDdENqRixFQUFTQyxXQUFXMkYsR0FBT2xGLFNBQ3pCSyxTQUFTQyxlQUFlLGdCQUFnQmlFLE1BQzFDakYsRUFBU0MsV0FBVzJGLEdBQU94QyxRQUN6QnJDLFNBQVNDLGVBQWUsZUFBZWlFLE1BQ3pDakYsRUFBU0ksU0FBV0osRUFBU0MsV0FBV08sUUFDckM0RCxHQUEyQixTQUFsQkEsRUFBSzFELFdBRWpCVixFQUFTRyxRQUFVSCxFQUFTQyxXQUFXTyxRQUNwQzRELEdBQTJCLFdBQWxCQSxFQUFLMUQsV0FFakJWLEVBQVNFLFFBQVVGLEVBQVNDLFdBQVdPLFFBQ3BDNEQsR0FBMkIsUUFBbEJBLEVBQUsxRCxXQUdqQjJELElBQ0FvQixFQUFNQyxNQUFNQyxRQUFVLFNDaEVwQkcsRUFBaUIsS0FDTC9FLFNBQVNDLGVBQWUsbUJBRXhDLElBQUssSUFBSWUsRUFBSSxFQUFHQSxFQUFJL0IsRUFBU00sU0FBU2UsT0FBUVUsSUFDNUNnRSxFQUFpQmhFLEdBR25CLE1BQU1pRSxFQUFnQmpGLFNBQVNhLHVCQUF1QixXQUN0RCxJQUFLLElBQUlPLEVBQUksRUFBR0EsRUFBSTZELEVBQWMzRSxPQUFRYyxJQUN4QzZELEVBQWM3RCxHQUFHSCxpQkFBaUIsUUFBU2lFLEdBRzdDLE1BQU1DLEVBQWNuRixTQUFTYSx1QkFBdUIsWUFDcEQsSUFBSyxJQUFJVSxFQUFJLEVBQUdBLEVBQUk0RCxFQUFZN0UsT0FBUWlCLElBQ3RDNEQsRUFBWTVELEdBQUdOLGlCQUFpQixRQUFTbUUsSUFJdkNKLEVBQW9CdEUsSUFDeEIsSUFBSWdCLEVBQVkxQixTQUFTMkIsY0FBYyxvQkFDbkNFLEVBQU03QixTQUFTRyxjQUFjLE1BQ2pDMEIsRUFBSUksYUFBYSxXQUFZdkIsR0FDN0JtQixFQUFJTCxHQUFLLFFBQVVkLEVBQ25CbUIsRUFBSUUsVUFBVUMsSUFBSSxhQUVsQixJQUFJcUQsRUFBY3JGLFNBQVNHLGNBQWMsTUFDekNrRixFQUFZN0UsVUFBWXZCLEVBQVNNLFNBQVNtQixHQUMxQ21CLEVBQUlwQixZQUFZNEUsR0FFaEIsSUFBSTdDLEVBQVV4QyxTQUFTRyxjQUFjLE1BQ3JDcUMsRUFBUWhCLEdBQUtkLEVBQ2I4QixFQUFRUCxhQUFhLFdBQVl2QixHQUVqQyxJQUFJK0IsRUFBU3pDLFNBQVNHLGNBQWMsVUFDcENxQyxFQUFRL0IsWUFBWWdDLEdBQ3BCQSxFQUFPUixhQUFhLE9BQVEsVUFDNUJRLEVBQU9qQyxVQUFZLG9DQUNuQmlDLEVBQU9WLFVBQVVDLElBQUksV0FDckJTLEVBQU9qQixHQUFLZCxFQUVaLElBQUlpQyxFQUFVM0MsU0FBU0csY0FBYyxVQUNyQ3FDLEVBQVEvQixZQUFZa0MsR0FDcEJBLEVBQVFWLGFBQWEsT0FBUSxVQUM3QlUsRUFBUW5DLFVBQVkscUNBQ3BCbUMsRUFBUVosVUFBVUMsSUFBSSxZQUN0QlcsRUFBUW5CLEdBQUtkLEVBRWJtQixFQUFJcEIsWUFBWStCLEdBRWhCZCxFQUFVakIsWUFBWW9CLElBR2xCeUQsRUFBb0IsS0FDeEIsSUFBSXpDLEVBQWE3QyxTQUFTMkIsY0FBYyxvQkFDeEMsS0FBT2tCLEVBQVdDLFlBQ2hCRCxFQUFXRSxZQUFZRixFQUFXQyxhQUloQ3lDLEVBQWtCLEtBQ3RCRCxJQUNBUCxLQUdJRyxFQUFpQmxDLElBQ3JCLElBQUl4QixFQUFLd0IsRUFBRUMsT0FBT0MsV0FBVzFCLEdBQzdCVixRQUFRQyxJQUFJUyxHQUNaLElBQUl5QixFQUFTaEUsRUFBU00sU0FBU2lDLEdBQy9CVixRQUFRQyxJQUFJa0MsR0FDWixJQUFJdUMsRUFBY3ZHLEVBQVNNLFNBQVNFLFFBQVE0RCxHQUFTQSxHQUFRSixJQUM3RGhFLEVBQVNNLFNBQVdpRyxFQUNwQkQsS0FHSUgsRUFBZXBDLElBQ25CLElBQUkwQixFQUFRMUUsU0FBU0MsZUFBZSxvQkFDcEN5RSxFQUFNQyxNQUFNQyxRQUFVLFFBQ3RCOUQsUUFBUUMsSUFBSTJELEdBQ1osSUFBSWxELEVBQUt3QixFQUFFQyxPQUFPQyxXQUFXMUIsR0FDN0JWLFFBQVFDLElBQUlpQyxFQUFFQyxPQUFPQyxZQUNyQixJQUFJdUMsRUFBaUJ4RyxFQUFTTSxTQUFTaUMsR0FFdkN4QixTQUFTQyxlQUFlLG1CQUFtQmlFLE1BQVF1QixFQUU5QnpGLFNBQVNDLGVBQWUsMkJBQzlCNkUsUUFBVSxXQUN2QjdGLEVBQVNNLFNBQVNpQyxHQUFNeEIsU0FBU0MsZUFBZSxtQkFBbUJpRSxNQUNuRSxJQUFJd0IsRUFBVTFGLFNBQVNDLGVBQWUsbUJBQW1CaUUsTUFDekQsSUFBSyxJQUFJeUIsRUFBSSxFQUFHQSxFQUFJMUcsRUFBU0MsV0FBV29CLE9BQVFxRixJQUMxQzFHLEVBQVNDLFdBQVd5RyxHQUFHdEQsVUFBWW9ELElBQ3JDeEcsRUFBU0MsV0FBV3lHLEdBQUd0RCxRQUFVcUQsR0FHckNoQixFQUFNQyxNQUFNQyxRQUFVLE9BQ3RCVyxNQ2xISnpFLFFBQVFDLElBQUk5QixFQUFTQyxZQUNyQixJQUFJMEcsRUFBTSxJQUFJdkIsRUFDWixpQkFDQSxzQkFDQSxVQUNBLFNBQ0EsU0FFRnBGLEVBQVNDLFdBQVcyRyxLQUFLRCxHQUN6QixJQUFJRSxFQUFNLElBQUl6QixFQUNaLGlCQUNBLHdDQUNBLFVBQ0EsT0FDQSxhQUVGcEYsRUFBU0MsV0FBVzJHLEtBQUtDLEdBQ3pCLElBQUlDLEVBQU0sSUFBSTFCLEVBQUssaUJBQWtCLGNBQWUsVUFBVyxNQUFPLFNBQ3RFcEYsRUFBU0MsV0FBVzJHLEtBQUtFLEdBQ3pCdkcsSUFDQUksRUFBWVgsRUFBU0MsWUNmRCxNQUNsQixJQUFJOEcsRUFBWWhHLFNBQVNDLGVBQWUsYUFDcENnRyxFQUFhakcsU0FBU0MsZUFBZSxjQUNyQ2lHLEVBQVlsRyxTQUFTQyxlQUFlLGFBQ3BDa0csRUFBZW5HLFNBQVNDLGVBQWUsZ0JBQ3ZDbUcsRUFBVXBHLFNBQVNDLGVBQWUsY0FDbENvRyxFQUFZckcsU0FBU0MsZUFBZSxhQUNwQ3FHLEVBQWdCdEcsU0FBU0MsZUFBZSxvQkFDNUNtRyxFQUFRdEIsUUFBVSxXQUNoQnFCLEVBQWF4QixNQUFNQyxRQUFVLFNBRS9CcUIsRUFBV25CLFFBQVUsV0FDbkJrQixFQUFVckIsTUFBTUMsUUFBVSxTQUU1QjJCLE9BQU96QixRQUFVLFNBQVUwQixHQUNyQkEsRUFBTXZELFFBQVUrQyxJQUNsQmxGLFFBQVFDLElBQUksZUFDWmlGLEVBQVVyQixNQUFNQyxRQUFVLE9BQzFCNUUsU0FBU0MsZUFBZSxpQkFBaUJpRSxNQUFRLEdBQ2pEbEUsU0FBU0MsZUFBZSxvQkFBb0JpRSxNQUFRLEdBQ3BEbEUsU0FBU0MsZUFBZSxhQUFhaUUsTUFBUSxHQUM3Q2xFLFNBQVNDLGVBQWUsaUJBQWlCd0csY0FBZ0IsR0FFdkRELEVBQU12RCxRQUFVaUQsSUFDbEJBLEVBQVV2QixNQUFNQyxRQUFVLFFBRXhCNEIsRUFBTXZELFFBQVVrRCxJQUNsQkEsRUFBYXhCLE1BQU1DLFFBQVUsT0FDN0I1RSxTQUFTQyxlQUFlLGVBQWVpRSxNQUFRLElBRTdDc0MsRUFBTXZELFFBQVVvRCxJQUNsQkEsRUFBVTFCLE1BQU1DLFFBQVUsUUFFeEI0QixFQUFNdkQsUUFBVXFELElBQ2xCQSxFQUFjM0IsTUFBTUMsUUFBVSxTQUdmNUUsU0FBU0MsZUFBZSxtQkFDOUI2RSxRQUFVLFdIbkNULE1BQ2QsSUFBSTNDLEVBQVduQyxTQUFTQyxlQUFlLGlCQUFpQmlFLE1BQ3BEd0MsRUFBVzFHLFNBQVNDLGVBQWUsb0JBQW9CaUUsTUFDdkR5QyxFQUFXM0csU0FBU0MsZUFBZSxhQUFhaUUsTUFDaEQwQyxFQUFXNUcsU0FBU0MsZUFBZSxpQkFBaUJpRSxNQUVwRDJDLEVBQVUsSUFBSXhDLEVBQUtsQyxFQUFVdUUsRUFBVUMsRUFBVUMsRUFBVSxXQUMvRDNILEVBQVNDLFdBQVcyRyxLQUFLZ0IsR0FDQSxRQUFyQkEsRUFBUWxILFVBQ1ZWLEVBQVNFLFFBQVEwRyxLQUFLZ0IsR0FHQyxXQUFyQkEsRUFBUWxILFVBQ1ZWLEVBQVNHLFFBQVF5RyxLQUFLZ0IsR0FHQyxTQUFyQkEsRUFBUWxILFVBQ1ZWLEVBQVNJLFNBQVN3RyxLQUFLZ0IsR0FFekIvRixRQUFRQyxJQUFJOUIsRUFBU0ssV0FDSyxJQUF0QkwsRUFBU0ssU0FDWGdFLElBRUFHLEtHYUFxRCxHQUNZOUcsU0FBU0MsZUFBZSxhQUM5QjBFLE1BQU1DLFFBQVUsT0FDdEI1RSxTQUFTQyxlQUFlLGlCQUFpQmlFLE1BQVEsR0FDakRsRSxTQUFTQyxlQUFlLG9CQUFvQmlFLE1BQVEsR0FDcERsRSxTQUFTQyxlQUFlLGFBQWFpRSxNQUFRLEdBQzdDbEUsU0FBU0MsZUFBZSxpQkFBaUJ3RyxjQUFnQixHQWtCM0QsSUFBSU0sRUFBYS9HLFNBQVNDLGVBQWUsWUFDekM4RyxFQUFXQyxTQUFXLFdBQ3BCbEcsUUFBUUMsSUFBSSxRQUNaLElBQUkyQyxFQUFXcUQsRUFBVzdDLE1BQzFCVCxFQUFZQyxJQUdHMUQsU0FBU0MsZUFBZSxzQkFDOUI2RSxRQUFVLFdMM0RKLE1BQ2pCLElBQUltQyxFQUFZakgsU0FBU0MsZUFBZSxlQUFlaUUsTUFDdkRqRixFQUFTTSxTQUFTc0csS0FBS29CLElLMERyQkMsR0FDQWYsRUFBYXhCLE1BQU1DLFFBQVUsT0FDN0I1RSxTQUFTQyxlQUFlLGVBQWVpRSxNQUFRLEdBQy9DTixLQUdtQjVELFNBQVNDLGVBQWUsZ0JBQzlCNkUsUUFBVSxXRmpGekJsQyxJQUNBdUIsSUFLMkIsTUFDM0IsSUFBSWdELEVBQVduSCxTQUFTQyxlQUFlLGNBQ25DbUgsRUFBaUIsQ0FBQyxlQUFnQixJQUNsQ2xILEVBQVlGLFNBQVNHLGNBQWMsTUFDdkNnSCxFQUFTL0csUUFBUUYsR0FDakIsSUFBSyxJQUFJUSxFQUFJLEVBQUdBLEVBQUkwRyxFQUFlOUcsT0FBUUksSUFBSyxDQUM5QyxJQUFJSCxFQUFLUCxTQUFTRyxjQUFjLE1BQ2hDSSxFQUFHQyxVQUFZNEcsRUFBZTFHLEdBQzlCUixFQUFVTyxZQUFZRixLQVp4QjhHLEdBQ0F0QyxLRWtGcUIvRSxTQUFTQyxlQUFlLGFBQzlCNkUsUUFBVSxXQUN2QlgsSUFDQW1CLElBQ0ExRixFQUFZWCxFQUFTQyxhQUdBYyxTQUFTQyxlQUFlLGtCQUM5QjZFLFFBQVUsV0FDekJYLElBQ0FtQixJQUNBMUYsRUFBWVgsRUFBU0MsV0FBV08sUUFBUTRELEdBQTBCLEdBQWpCQSxFQUFLdkIsYUFHaEM5QixTQUFTQyxlQUFlLG9CQUM5QjZFLFFBQVUsV0FDMUJYLElBQ0FtQixJQUNBMUYsRUFBWVgsRUFBU0MsV0FBV08sUUFBUTRELEdBQTBCLEdBQWpCQSxFQUFLdkIsY0RyRjFELEdBQ0E4QixLIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb2Rpbi10by1kby8uL3NyYy9tb2R1bGVzL2xpc3QuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10by1kby8uL3NyYy9tb2R1bGVzL2NvbnRlbnQuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10by1kby8uL3NyYy9tb2R1bGVzL3RvZG8uanMiLCJ3ZWJwYWNrOi8vb2Rpbi10by1kby8uL3NyYy9tb2R1bGVzL3Byb2plY3RWaWV3LmpzIiwid2VicGFjazovL29kaW4tdG8tZG8vLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vb2Rpbi10by1kby8uL3NyYy9tb2R1bGVzL2J1dHRvbnMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgVG9Eb0xpc3QgPSAoKCkgPT4ge1xyXG4gIGxldCBpc1NvcnRlZCA9IGZhbHNlO1xyXG4gIGxldCBtYXN0ZXJMaXN0ID0gW107XHJcbiAgbGV0IGxvd1ByaW8gPSBbXTtcclxuICBsZXQgbWVkUHJpbyA9IFtdO1xyXG4gIGxldCBoaWdoUHJpbyA9IFtdO1xyXG4gIGxldCBwcm9qZWN0cyA9IFtcIk5vbmVcIiwgXCJQdWxsc1wiLCBcIkFzY2Vuc2lvblwiXTtcclxuICByZXR1cm4geyBtYXN0ZXJMaXN0LCBsb3dQcmlvLCBtZWRQcmlvLCBoaWdoUHJpbywgaXNTb3J0ZWQsIHByb2plY3RzIH07XHJcbn0pKCk7XHJcblxyXG5jb25zdCBzZXRQcmlvQXJyYXlzID0gKCkgPT4ge1xyXG4gIFRvRG9MaXN0LmhpZ2hQcmlvID0gVG9Eb0xpc3QubWFzdGVyTGlzdC5maWx0ZXIoXHJcbiAgICAodGFza3MpID0+IHRhc2tzLnByaW9yaXR5ID09PSBcIkhpZ2hcIlxyXG4gICk7XHJcbiAgVG9Eb0xpc3QubWVkUHJpbyA9IFRvRG9MaXN0Lm1hc3Rlckxpc3QuZmlsdGVyKFxyXG4gICAgKHRhc2tzKSA9PiB0YXNrcy5wcmlvcml0eSA9PT0gXCJNZWRpdW1cIlxyXG4gICk7XHJcbiAgVG9Eb0xpc3QubG93UHJpbyA9IFRvRG9MaXN0Lm1hc3Rlckxpc3QuZmlsdGVyKFxyXG4gICAgKHRhc2tzKSA9PiB0YXNrcy5wcmlvcml0eSA9PT0gXCJMb3dcIlxyXG4gICk7XHJcbn07XHJcblxyXG5jb25zdCBhZGRQcm9qZWN0ID0gKCkgPT4ge1xyXG4gIGxldCBwcm9qSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByb2plY3ROYW1lXCIpLnZhbHVlO1xyXG4gIFRvRG9MaXN0LnByb2plY3RzLnB1c2gocHJvaklucHV0KTtcclxufTtcclxuZXhwb3J0IHsgVG9Eb0xpc3QsIHNldFByaW9BcnJheXMsIGFkZFByb2plY3QgfTtcclxuIiwiaW1wb3J0IHsgc2V0UHJpb0FycmF5cywgVG9Eb0xpc3QgfSBmcm9tIFwiLi9saXN0XCI7XHJcbmltcG9ydCB7IGVkaXRUYXNrLCBUb0RvIH0gZnJvbSBcIi4vdG9kb1wiO1xyXG5jb25zdCByZW5kZXJUb0RvcyA9IChhcnJheSkgPT4ge1xyXG4gIGxldCBoZWFkZXJBcnIgPSBbXHJcbiAgICBcIlRhc2sgTmFtZVwiLFxyXG4gICAgXCJEZXNjcmlwdGlvblwiLFxyXG4gICAgXCJQcm9qZWN0XCIsXHJcbiAgICBcIkR1ZSBEYXRlXCIsXHJcbiAgICBcIlByaW9yaXR5XCIsXHJcbiAgICBcIlwiLFxyXG4gIF07XHJcbiAgbGV0IHRhc2tIZWFkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRhc2stdGFibGVcIik7XHJcbiAgbGV0IGhlYWRlckRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0clwiKTtcclxuICB0YXNrSGVhZGVyLnByZXBlbmQoaGVhZGVyRGl2KTtcclxuICBmb3IgKGxldCBzID0gMDsgcyA8IGhlYWRlckFyci5sZW5ndGg7IHMrKykge1xyXG4gICAgbGV0IHRoID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRoXCIpO1xyXG4gICAgdGguaW5uZXJIVE1MID0gaGVhZGVyQXJyW3NdO1xyXG4gICAgaGVhZGVyRGl2LmFwcGVuZENoaWxkKHRoKTtcclxuICB9XHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7IGkrKykge1xyXG4gICAgcmVuZGVyUm93KGksIGFycmF5KTtcclxuICB9XHJcbiAgY29uc3QgZGVsQnRucyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJkZWwtYnRuXCIpO1xyXG4gIGNvbnNvbGUubG9nKGRlbEJ0bnMpO1xyXG4gIGZvciAobGV0IGogPSAwOyBqIDwgZGVsQnRucy5sZW5ndGg7IGorKykge1xyXG4gICAgY29uc29sZS5sb2coXCJoZXJlXCIpO1xyXG4gICAgZGVsQnRuc1tqXS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgcmVtb3ZlVGFzayk7XHJcbiAgfVxyXG5cclxuICBjb25zdCBlZGl0QnRucyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJlZGl0LWJ0blwiKTtcclxuICBmb3IgKGxldCBrID0gMDsgayA8IGVkaXRCdG5zLmxlbmd0aDsgaysrKSB7XHJcbiAgICBlZGl0QnRuc1trXS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZWRpdFRhc2spO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgY29tcGxldGVCdG5zID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImNvbXAtYnRuXCIpO1xyXG4gIGZvciAobGV0IGwgPSAwOyBsIDwgY29tcGxldGVCdG5zLmxlbmd0aDsgbCsrKSB7XHJcbiAgICBjb25zb2xlLmxvZyhjb21wbGV0ZUJ0bnNbbF0uaWQpO1xyXG4gICAgbGV0IGJ0bklkID0gY29tcGxldGVCdG5zW2xdLmlkO1xyXG4gICAgY29tcGxldGVCdG5zW2xdLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjb21wbGV0ZVRhc2spO1xyXG4gIH1cclxufTtcclxuXHJcbmNvbnN0IHJlbmRlclJvdyA9IChpLCBhcnJheSkgPT4ge1xyXG4gIGxldCB0YWJsZUJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Rhc2stdGFibGUtYm9keVwiKTtcclxuXHJcbiAgLy9EYXRhIGtleT8gPC0tIE5lZWQgdG8gYWRkIHRoZSBkYXRhIGtleSB0byBlYWNoIGRpdi5cclxuICBsZXQgZGsgPSBhcnJheVtpXS5pZDtcclxuICBsZXQgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRyXCIpO1xyXG4gIGlmIChhcnJheVtpXS5jb21wbGV0ZSA9PSB0cnVlKSB7XHJcbiAgICByb3cuY2xhc3NMaXN0LmFkZChcImNvbXBsZXRlXCIpO1xyXG4gIH1cclxuICByb3cuc2V0QXR0cmlidXRlKFwiZGF0YS1rZXlcIiwgZGspO1xyXG4gIHJvdy5pZCA9IFwidGFzay1cIiArIGRrO1xyXG4gIHJvdy5jbGFzc0xpc3QuYWRkKFwidGFzay1pdGVtXCIpO1xyXG4gIGxldCB0aXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZFwiKTtcclxuICB0aXRsZS5pbm5lckhUTUwgPSBhcnJheVtpXS50YXNrTmFtZTtcclxuICByb3cuYXBwZW5kQ2hpbGQodGl0bGUpO1xyXG5cclxuICBsZXQgZGVzY3JpcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGRcIik7XHJcbiAgZGVzY3JpcHRpb24uaW5uZXJIVE1MID0gYXJyYXlbaV0uZGVzY3JpcHRpb247XHJcbiAgcm93LmFwcGVuZENoaWxkKGRlc2NyaXB0aW9uKTtcclxuXHJcbiAgbGV0IHByb2plY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGRcIik7XHJcbiAgcHJvamVjdC5pbm5lckhUTUwgPSBhcnJheVtpXS5wcm9qZWN0O1xyXG4gIHJvdy5hcHBlbmRDaGlsZChwcm9qZWN0KTtcclxuXHJcbiAgbGV0IGR1ZURhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGRcIik7XHJcbiAgZHVlRGF0ZS5pbm5lckhUTUwgPSBhcnJheVtpXS5kdWVEYXRlO1xyXG4gIHJvdy5hcHBlbmRDaGlsZChkdWVEYXRlKTtcclxuXHJcbiAgbGV0IHByaW8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGRcIik7XHJcbiAgcHJpby5pbm5lckhUTUwgPSBhcnJheVtpXS5wcmlvcml0eTtcclxuICByb3cuYXBwZW5kQ2hpbGQocHJpbyk7XHJcblxyXG4gIC8vTmVlZCB0byBjcmVhdGUgYnV0dG9uc1xyXG5cclxuICBsZXQgYnV0dG9ucyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZFwiKTtcclxuICBidXR0b25zLnNldEF0dHJpYnV0ZShcImRhdGEta2V5XCIsIGRrKTtcclxuICBsZXQgZGVsQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcclxuICBsZXQgY29tcEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcbiAgYnV0dG9ucy5hcHBlbmRDaGlsZChjb21wQnRuKTtcclxuICBjb21wQnRuLnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJidXR0b25cIik7XHJcbiAgY29tcEJ0bi5pbm5lckhUTUwgPSBgPGkgY2xhc3M9XCJmYS1zb2xpZCBmYS1jaGVja1wiPjwvaT5gO1xyXG4gIGNvbXBCdG4uY2xhc3NMaXN0LmFkZChcImNvbXAtYnRuXCIpO1xyXG4gIGNvbXBCdG4uaWQgPSBkaztcclxuICBidXR0b25zLmFwcGVuZENoaWxkKGRlbEJ0bik7XHJcbiAgZGVsQnRuLnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJidXR0b25cIik7XHJcbiAgZGVsQnRuLmlubmVySFRNTCA9IGA8aSBjbGFzcz1cImZhLXNvbGlkIGZhLXRyYXNoXCI+PC9pPmA7XHJcbiAgZGVsQnRuLmNsYXNzTGlzdC5hZGQoXCJkZWwtYnRuXCIpO1xyXG4gIGxldCBlZGl0QnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcclxuICBidXR0b25zLmFwcGVuZENoaWxkKGVkaXRCdG4pO1xyXG4gIGVkaXRCdG4uc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcImJ1dHRvblwiKTtcclxuICBlZGl0QnRuLmlubmVySFRNTCA9IGA8aSBjbGFzcz1cImZhLXNvbGlkIGZhLXBlbmNpbFwiPjwvaT5gO1xyXG4gIGVkaXRCdG4uY2xhc3NMaXN0LmFkZChcImVkaXQtYnRuXCIpO1xyXG4gIHJvdy5hcHBlbmRDaGlsZChidXR0b25zKTtcclxuXHJcbiAgdGFibGVCb2R5LmFwcGVuZENoaWxkKHJvdyk7XHJcbn07XHJcblxyXG5jb25zdCByZW1vdmVSb3dzID0gKCkgPT4ge1xyXG4gIGxldCBjb250ZW50RGl2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN0YXNrLXRhYmxlLWJvZHlcIik7XHJcbiAgd2hpbGUgKGNvbnRlbnREaXYuZmlyc3RDaGlsZCkge1xyXG4gICAgY29udGVudERpdi5yZW1vdmVDaGlsZChjb250ZW50RGl2LmZpcnN0Q2hpbGQpO1xyXG4gIH1cclxufTtcclxuXHJcbmNvbnN0IHJlbW92ZVRhc2sgPSAoZSkgPT4ge1xyXG4gIGxldCBpZCA9IGUudGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZS5nZXRBdHRyaWJ1dGUoXCJkYXRhLWtleVwiKTtcclxuICBjb25zb2xlLmxvZyhcImhlcmVcIiwgaWQpO1xyXG4gIGxldCBmaWx0ZXJBcnIgPSBUb0RvTGlzdC5tYXN0ZXJMaXN0LmZpbHRlcigodGFzaykgPT4gdGFzay5pZCAhPSBpZCk7XHJcbiAgVG9Eb0xpc3QubWFzdGVyTGlzdCA9IGZpbHRlckFycjtcclxuICBzZXRQcmlvQXJyYXlzKCk7XHJcbiAgcmVmcmVzaENvbnRlbnQoKTtcclxuICBjb25zb2xlLmxvZyhUb0RvTGlzdC5oaWdoUHJpbyk7XHJcbiAgY29uc29sZS5sb2coVG9Eb0xpc3QubWVkUHJpbyk7XHJcbiAgY29uc29sZS5sb2coVG9Eb0xpc3QubG93UHJpbyk7XHJcbn07XHJcblxyXG5jb25zdCBjb21wbGV0ZVRhc2sgPSAoZSkgPT4ge1xyXG4gIGNvbnNvbGUubG9nKFwiQ29tcGxldGUgVGFza1wiKTtcclxuICBsZXQgaWQgPSBlLnRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGUuZ2V0QXR0cmlidXRlKFwiZGF0YS1rZXlcIik7XHJcbiAgY29uc29sZS5sb2coaWQpO1xyXG4gIGxldCByb3dJZCA9IFwiW2RhdGEta2V5PVwiICsgYFwiYCArIGlkICsgYFwiXWA7XHJcbiAgbGV0IHJvdyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Iocm93SWQpO1xyXG4gIGNvbnNvbGUubG9nKHJvdyk7XHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBUb0RvTGlzdC5tYXN0ZXJMaXN0Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICBpZiAoVG9Eb0xpc3QubWFzdGVyTGlzdFtpXS5pZCA9PSBpZCkge1xyXG4gICAgICBpZiAoVG9Eb0xpc3QubWFzdGVyTGlzdFtpXS5jb21wbGV0ZSA9PT0gZmFsc2UpIHtcclxuICAgICAgICByb3cuY2xhc3NMaXN0LmFkZChcImNvbXBsZXRlXCIpO1xyXG4gICAgICAgIFRvRG9MaXN0Lm1hc3Rlckxpc3RbaV0uY29tcGxldGUgPSB0cnVlO1xyXG4gICAgICB9IGVsc2UgaWYgKFRvRG9MaXN0Lm1hc3Rlckxpc3RbaV0uY29tcGxldGUgPT09IHRydWUpIHtcclxuICAgICAgICByb3cuY2xhc3NMaXN0LnJlbW92ZShcImNvbXBsZXRlXCIpO1xyXG4gICAgICAgIFRvRG9MaXN0Lm1hc3Rlckxpc3RbaV0uY29tcGxldGUgPSBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuICBjb25zb2xlLmxvZyhyb3cuY2xhc3NMaXN0KTtcclxufTtcclxuXHJcbmNvbnN0IHJlZnJlc2hDb250ZW50ID0gKCkgPT4ge1xyXG4gIHJlbW92ZVJvd3MoKTtcclxuICByZW5kZXJUb0RvcyhUb0RvTGlzdC5tYXN0ZXJMaXN0KTtcclxufTtcclxuXHJcbmNvbnN0IHNvcnRDb250ZW50ID0gKHNvcnRUeXBlKSA9PiB7XHJcbiAgaWYgKHNvcnRUeXBlID09PSBcImRlZmF1bHRcIikge1xyXG4gICAgcmVtb3ZlUm93cygpO1xyXG4gICAgcmVuZGVyVG9Eb3MoVG9Eb0xpc3QubWFzdGVyTGlzdCk7XHJcbiAgfVxyXG4gIGlmIChzb3J0VHlwZSA9PT0gXCJsb3dUb0hpZ2hcIikge1xyXG4gICAgcmVtb3ZlUm93cygpO1xyXG4gICAgcmVuZGVyVG9Eb3MoVG9Eb0xpc3QubG93UHJpbyk7XHJcbiAgICByZW5kZXJUb0RvcyhUb0RvTGlzdC5tZWRQcmlvKTtcclxuICAgIHJlbmRlclRvRG9zKFRvRG9MaXN0LmhpZ2hQcmlvKTtcclxuICB9XHJcblxyXG4gIGlmIChzb3J0VHlwZSA9PT0gXCJoaWdoVG9Mb3dcIikge1xyXG4gICAgcmVtb3ZlUm93cygpO1xyXG4gICAgcmVuZGVyVG9Eb3MoVG9Eb0xpc3QuaGlnaFByaW8pO1xyXG4gICAgcmVuZGVyVG9Eb3MoVG9Eb0xpc3QubWVkUHJpbyk7XHJcbiAgICByZW5kZXJUb0RvcyhUb0RvTGlzdC5sb3dQcmlvKTtcclxuICB9XHJcblxyXG4gIGlmIChzb3J0VHlwZSA9PT0gXCJwcm9qZWN0U29ydGluZ1wiKSB7XHJcbiAgICByZW1vdmVSb3dzKCk7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IFRvRG9MaXN0LnByb2plY3RzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGxldCBwcm9qQXJyID0gVG9Eb0xpc3QubWFzdGVyTGlzdC5maWx0ZXIoXHJcbiAgICAgICAgKHRhc2tzKSA9PiB0YXNrcy5wcm9qZWN0ID09IFRvRG9MaXN0LnByb2plY3RzW2ldXHJcbiAgICAgICk7XHJcbiAgICAgIGNvbnNvbGUubG9nKHByb2pBcnIpO1xyXG4gICAgICByZW5kZXJUb0Rvcyhwcm9qQXJyLmZpbHRlcigodGFza3MpID0+IHRhc2tzLnByaW9yaXR5ID09PSBcIkhpZ2hcIikpO1xyXG4gICAgICByZW5kZXJUb0Rvcyhwcm9qQXJyLmZpbHRlcigodGFza3MpID0+IHRhc2tzLnByaW9yaXR5ID09PSBcIk1lZGl1bVwiKSk7XHJcbiAgICAgIHJlbmRlclRvRG9zKHByb2pBcnIuZmlsdGVyKCh0YXNrcykgPT4gdGFza3MucHJpb3JpdHkgPT09IFwiTG93XCIpKTtcclxuICAgIH1cclxuICB9XHJcbn07XHJcblxyXG5jb25zdCByZW5kZXJQcm9qZWN0c0ZvclRhc2tNZW51cyA9ICgpID0+IHtcclxuICBsZXQgcHJvamVjdElucHV0RGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcm9qZWN0SW5wdXRcIik7XHJcbiAgbGV0IGVkaXRQcm9qRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcm9qZWN0RWRpdFwiKTtcclxuICB3aGlsZSAocHJvamVjdElucHV0RGl2LmNoaWxkTm9kZXMubGVuZ3RoID4gMikge1xyXG4gICAgcHJvamVjdElucHV0RGl2LnJlbW92ZUNoaWxkKHByb2plY3RJbnB1dERpdi5sYXN0Q2hpbGQpO1xyXG4gIH1cclxuICB3aGlsZSAoZWRpdFByb2pEaXYuY2hpbGROb2Rlcy5sZW5ndGggPiAyKSB7XHJcbiAgICBlZGl0UHJvakRpdi5yZW1vdmVDaGlsZChlZGl0UHJvakRpdi5sYXN0Q2hpbGQpO1xyXG4gIH1cclxuICBmb3IgKGxldCBpID0gMDsgaSA8IFRvRG9MaXN0LnByb2plY3RzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICBsZXQgb3B0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcclxuICAgIG9wdC52YWx1ZSA9IFRvRG9MaXN0LnByb2plY3RzW2ldO1xyXG4gICAgb3B0LmlubmVySFRNTCA9IFRvRG9MaXN0LnByb2plY3RzW2ldO1xyXG4gICAgcHJvamVjdElucHV0RGl2LmFwcGVuZENoaWxkKG9wdCk7XHJcbiAgfVxyXG4gIGZvciAobGV0IGogPSAwOyBqIDwgVG9Eb0xpc3QucHJvamVjdHMubGVuZ3RoOyBqKyspIHtcclxuICAgIGxldCBvcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO1xyXG4gICAgb3B0LnZhbHVlID0gVG9Eb0xpc3QucHJvamVjdHNbal07XHJcbiAgICBvcHQuaW5uZXJIVE1MID0gVG9Eb0xpc3QucHJvamVjdHNbal07XHJcbiAgICBlZGl0UHJvakRpdi5hcHBlbmRDaGlsZChvcHQpO1xyXG4gIH1cclxufTtcclxuXHJcbmNvbnN0IHJlbW92ZUhlYWRlcnMgPSAoKSA9PiB7XHJcbiAgbGV0IGhlYWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGFzay10YWJsZVwiKTtcclxuICBoZWFkZXIucmVtb3ZlQ2hpbGQoaGVhZGVyLmZpcnN0Q2hpbGQpO1xyXG59O1xyXG5leHBvcnQge1xyXG4gIHJlbmRlclRvRG9zLFxyXG4gIHJlZnJlc2hDb250ZW50LFxyXG4gIHNvcnRDb250ZW50LFxyXG4gIHJlbmRlclByb2plY3RzRm9yVGFza01lbnVzLFxyXG4gIGNvbXBsZXRlVGFzayxcclxuICByZW1vdmVSb3dzLFxyXG4gIHJlbW92ZUhlYWRlcnMsXHJcbn07XHJcblxyXG4vL1VzZSBxdWVyeSBzZWxlY3RvciB0byBnZXQgYXJyYXkgb2YgZGl2cyB0aGF0IGhhcyB0aGUgZGF0YSBhdHRyaWJ1dGUgSSB3YW50IHRvIHJlbW92ZVxyXG4iLCJpbXBvcnQgeyBUb0RvTGlzdCB9IGZyb20gXCIuL2xpc3RcIjtcclxuaW1wb3J0IHsgcmVmcmVzaENvbnRlbnQsIHNvcnRDb250ZW50IH0gZnJvbSBcIi4vY29udGVudFwiO1xyXG5cclxuY29uc3QgVG9EbyA9IGZ1bmN0aW9uICh0YXNrTmFtZSwgZGVzY3JpcHRpb24sIGR1ZURhdGUsIHByaW9yaXR5LCBwcm9qZWN0KSB7XHJcbiAgdGhpcy50YXNrTmFtZSA9IHRhc2tOYW1lO1xyXG4gIHRoaXMuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcclxuICB0aGlzLmR1ZURhdGUgPSBkdWVEYXRlO1xyXG4gIHRoaXMucHJpb3JpdHkgPSBwcmlvcml0eTtcclxuICB0aGlzLmNvbXBsZXRlID0gZmFsc2U7XHJcbiAgdGhpcy5wcm9qZWN0ID0gcHJvamVjdDtcclxuICB0aGlzLmlkID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwMCk7XHJcbn07XHJcblxyXG5jb25zdCBhZGRUb0RvID0gKCkgPT4ge1xyXG4gIGxldCB0YXNrTmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGFza05hbWVJbnB1dFwiKS52YWx1ZTtcclxuICBsZXQgdGFza0Rlc2MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRlc2NyaXB0aW9uSW5wdXRcIikudmFsdWU7XHJcbiAgbGV0IHRhc2tEYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkYXRlSW5wdXRcIikudmFsdWU7XHJcbiAgbGV0IHRhc2tQcmlvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcmlvcml0eUlucHV0XCIpLnZhbHVlO1xyXG5cclxuICBsZXQgbmV3VGFzayA9IG5ldyBUb0RvKHRhc2tOYW1lLCB0YXNrRGVzYywgdGFza0RhdGUsIHRhc2tQcmlvLCBcImRlZmF1bHRcIik7XHJcbiAgVG9Eb0xpc3QubWFzdGVyTGlzdC5wdXNoKG5ld1Rhc2spO1xyXG4gIGlmIChuZXdUYXNrLnByaW9yaXR5ID09PSBcIkxvd1wiKSB7XHJcbiAgICBUb0RvTGlzdC5sb3dQcmlvLnB1c2gobmV3VGFzayk7XHJcbiAgfVxyXG5cclxuICBpZiAobmV3VGFzay5wcmlvcml0eSA9PT0gXCJNZWRpdW1cIikge1xyXG4gICAgVG9Eb0xpc3QubWVkUHJpby5wdXNoKG5ld1Rhc2spO1xyXG4gIH1cclxuXHJcbiAgaWYgKG5ld1Rhc2sucHJpb3JpdHkgPT09IFwiSGlnaFwiKSB7XHJcbiAgICBUb0RvTGlzdC5oaWdoUHJpby5wdXNoKG5ld1Rhc2spO1xyXG4gIH1cclxuICBjb25zb2xlLmxvZyhUb0RvTGlzdC5pc1NvcnRlZCk7XHJcbiAgaWYgKFRvRG9MaXN0LmlzU29ydGVkID09PSBmYWxzZSkge1xyXG4gICAgcmVmcmVzaENvbnRlbnQoKTtcclxuICB9IGVsc2Uge1xyXG4gICAgc29ydENvbnRlbnQoKTtcclxuICB9XHJcbn07XHJcblxyXG5jb25zdCBlZGl0VGFzayA9IChlKSA9PiB7XHJcbiAgbGV0IG1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJlZGl0TW9kYWxcIik7XHJcbiAgbW9kYWwuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuXHJcbiAgbGV0IGlkID0gZS50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlLmdldEF0dHJpYnV0ZShcImRhdGEta2V5XCIpO1xyXG4gIGxldCBpbmRleCA9IDA7XHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBUb0RvTGlzdC5tYXN0ZXJMaXN0Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICBjb25zb2xlLmxvZyhcIlRETCBJRFwiLCBUb0RvTGlzdC5tYXN0ZXJMaXN0W2ldLmlkKTtcclxuICAgIGlmIChpZCA9PSBUb0RvTGlzdC5tYXN0ZXJMaXN0W2ldLmlkKSB7XHJcbiAgICAgIGluZGV4ID0gaTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNvbnNvbGUubG9nKFwiaWQgXCIsIGlkKTtcclxuICBjb25zb2xlLmxvZyhcImluZGV4IFwiLCBpbmRleCk7XHJcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0YXNrTmFtZUVkaXRcIikudmFsdWUgPVxyXG4gICAgVG9Eb0xpc3QubWFzdGVyTGlzdFtpbmRleF0udGFza05hbWU7XHJcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkZXNjcmlwdGlvbkVkaXRcIikudmFsdWUgPVxyXG4gICAgVG9Eb0xpc3QubWFzdGVyTGlzdFtpbmRleF0uZGVzY3JpcHRpb247XHJcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkYXRlRWRpdFwiKS52YWx1ZSA9XHJcbiAgICBUb0RvTGlzdC5tYXN0ZXJMaXN0W2luZGV4XS5kdWVEYXRlO1xyXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJpb3JpdHlFZGl0XCIpLnZhbHVlID1cclxuICAgIFRvRG9MaXN0Lm1hc3Rlckxpc3RbaW5kZXhdLnByaW9yaXR5O1xyXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvamVjdEVkaXRcIikudmFsdWUgPVxyXG4gICAgVG9Eb0xpc3QubWFzdGVyTGlzdFtpbmRleF0ucHJvamVjdDtcclxuXHJcbiAgbGV0IHNhdmVDaGFuZ2VzQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzdWJtaXQtZWRpdC1idG5cIik7XHJcbiAgc2F2ZUNoYW5nZXNCdG4ub25jbGljayA9IGZ1bmN0aW9uICgpIHtcclxuICAgIFRvRG9MaXN0Lm1hc3Rlckxpc3RbaW5kZXhdLnRhc2tOYW1lID1cclxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0YXNrTmFtZUVkaXRcIikudmFsdWU7XHJcbiAgICBUb0RvTGlzdC5tYXN0ZXJMaXN0W2luZGV4XS5kZXNjcmlwdGlvbiA9XHJcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGVzY3JpcHRpb25FZGl0XCIpLnZhbHVlO1xyXG4gICAgVG9Eb0xpc3QubWFzdGVyTGlzdFtpbmRleF0uZHVlRGF0ZSA9XHJcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGF0ZUVkaXRcIikudmFsdWU7XHJcbiAgICBUb0RvTGlzdC5tYXN0ZXJMaXN0W2luZGV4XS5wcmlvcml0eSA9XHJcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJpb3JpdHlFZGl0XCIpLnZhbHVlO1xyXG4gICAgVG9Eb0xpc3QubWFzdGVyTGlzdFtpbmRleF0ucHJvamVjdCA9XHJcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvamVjdEVkaXRcIikudmFsdWU7XHJcbiAgICBUb0RvTGlzdC5oaWdoUHJpbyA9IFRvRG9MaXN0Lm1hc3Rlckxpc3QuZmlsdGVyKFxyXG4gICAgICAodGFzaykgPT4gdGFzay5wcmlvcml0eSA9PT0gXCJIaWdoXCJcclxuICAgICk7XHJcbiAgICBUb0RvTGlzdC5tZWRQcmlvID0gVG9Eb0xpc3QubWFzdGVyTGlzdC5maWx0ZXIoXHJcbiAgICAgICh0YXNrKSA9PiB0YXNrLnByaW9yaXR5ID09PSBcIk1lZGl1bVwiXHJcbiAgICApO1xyXG4gICAgVG9Eb0xpc3QubG93UHJpbyA9IFRvRG9MaXN0Lm1hc3Rlckxpc3QuZmlsdGVyKFxyXG4gICAgICAodGFzaykgPT4gdGFzay5wcmlvcml0eSA9PT0gXCJMb3dcIlxyXG4gICAgKTtcclxuXHJcbiAgICByZWZyZXNoQ29udGVudCgpO1xyXG4gICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gIH07XHJcbn07XHJcblxyXG5leHBvcnQgeyBUb0RvLCBhZGRUb0RvLCBlZGl0VGFzayB9O1xyXG4vL0hvdyB0byBoYW5kbGUgcHJvamVjdHM/XHJcbi8vSGF2ZSBhbiBvdmVyYWNyY2hpbmcgYXJyYXkgdGhhdCBob2xkcyBvYmplY3RzIGFuZCBzdWJhcnJheXMgZm9yIGVhY2ggcHJvamVjdD8gPC0tIFNlZW1zIGxpa2VseVxyXG4vLyBIYXZlIGFuIG92ZXJhcmNoaW5nIGFycmF5IGFuZCBmaWx0ZXIgd2hlbiBuZWNlc3NhcnkgZm9yIHByb2plY3RzXHJcbiIsImltcG9ydCB7XHJcbiAgcmVtb3ZlSGVhZGVycyxcclxuICByZW1vdmVSb3dzLFxyXG4gIHJlbmRlclByb2plY3RzRm9yVGFza01lbnVzLFxyXG59IGZyb20gXCIuL2NvbnRlbnRcIjtcclxuaW1wb3J0IHsgVG9Eb0xpc3QgfSBmcm9tIFwiLi9saXN0XCI7XHJcblxyXG5jb25zdCBwcmVwYXJlRGl2ID0gKCkgPT4ge1xyXG4gIHJlbW92ZVJvd3MoKTtcclxuICByZW1vdmVIZWFkZXJzKCk7XHJcbiAgcmVuZGVyUHJvamVjdEhlYWRlcnMoKTtcclxuICByZW5kZXJQcm9qZWN0cygpO1xyXG59O1xyXG5cclxuY29uc3QgcmVuZGVyUHJvamVjdEhlYWRlcnMgPSAoKSA9PiB7XHJcbiAgbGV0IHRhYmxlRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0YXNrLXRhYmxlXCIpO1xyXG4gIGxldCBwcm9qZWN0SGVhZGVycyA9IFtcIlByb2plY3QgTmFtZVwiLCBcIlwiXTtcclxuICBsZXQgaGVhZGVyRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRyXCIpO1xyXG4gIHRhYmxlRGl2LnByZXBlbmQoaGVhZGVyRGl2KTtcclxuICBmb3IgKGxldCBpID0gMDsgaSA8IHByb2plY3RIZWFkZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICBsZXQgdGggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGhcIik7XHJcbiAgICB0aC5pbm5lckhUTUwgPSBwcm9qZWN0SGVhZGVyc1tpXTtcclxuICAgIGhlYWRlckRpdi5hcHBlbmRDaGlsZCh0aCk7XHJcbiAgfVxyXG59O1xyXG5jb25zdCByZW5kZXJQcm9qZWN0cyA9ICgpID0+IHtcclxuICBsZXQgdGFibGVCb2R5ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0YXNrLXRhYmxlLWJvZHlcIik7XHJcblxyXG4gIGZvciAobGV0IGogPSAwOyBqIDwgVG9Eb0xpc3QucHJvamVjdHMubGVuZ3RoOyBqKyspIHtcclxuICAgIHJlbmRlclByb2plY3RSb3coaik7XHJcbiAgfVxyXG5cclxuICBjb25zdCBkZWxldGVCdXR0b25zID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImRlbC1idG5cIik7XHJcbiAgZm9yIChsZXQgayA9IDA7IGsgPCBkZWxldGVCdXR0b25zLmxlbmd0aDsgaysrKSB7XHJcbiAgICBkZWxldGVCdXR0b25zW2tdLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCByZW1vdmVQcm9qZWN0KTtcclxuICB9XHJcblxyXG4gIGNvbnN0IGVkaXRCdXR0b25zID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImVkaXQtYnRuXCIpO1xyXG4gIGZvciAobGV0IGwgPSAwOyBsIDwgZWRpdEJ1dHRvbnMubGVuZ3RoOyBsKyspIHtcclxuICAgIGVkaXRCdXR0b25zW2xdLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBlZGl0UHJvamVjdCk7XHJcbiAgfVxyXG59O1xyXG5cclxuY29uc3QgcmVuZGVyUHJvamVjdFJvdyA9IChpKSA9PiB7XHJcbiAgbGV0IHRhYmxlQm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdGFzay10YWJsZS1ib2R5XCIpO1xyXG4gIGxldCByb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidHJcIik7XHJcbiAgcm93LnNldEF0dHJpYnV0ZShcImRhdGEta2V5XCIsIGkpO1xyXG4gIHJvdy5pZCA9IFwidGFzay1cIiArIGk7XHJcbiAgcm93LmNsYXNzTGlzdC5hZGQoXCJ0YXNrLWl0ZW1cIik7XHJcblxyXG4gIGxldCBwcm9qZWN0TmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZFwiKTtcclxuICBwcm9qZWN0TmFtZS5pbm5lckhUTUwgPSBUb0RvTGlzdC5wcm9qZWN0c1tpXTtcclxuICByb3cuYXBwZW5kQ2hpbGQocHJvamVjdE5hbWUpO1xyXG5cclxuICBsZXQgYnV0dG9ucyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZFwiKTtcclxuICBidXR0b25zLmlkID0gaTtcclxuICBidXR0b25zLnNldEF0dHJpYnV0ZShcImRhdGEta2V5XCIsIGkpO1xyXG5cclxuICBsZXQgZGVsQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcclxuICBidXR0b25zLmFwcGVuZENoaWxkKGRlbEJ0bik7XHJcbiAgZGVsQnRuLnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJidXR0b25cIik7XHJcbiAgZGVsQnRuLmlubmVySFRNTCA9IGA8aSBjbGFzcz1cImZhLXNvbGlkIGZhLXRyYXNoXCI+PC9pPmA7XHJcbiAgZGVsQnRuLmNsYXNzTGlzdC5hZGQoXCJkZWwtYnRuXCIpO1xyXG4gIGRlbEJ0bi5pZCA9IGk7XHJcblxyXG4gIGxldCBlZGl0QnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcclxuICBidXR0b25zLmFwcGVuZENoaWxkKGVkaXRCdG4pO1xyXG4gIGVkaXRCdG4uc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcImJ1dHRvblwiKTtcclxuICBlZGl0QnRuLmlubmVySFRNTCA9IGA8aSBjbGFzcz1cImZhLXNvbGlkIGZhLXBlbmNpbFwiPjwvaT5gO1xyXG4gIGVkaXRCdG4uY2xhc3NMaXN0LmFkZChcImVkaXQtYnRuXCIpO1xyXG4gIGVkaXRCdG4uaWQgPSBpO1xyXG5cclxuICByb3cuYXBwZW5kQ2hpbGQoYnV0dG9ucyk7XHJcblxyXG4gIHRhYmxlQm9keS5hcHBlbmRDaGlsZChyb3cpO1xyXG59O1xyXG5cclxuY29uc3QgcmVtb3ZlUHJvamVjdFJvd3MgPSAoKSA9PiB7XHJcbiAgbGV0IGNvbnRlbnREaXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Rhc2stdGFibGUtYm9keVwiKTtcclxuICB3aGlsZSAoY29udGVudERpdi5maXJzdENoaWxkKSB7XHJcbiAgICBjb250ZW50RGl2LnJlbW92ZUNoaWxkKGNvbnRlbnREaXYuZmlyc3RDaGlsZCk7XHJcbiAgfVxyXG59O1xyXG5cclxuY29uc3QgcmVmcmVzaFByb2plY3RzID0gKCkgPT4ge1xyXG4gIHJlbW92ZVByb2plY3RSb3dzKCk7XHJcbiAgcmVuZGVyUHJvamVjdHMoKTtcclxufTtcclxuXHJcbmNvbnN0IHJlbW92ZVByb2plY3QgPSAoZSkgPT4ge1xyXG4gIGxldCBpZCA9IGUudGFyZ2V0LnBhcmVudE5vZGUuaWQ7XHJcbiAgY29uc29sZS5sb2coaWQpO1xyXG4gIGxldCB0YXJnZXQgPSBUb0RvTGlzdC5wcm9qZWN0c1tpZF07XHJcbiAgY29uc29sZS5sb2codGFyZ2V0KTtcclxuICBsZXQgZmlsdGVyZWRBcnIgPSBUb0RvTGlzdC5wcm9qZWN0cy5maWx0ZXIoKHRhc2spID0+IHRhc2sgIT0gdGFyZ2V0KTtcclxuICBUb0RvTGlzdC5wcm9qZWN0cyA9IGZpbHRlcmVkQXJyO1xyXG4gIHJlZnJlc2hQcm9qZWN0cygpO1xyXG59O1xyXG5cclxuY29uc3QgZWRpdFByb2plY3QgPSAoZSkgPT4ge1xyXG4gIGxldCBtb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZWRpdFByb2plY3RNb2RhbFwiKTtcclxuICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG4gIGNvbnNvbGUubG9nKG1vZGFsKTtcclxuICBsZXQgaWQgPSBlLnRhcmdldC5wYXJlbnROb2RlLmlkO1xyXG4gIGNvbnNvbGUubG9nKGUudGFyZ2V0LnBhcmVudE5vZGUpO1xyXG4gIGxldCBvbGRQcm9qZWN0TmFtZSA9IFRvRG9MaXN0LnByb2plY3RzW2lkXTtcclxuXHJcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJlZGl0UHJvamVjdE5hbWVcIikudmFsdWUgPSBvbGRQcm9qZWN0TmFtZTtcclxuXHJcbiAgbGV0IHNhdmVDaGFuZ2VzQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzdWJtaXQtcHJvamVjdC1lZGl0LWJ0blwiKTtcclxuICBzYXZlQ2hhbmdlc0J0bi5vbmNsaWNrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgVG9Eb0xpc3QucHJvamVjdHNbaWRdID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJlZGl0UHJvamVjdE5hbWVcIikudmFsdWU7XHJcbiAgICBsZXQgbmV3UHJvaiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZWRpdFByb2plY3ROYW1lXCIpLnZhbHVlO1xyXG4gICAgZm9yIChsZXQgbSA9IDA7IG0gPCBUb0RvTGlzdC5tYXN0ZXJMaXN0Lmxlbmd0aDsgbSsrKSB7XHJcbiAgICAgIGlmIChUb0RvTGlzdC5tYXN0ZXJMaXN0W21dLnByb2plY3QgPT09IG9sZFByb2plY3ROYW1lKSB7XHJcbiAgICAgICAgVG9Eb0xpc3QubWFzdGVyTGlzdFttXS5wcm9qZWN0ID0gbmV3UHJvajtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgcmVmcmVzaFByb2plY3RzKCk7XHJcbiAgfTtcclxufTtcclxuXHJcbmV4cG9ydCB7IHByZXBhcmVEaXYsIHJlbW92ZVByb2plY3RSb3dzIH07XHJcbiIsImltcG9ydCB7IFRvRG8gfSBmcm9tIFwiLi9tb2R1bGVzL3RvZG9cIjtcclxuaW1wb3J0IHsgc2V0UHJpb0FycmF5cywgVG9Eb0xpc3QgfSBmcm9tIFwiLi9tb2R1bGVzL2xpc3RcIjtcclxuaW1wb3J0IHsgcmVuZGVyUHJvamVjdHNGb3JUYXNrTWVudXMsIHJlbmRlclRvRG9zIH0gZnJvbSBcIi4vbW9kdWxlcy9jb250ZW50XCI7XHJcbmltcG9ydCBpbml0QnV0dG9ucyBmcm9tIFwiLi9tb2R1bGVzL2J1dHRvbnNcIjtcclxuXHJcbmNvbnNvbGUubG9nKFRvRG9MaXN0Lm1hc3Rlckxpc3QpO1xyXG5sZXQgdGQyID0gbmV3IFRvRG8oXHJcbiAgXCJSb2xsIGZvciBZZWxhblwiLFxyXG4gIFwiUHVsbCBZZWxhbiBiYyBtb21teVwiLFxyXG4gIFwiNS8xMC8yMlwiLFxyXG4gIFwiTWVkaXVtXCIsXHJcbiAgXCJQdWxsc1wiXHJcbik7XHJcblRvRG9MaXN0Lm1hc3Rlckxpc3QucHVzaCh0ZDIpO1xyXG5sZXQgdGQxID0gbmV3IFRvRG8oXHJcbiAgXCJSb2xsIGZvciBBeWFrYVwiLFxyXG4gIFwiVXNlIGFsbCBtZWFucyBuZWNlc3NhcnkgdG8gcHVsbCBBeWFrYVwiLFxyXG4gIFwiNC8xOS8yMlwiLFxyXG4gIFwiSGlnaFwiLFxyXG4gIFwiQXNjZW5zaW9uXCJcclxuKTtcclxuVG9Eb0xpc3QubWFzdGVyTGlzdC5wdXNoKHRkMSk7XHJcbmxldCB0ZDMgPSBuZXcgVG9EbyhcIlJvbGwgZm9yIEF5YXRvXCIsIFwiIHB1bGwgQXlhdG9cIiwgXCI0LzE5LzIyXCIsIFwiTG93XCIsIFwiUHVsbHNcIik7XHJcblRvRG9MaXN0Lm1hc3Rlckxpc3QucHVzaCh0ZDMpO1xyXG5zZXRQcmlvQXJyYXlzKCk7XHJcbnJlbmRlclRvRG9zKFRvRG9MaXN0Lm1hc3Rlckxpc3QpO1xyXG5pbml0QnV0dG9ucygpO1xyXG5yZW5kZXJQcm9qZWN0c0ZvclRhc2tNZW51cygpO1xyXG5cclxuLypcclxuTm90ZXM6XHJcbi1PbiBhZGQgdGFzayBmb3JtIG5lZWQgYSBwbGFjZSB0byBzZWxlY3Qgd2hpY2ggcHJvamVjdCB0byBhZGQgdGhlIHRvIGRvIHRvLiBBbGxvdyBmb3IgbXVsdGlwbGUgcHJvamVjdCBzZWxlY3Rpb24gKE1heWJlIG5vdClcclxuLU5lZWQgYW4gZWRpdCB0YXNrIGJ1dHRvbiBvbiBlYWNoIHRhc2sgcm93XHJcbi1OZWVkIHRvIGZpZ3VyZSBvdXQgd2hlcmUgdG8gY3JlYXRlIG5ldyBwcm9qZWN0c1xyXG4tVmlldyBhbGwgdGFza3MgbmVlZHMgdG8gZGlzcGxheSBwcm9qZWN0IG5hbWVzXHJcblxyXG5QbGFuIG9mIGF0dGFjazpcclxuKkFkZCBhIGZldyBkdW1teSB0byBkbyBvYmplY3RzIGFuZCBnZXQgdGhlbSByZW5kZXJpbmcgdG8gdGhlIGRvbVxyXG4qU2V0IHVwIHRoZSBhZGQgdGFzayBidXR0b24gXHJcbipTZXQgdXAgdGFzayBlZGl0aW5nIDwtLSBNb2RhbCB3aXRoIHRoZSB0YXNrcyBkYXRhIHByZS1maWxsZWQgaW50byBhIGZvcm0uIFxyXG4tLU5lZWQgYSBkaXNjYXJkIGNoYW5nZSBidXR0b24gXHJcbioqTmVlZCBhIHNhdmUgY2hhbmdlIGJ1dHRvbiBcclxuKlNldCB1cCBzb3J0aW5nIFxyXG4tLU1heWJlIGFkZCB3aGljaCB3YXkgdG8gYmUgc29ydGVkPyBTdHJlY2ggZ29hbD9cclxuKlNldCB1cCByZXZlcnRpbmcgc29ydGluZyA8LS0gUmUgcmVuZGVyIGZyb20gbWFzdGVyIGJ5IGNoZWNraW5nIGlzU29ydGluZyBmb3IgZmFsc2VcclxuLVNldCB1cCBwcm9qZWN0c1xyXG4qKiBBZGQgcHJvamVjdCBidXR0b25cclxuKiogQWRkIHByb2plY3Qgc2VsZWN0aW9uIG9uIGFkZCB0YXNrIGZvcm1cclxuLS0gRWRpdCBQcm9qZWN0cyBNb2RhbC4gKD8pXHJcbi0tIEFkZCBwcm9qZWN0IHZpZXdzIDwtLSBDYW4gZGVmaW5pdGVseSBkb1xyXG4tLSBSZSByZW5kZXIgdGFibGUgd2l0aCBhIGZpbHRlcmVkIGFycmF5IGZvciB0aGUgcHJvamVjdCB0aGV5IHdhbnQgdG8gdmlldy4gXHJcblxyXG5cclxuU29ydGluZyBNb2RhbDpcclxuKipEcm9wZG93biB3aXRoIGRlZmF1bHQsIGxvdyB0byBoaWdoIHByaW9yaXR5LCBoaWdoIHRvIGxvdywgcHJvamVjdCAod2hpY2gganVzdCBncm91cHMgdGhlIHRhc2tzIGJ5IHByb2plY3RzKVxyXG4qKiogVG8gZG8gdGhlIGxhc3Qgb25lLCBpdGVyYXRlIHRocm91Z2ggcHJvamVjdHMgYXJyYXkgZmlsdGVyaW5nIHRoZSBtYWluIGFycmF5IGFuZCByZW5kZXJpbmcgdGhlIHJlc3VsdGluZyBhcnJheSBcclxuXHJcbioqY2hhbmdlIHNvcnRpbmcgbW9kYWwgdG8gYSBkcm9wZG93biB3L291dCBtb2RhbCArIG9uY2hhbmdlIHJhdGhlciB0aGFuIGEgc3VibWl0XHJcblxyXG4tLVByb2plY3RzIGNvbGxhcHNpYmxlIG9uIHNpZGViYXIgb3IgYSBkcm9wIGRvd24/IG9yIGEgbW9kYWw/IG9yPz8/IFNvbWV0aGluZyB0byB2aWV3IG9ubHkgdGFza3Mgb2YgYSBwcm9qZWN0LiBcclxuKipCdXR0b24vUmFkaW8gZm9yIG1hcmtpbmcgYSB0YXNrIGNvbXBsZXRlIHRoYXQgY3Jvc3NlcyBvdXQgdGhlIHJvd1xyXG4qKkNoYW5nZSBidXR0b25zIHRvIGljb25zIG9mIHNvbWUgc29ydC4gUGVuY2lsIGZvciBlZGl0LCB0cmFzaGNhbiBmb3IgZGVsZXRlXHJcblxyXG4qQ1NTIGZvciBNb2RhbHNcclxuXHJcblxyXG5cclxuKkNoYW5nZSB0YWJsZSByZW5kZXJpbmcgdG8gYWxsIG9jY3VyIGluIEpTXHJcbi1Qcm9qZWN0cyBidXR0b24gaW4gc2lkZSBiYXIgcmVuZGVycyB0YWJsZSB3aXRoIHByb2plY3QgbmFtZSArIGJ1dHRvbnMgZm9yIGVkaXQgKyBkZWxldGVcclxuXHJcbiovXHJcbiIsImltcG9ydCB7IGFkZFRvRG8gfSBmcm9tIFwiLi90b2RvXCI7XHJcbmltcG9ydCB7XHJcbiAgcmVtb3ZlSGVhZGVycyxcclxuICByZW5kZXJOZXdQcm9qZWN0cyxcclxuICByZW5kZXJQcm9qZWN0c0ZvclRhc2tNZW51cyxcclxuICByZW5kZXJUb0RvcyxcclxuICBzb3J0Q29udGVudCxcclxufSBmcm9tIFwiLi9jb250ZW50XCI7XHJcbmltcG9ydCB7IGFkZFByb2plY3QsIFRvRG9MaXN0IH0gZnJvbSBcIi4vbGlzdFwiO1xyXG5pbXBvcnQgeyBwcmVwYXJlRGl2LCByZW1vdmVQcm9qZWN0Um93cyB9IGZyb20gXCIuL3Byb2plY3RWaWV3XCI7XHJcbmNvbnN0IGluaXRCdXR0b25zID0gKCkgPT4ge1xyXG4gIGxldCB0YXNrTW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRhc2tNb2RhbFwiKTtcclxuICBsZXQgdGFza0J1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibmV3VGFza0J0blwiKTtcclxuICBsZXQgZWRpdE1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJlZGl0TW9kYWxcIik7XHJcbiAgbGV0IHByb2plY3RNb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvamVjdE1vZGFsXCIpO1xyXG4gIGxldCBhZGRQcm9qID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJuZXdQcm9qZWN0XCIpO1xyXG4gIGxldCBzb3J0TW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNvcnRNb2RhbFwiKTtcclxuICBsZXQgZWRpdFByb2pNb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZWRpdFByb2plY3RNb2RhbFwiKTtcclxuICBhZGRQcm9qLm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBwcm9qZWN0TW9kYWwuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuICB9O1xyXG4gIHRhc2tCdXR0b24ub25jbGljayA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHRhc2tNb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG4gIH07XHJcbiAgd2luZG93Lm9uY2xpY2sgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgIGlmIChldmVudC50YXJnZXQgPT0gdGFza01vZGFsKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwiY2xvc2UgbW9kYWxcIik7XHJcbiAgICAgIHRhc2tNb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGFza05hbWVJbnB1dFwiKS52YWx1ZSA9IFwiXCI7XHJcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGVzY3JpcHRpb25JbnB1dFwiKS52YWx1ZSA9IFwiXCI7XHJcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGF0ZUlucHV0XCIpLnZhbHVlID0gXCJcIjtcclxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcmlvcml0eUlucHV0XCIpLnNlbGVjdGVkSW5kZXggPSAwO1xyXG4gICAgfVxyXG4gICAgaWYgKGV2ZW50LnRhcmdldCA9PSBlZGl0TW9kYWwpIHtcclxuICAgICAgZWRpdE1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgIH1cclxuICAgIGlmIChldmVudC50YXJnZXQgPT0gcHJvamVjdE1vZGFsKSB7XHJcbiAgICAgIHByb2plY3RNb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvamVjdE5hbWVcIikudmFsdWUgPSBcIlwiO1xyXG4gICAgfVxyXG4gICAgaWYgKGV2ZW50LnRhcmdldCA9PSBzb3J0TW9kYWwpIHtcclxuICAgICAgc29ydE1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgIH1cclxuICAgIGlmIChldmVudC50YXJnZXQgPT0gZWRpdFByb2pNb2RhbCkge1xyXG4gICAgICBlZGl0UHJvak1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgIH1cclxuICB9O1xyXG4gIGxldCBzdWJtaXRidXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInN1Ym1pdC10YXNrLWJ0blwiKTtcclxuICBzdWJtaXRidXR0b24ub25jbGljayA9IGZ1bmN0aW9uICgpIHtcclxuICAgIGFkZFRvRG8oKTtcclxuICAgIGxldCBtb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGFza01vZGFsXCIpO1xyXG4gICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0YXNrTmFtZUlucHV0XCIpLnZhbHVlID0gXCJcIjtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGVzY3JpcHRpb25JbnB1dFwiKS52YWx1ZSA9IFwiXCI7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRhdGVJbnB1dFwiKS52YWx1ZSA9IFwiXCI7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByaW9yaXR5SW5wdXRcIikuc2VsZWN0ZWRJbmRleCA9IDA7XHJcbiAgfTtcclxuXHJcbiAgLy8gbGV0IHNvcnRCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNvcnRUYXNrQnRuXCIpO1xyXG4gIC8vIHNvcnRCdXR0b24ub25jbGljayA9IGZ1bmN0aW9uICgpIHtcclxuICAvLyAgIGxldCBzb3J0TW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNvcnRNb2RhbFwiKTtcclxuICAvLyAgIHNvcnRNb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG4gIC8vIH07XHJcblxyXG4gIC8vIGxldCBzdWJtaXRTb3J0QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzdWJtaXQtc29ydC1idG5cIik7XHJcbiAgLy8gc3VibWl0U29ydEJ0bi5vbmNsaWNrID0gZnVuY3Rpb24gKCkge1xyXG4gIC8vICAgbGV0IHNvcnRUeXBlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzb3J0VHlwZVwiKS52YWx1ZTtcclxuICAvLyAgIHNvcnRDb250ZW50KHNvcnRUeXBlKTtcclxuICAvLyAgIGxldCBzb3J0TW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNvcnRNb2RhbFwiKTtcclxuICAvLyAgIHNvcnRNb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgLy8gICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNvcnRUeXBlXCIpLnNlbGVjdGVkSW5kZXggPSAwO1xyXG4gIC8vIH07XHJcblxyXG4gIGxldCBzb3J0U2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzb3J0VHlwZVwiKTtcclxuICBzb3J0U2VsZWN0Lm9uY2hhbmdlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgY29uc29sZS5sb2coXCJoZXJlXCIpO1xyXG4gICAgbGV0IHNvcnRUeXBlID0gc29ydFNlbGVjdC52YWx1ZTtcclxuICAgIHNvcnRDb250ZW50KHNvcnRUeXBlKTtcclxuICB9O1xyXG5cclxuICBsZXQgYWRkUHJvakJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3VibWl0LXByb2plY3QtYnRuXCIpO1xyXG4gIGFkZFByb2pCdG4ub25jbGljayA9IGZ1bmN0aW9uICgpIHtcclxuICAgIGFkZFByb2plY3QoKTtcclxuICAgIHByb2plY3RNb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByb2plY3ROYW1lXCIpLnZhbHVlID0gXCJcIjtcclxuICAgIHJlbmRlclByb2plY3RzRm9yVGFza01lbnVzKCk7XHJcbiAgfTtcclxuXHJcbiAgbGV0IHByb2plY3RWaWV3QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcm9qZWN0LXZpZXdcIik7XHJcbiAgcHJvamVjdFZpZXdCdG4ub25jbGljayA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHByZXBhcmVEaXYoKTtcclxuICB9O1xyXG5cclxuICBsZXQgYWxsVGFza3NCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFsbC10YXNrc1wiKTtcclxuICBhbGxUYXNrc0J1dHRvbi5vbmNsaWNrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgcmVtb3ZlSGVhZGVycygpO1xyXG4gICAgcmVtb3ZlUHJvamVjdFJvd3MoKTtcclxuICAgIHJlbmRlclRvRG9zKFRvRG9MaXN0Lm1hc3Rlckxpc3QpO1xyXG4gIH07XHJcblxyXG4gIGxldCBjb21wbGV0ZWRUYXNrQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb21wbGV0ZS10YXNrc1wiKTtcclxuICBjb21wbGV0ZWRUYXNrQnRuLm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICByZW1vdmVIZWFkZXJzKCk7XHJcbiAgICByZW1vdmVQcm9qZWN0Um93cygpO1xyXG4gICAgcmVuZGVyVG9Eb3MoVG9Eb0xpc3QubWFzdGVyTGlzdC5maWx0ZXIoKHRhc2spID0+IHRhc2suY29tcGxldGUgPT0gdHJ1ZSkpO1xyXG4gIH07XHJcblxyXG4gIGxldCBpbmNvbXBsZXRlVGFza0J0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiaW5jb21wbGV0ZS10YXNrc1wiKTtcclxuICBpbmNvbXBsZXRlVGFza0J0bi5vbmNsaWNrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgcmVtb3ZlSGVhZGVycygpO1xyXG4gICAgcmVtb3ZlUHJvamVjdFJvd3MoKTtcclxuICAgIHJlbmRlclRvRG9zKFRvRG9MaXN0Lm1hc3Rlckxpc3QuZmlsdGVyKCh0YXNrKSA9PiB0YXNrLmNvbXBsZXRlID09IGZhbHNlKSk7XHJcbiAgfTtcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGluaXRCdXR0b25zO1xyXG4iXSwibmFtZXMiOlsiVG9Eb0xpc3QiLCJtYXN0ZXJMaXN0IiwibG93UHJpbyIsIm1lZFByaW8iLCJoaWdoUHJpbyIsImlzU29ydGVkIiwicHJvamVjdHMiLCJzZXRQcmlvQXJyYXlzIiwiZmlsdGVyIiwidGFza3MiLCJwcmlvcml0eSIsInJlbmRlclRvRG9zIiwiYXJyYXkiLCJoZWFkZXJBcnIiLCJ0YXNrSGVhZGVyIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImhlYWRlckRpdiIsImNyZWF0ZUVsZW1lbnQiLCJwcmVwZW5kIiwicyIsImxlbmd0aCIsInRoIiwiaW5uZXJIVE1MIiwiYXBwZW5kQ2hpbGQiLCJpIiwicmVuZGVyUm93IiwiZGVsQnRucyIsImdldEVsZW1lbnRzQnlDbGFzc05hbWUiLCJjb25zb2xlIiwibG9nIiwiaiIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVUYXNrIiwiZWRpdEJ0bnMiLCJrIiwiZWRpdFRhc2siLCJjb21wbGV0ZUJ0bnMiLCJsIiwiaWQiLCJjb21wbGV0ZVRhc2siLCJ0YWJsZUJvZHkiLCJxdWVyeVNlbGVjdG9yIiwiZGsiLCJyb3ciLCJjb21wbGV0ZSIsImNsYXNzTGlzdCIsImFkZCIsInNldEF0dHJpYnV0ZSIsInRpdGxlIiwidGFza05hbWUiLCJkZXNjcmlwdGlvbiIsInByb2plY3QiLCJkdWVEYXRlIiwicHJpbyIsImJ1dHRvbnMiLCJkZWxCdG4iLCJjb21wQnRuIiwiZWRpdEJ0biIsInJlbW92ZVJvd3MiLCJjb250ZW50RGl2IiwiZmlyc3RDaGlsZCIsInJlbW92ZUNoaWxkIiwiZSIsInRhcmdldCIsInBhcmVudE5vZGUiLCJnZXRBdHRyaWJ1dGUiLCJmaWx0ZXJBcnIiLCJ0YXNrIiwicmVmcmVzaENvbnRlbnQiLCJyb3dJZCIsInJlbW92ZSIsInNvcnRDb250ZW50Iiwic29ydFR5cGUiLCJwcm9qQXJyIiwicmVuZGVyUHJvamVjdHNGb3JUYXNrTWVudXMiLCJwcm9qZWN0SW5wdXREaXYiLCJlZGl0UHJvakRpdiIsImNoaWxkTm9kZXMiLCJsYXN0Q2hpbGQiLCJvcHQiLCJ2YWx1ZSIsInJlbW92ZUhlYWRlcnMiLCJoZWFkZXIiLCJUb0RvIiwidGhpcyIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsIm1vZGFsIiwic3R5bGUiLCJkaXNwbGF5IiwiaW5kZXgiLCJvbmNsaWNrIiwicmVuZGVyUHJvamVjdHMiLCJyZW5kZXJQcm9qZWN0Um93IiwiZGVsZXRlQnV0dG9ucyIsInJlbW92ZVByb2plY3QiLCJlZGl0QnV0dG9ucyIsImVkaXRQcm9qZWN0IiwicHJvamVjdE5hbWUiLCJyZW1vdmVQcm9qZWN0Um93cyIsInJlZnJlc2hQcm9qZWN0cyIsImZpbHRlcmVkQXJyIiwib2xkUHJvamVjdE5hbWUiLCJuZXdQcm9qIiwibSIsInRkMiIsInB1c2giLCJ0ZDEiLCJ0ZDMiLCJ0YXNrTW9kYWwiLCJ0YXNrQnV0dG9uIiwiZWRpdE1vZGFsIiwicHJvamVjdE1vZGFsIiwiYWRkUHJvaiIsInNvcnRNb2RhbCIsImVkaXRQcm9qTW9kYWwiLCJ3aW5kb3ciLCJldmVudCIsInNlbGVjdGVkSW5kZXgiLCJ0YXNrRGVzYyIsInRhc2tEYXRlIiwidGFza1ByaW8iLCJuZXdUYXNrIiwiYWRkVG9EbyIsInNvcnRTZWxlY3QiLCJvbmNoYW5nZSIsInByb2pJbnB1dCIsImFkZFByb2plY3QiLCJ0YWJsZURpdiIsInByb2plY3RIZWFkZXJzIiwicmVuZGVyUHJvamVjdEhlYWRlcnMiXSwic291cmNlUm9vdCI6IiJ9