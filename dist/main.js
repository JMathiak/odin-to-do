(()=>{"use strict";var e={d:(t,o)=>{for(var l in o)e.o(o,l)&&!e.o(t,l)&&Object.defineProperty(t,l,{enumerable:!0,get:o[l]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{Xp:()=>a,FK:()=>c,ou:()=>n,uB:()=>m});const o={masterList:[],lowPrio:[],medPrio:[],highPrio:[],isSorted:!1,projects:["None","Pulls","Ascension"]},l=()=>{o.highPrio=o.masterList.filter((e=>"High"===e.priority)),o.medPrio=o.masterList.filter((e=>"Medium"===e.priority)),o.lowPrio=o.masterList.filter((e=>"Low"===e.priority))},n=e=>{for(let t=0;t<e.length;t++)i(t,e);const t=document.getElementsByClassName("del-btn");console.log(t);for(let e=0;e<t.length;e++)console.log("here"),t[e].addEventListener("click",s);const o=document.getElementsByClassName("edit-btn");for(let e=0;e<o.length;e++)o[e].addEventListener("click",p);const l=document.getElementsByClassName("comp-btn");for(let e=0;e<l.length;e++)console.log(l[e].id),l[e].id,l[e].addEventListener("click",r)},i=(e,t)=>{let o=document.querySelector("#task-table-body"),l=t[e].id,n=document.createElement("tr");n.setAttribute("data-key",l),n.id="task-"+l,n.classList.add("task-item");let i=document.createElement("td");i.innerHTML=t[e].taskName,n.appendChild(i);let d=document.createElement("td");d.innerHTML=t[e].description,n.appendChild(d);let s=document.createElement("td");s.innerHTML=t[e].project,n.appendChild(s);let r=document.createElement("td");r.innerHTML=t[e].dueDate,n.appendChild(r);let a=document.createElement("td");a.innerHTML=t[e].priority,n.appendChild(a);let m=document.createElement("td");m.setAttribute("data-key",l);let c=document.createElement("button"),u=document.createElement("button");m.appendChild(u),u.setAttribute("type","button"),u.innerHTML='<i class="fa-solid fa-check"></i>',u.classList.add("comp-btn"),u.id=l,m.appendChild(c),c.setAttribute("type","button"),c.innerHTML='<i class="fa-solid fa-trash"></i>',c.classList.add("del-btn");let p=document.createElement("button");m.appendChild(p),p.setAttribute("type","button"),p.innerHTML='<i class="fa-solid fa-pencil"></i>',p.classList.add("edit-btn"),n.appendChild(m),o.appendChild(n)},d=()=>{let e=document.querySelector("#task-table-body");for(;e.firstChild;)e.removeChild(e.firstChild)},s=e=>{let t=e.target.parentNode.parentNode.getAttribute("data-key");console.log("here",t);let n=o.masterList.filter((e=>e.id!=t));o.masterList=n,l(),a(),console.log(o.highPrio),console.log(o.medPrio),console.log(o.lowPrio)},r=e=>{console.log("Complete Task");let t=e.target.parentNode.parentNode.getAttribute("data-key");console.log(t);let l='[data-key="'+t+'"]',n=document.querySelector(l);console.log(n);for(let e=0;e<o.masterList.length;e++)o.masterList[e].id==t&&(!1===o.masterList[e].complete?(n.classList.add("complete"),o.masterList[e].complete=!0):!0===o.masterList[e].complete&&(n.classList.remove("complete"),o.masterList[e].complete=!1));console.log(n.classList)},a=()=>{d(),n(o.masterList)},m=e=>{if("default"===e&&(d(),n(o.masterList)),"lowToHigh"===e&&(d(),n(o.lowPrio),n(o.medPrio),n(o.highPrio)),"highToLow"===e&&(d(),n(o.highPrio),n(o.medPrio),n(o.lowPrio)),"projectSorting"===e){d();for(let e=0;e<o.projects.length;e++){let t=o.masterList.filter((t=>t.project==o.projects[e]));console.log(t),n(t)}}},c=()=>{let e=document.getElementById("projectInput"),t=document.getElementById("projectEdit");for(;e.childNodes.length>2;)e.removeChild(e.lastChild);for(;t.childNodes.length>2;)t.removeChild(t.lastChild);for(let t=0;t<o.projects.length;t++){let l=document.createElement("option");l.value=o.projects[t],l.innerHTML=o.projects[t],e.appendChild(l)}for(let e=0;e<o.projects.length;e++){let l=document.createElement("option");l.value=o.projects[e],l.innerHTML=o.projects[e],t.appendChild(l)}},u=function(e,t,o,l,n){this.taskName=e,this.description=t,this.dueDate=o,this.priority=l,this.complete=!1,this.project=n,this.id=Math.floor(1e3*Math.random())},p=e=>{let t=document.getElementById("editModal");t.style.display="block";let l=e.target.parentNode.parentNode.getAttribute("data-key"),n=0;for(let e=0;e<o.masterList.length;e++)console.log("TDL ID",o.masterList[e].id),l==o.masterList[e].id&&(n=e);console.log("id ",l),console.log("index ",n),document.getElementById("taskNameEdit").value=o.masterList[n].taskName,document.getElementById("descriptionEdit").value=o.masterList[n].description,document.getElementById("dateEdit").value=o.masterList[n].dueDate,document.getElementById("priorityEdit").value=o.masterList[n].priority,document.getElementById("projectEdit").value=o.masterList[n].project,document.getElementById("submit-edit-btn").onclick=function(){o.masterList[n].taskName=document.getElementById("taskNameEdit").value,o.masterList[n].description=document.getElementById("descriptionEdit").value,o.masterList[n].dueDate=document.getElementById("dateEdit").value,o.masterList[n].priority=document.getElementById("priorityEdit").value,o.masterList[n].project=document.getElementById("projectEdit").value,o.highPrio=o.masterList.filter((e=>"High"===e.priority)),o.medPrio=o.masterList.filter((e=>"Medium"===e.priority)),o.lowPrio=o.masterList.filter((e=>"Low"===e.priority)),a(),t.style.display="none"}};console.log(o.masterList);let y=new u("Roll for Yelan","Pull Yelan bc mommy","5/10/22","Medium","Pulls");o.masterList.push(y);let g=new u("Roll for Ayaka","Use all means necessary to pull Ayaka","4/19/22","High","Ascension");o.masterList.push(g);let h=new u("Roll for Ayato"," pull Ayato","4/19/22","Low","Pulls");o.masterList.push(h),l(),n(o.masterList),(()=>{let e=document.getElementById("taskModal"),l=document.getElementById("newTaskBtn"),n=document.getElementById("editModal"),i=document.getElementById("projectModal"),d=document.getElementById("newProject"),s=document.getElementById("sortModal");d.onclick=function(){i.style.display="block"},l.onclick=function(){e.style.display="block"},window.onclick=function(t){t.target==e&&(console.log("close modal"),e.style.display="none"),t.target==n&&(n.style.display="none"),t.target==i&&(i.style.display="none"),t.target==s&&(s.style.display="none")},document.getElementById("submit-task-btn").onclick=function(){(()=>{let e=document.getElementById("taskNameInput").value,t=document.getElementById("descriptionInput").value,l=document.getElementById("dateInput").value,n=document.getElementById("priorityInput").value,i=new u(e,t,l,n,"default");o.masterList.push(i),"Low"===i.priority&&o.lowPrio.push(i),"Medium"===i.priority&&o.medPrio.push(i),"High"===i.priority&&o.highPrio.push(i),console.log(o.isSorted),!1===o.isSorted?a():m()})(),document.getElementById("taskModal").style.display="none",document.getElementById("taskNameInput").value="",document.getElementById("descriptionInput").value="",document.getElementById("dateInput").value="",document.getElementById("priorityInput").selectedIndex=0},document.getElementById("submit-sort-btn").onclick=function(){let e=document.getElementById("sortType").value;m(e),document.getElementById("sortModal").style.display="none",document.getElementById("sortType").selectedIndex=0};let r=document.getElementById("sortType");r.onchange=function(){console.log("here");let e=r.value;m(e)},document.getElementById("submit-project-btn").onclick=function(){(()=>{let e=document.getElementById("projectName").value;o.projects.push(e)})(),i.style.display="none",document.getElementById("projectName").value="",(0,t.renderNewProjects)()}})(),c()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SUFDL0MsSUFBQTJHLHVCRDNDSixHQUNBdEMsSyIsInNvdXJjZXMiOlsid2VicGFjazovL29kaW4tdG8tZG8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vb2Rpbi10by1kby93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vb2Rpbi10by1kby93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL29kaW4tdG8tZG8vd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly9vZGluLXRvLWRvLy4vc3JjL21vZHVsZXMvbGlzdC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvLWRvLy4vc3JjL21vZHVsZXMvY29udGVudC5qcyIsIndlYnBhY2s6Ly9vZGluLXRvLWRvLy4vc3JjL21vZHVsZXMvdG9kby5qcyIsIndlYnBhY2s6Ly9vZGluLXRvLWRvLy4vc3JjL2luZGV4LmpzIiwid2VicGFjazovL29kaW4tdG8tZG8vLi9zcmMvbW9kdWxlcy9idXR0b25zLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwiY29uc3QgVG9Eb0xpc3QgPSAoKCkgPT4ge1xyXG4gIGxldCBpc1NvcnRlZCA9IGZhbHNlO1xyXG4gIGxldCBtYXN0ZXJMaXN0ID0gW107XHJcbiAgbGV0IGxvd1ByaW8gPSBbXTtcclxuICBsZXQgbWVkUHJpbyA9IFtdO1xyXG4gIGxldCBoaWdoUHJpbyA9IFtdO1xyXG4gIGxldCBwcm9qZWN0cyA9IFtcIk5vbmVcIiwgXCJQdWxsc1wiLCBcIkFzY2Vuc2lvblwiXTtcclxuICByZXR1cm4geyBtYXN0ZXJMaXN0LCBsb3dQcmlvLCBtZWRQcmlvLCBoaWdoUHJpbywgaXNTb3J0ZWQsIHByb2plY3RzIH07XHJcbn0pKCk7XHJcblxyXG5jb25zdCBzZXRQcmlvQXJyYXlzID0gKCkgPT4ge1xyXG4gIFRvRG9MaXN0LmhpZ2hQcmlvID0gVG9Eb0xpc3QubWFzdGVyTGlzdC5maWx0ZXIoXHJcbiAgICAodGFza3MpID0+IHRhc2tzLnByaW9yaXR5ID09PSBcIkhpZ2hcIlxyXG4gICk7XHJcbiAgVG9Eb0xpc3QubWVkUHJpbyA9IFRvRG9MaXN0Lm1hc3Rlckxpc3QuZmlsdGVyKFxyXG4gICAgKHRhc2tzKSA9PiB0YXNrcy5wcmlvcml0eSA9PT0gXCJNZWRpdW1cIlxyXG4gICk7XHJcbiAgVG9Eb0xpc3QubG93UHJpbyA9IFRvRG9MaXN0Lm1hc3Rlckxpc3QuZmlsdGVyKFxyXG4gICAgKHRhc2tzKSA9PiB0YXNrcy5wcmlvcml0eSA9PT0gXCJMb3dcIlxyXG4gICk7XHJcbn07XHJcblxyXG5jb25zdCBhZGRQcm9qZWN0ID0gKCkgPT4ge1xyXG4gIGxldCBwcm9qSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByb2plY3ROYW1lXCIpLnZhbHVlO1xyXG4gIFRvRG9MaXN0LnByb2plY3RzLnB1c2gocHJvaklucHV0KTtcclxufTtcclxuZXhwb3J0IHsgVG9Eb0xpc3QsIHNldFByaW9BcnJheXMsIGFkZFByb2plY3QgfTtcclxuIiwiaW1wb3J0IHsgc2V0UHJpb0FycmF5cywgVG9Eb0xpc3QgfSBmcm9tIFwiLi9saXN0XCI7XHJcbmltcG9ydCB7IGVkaXRUYXNrLCBUb0RvIH0gZnJvbSBcIi4vdG9kb1wiO1xyXG5jb25zdCByZW5kZXJUb0RvcyA9IChhcnJheSkgPT4ge1xyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHtcclxuICAgIHJlbmRlclJvdyhpLCBhcnJheSk7XHJcbiAgfVxyXG4gIGNvbnN0IGRlbEJ0bnMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiZGVsLWJ0blwiKTtcclxuICBjb25zb2xlLmxvZyhkZWxCdG5zKTtcclxuICBmb3IgKGxldCBqID0gMDsgaiA8IGRlbEJ0bnMubGVuZ3RoOyBqKyspIHtcclxuICAgIGNvbnNvbGUubG9nKFwiaGVyZVwiKTtcclxuICAgIGRlbEJ0bnNbal0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHJlbW92ZVRhc2spO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgZWRpdEJ0bnMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiZWRpdC1idG5cIik7XHJcbiAgZm9yIChsZXQgayA9IDA7IGsgPCBlZGl0QnRucy5sZW5ndGg7IGsrKykge1xyXG4gICAgZWRpdEJ0bnNba10uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGVkaXRUYXNrKTtcclxuICB9XHJcblxyXG4gIGNvbnN0IGNvbXBsZXRlQnRucyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJjb21wLWJ0blwiKTtcclxuICBmb3IgKGxldCBsID0gMDsgbCA8IGNvbXBsZXRlQnRucy5sZW5ndGg7IGwrKykge1xyXG4gICAgY29uc29sZS5sb2coY29tcGxldGVCdG5zW2xdLmlkKTtcclxuICAgIGxldCBidG5JZCA9IGNvbXBsZXRlQnRuc1tsXS5pZDtcclxuICAgIGNvbXBsZXRlQnRuc1tsXS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY29tcGxldGVUYXNrKTtcclxuICB9XHJcbn07XHJcblxyXG5jb25zdCByZW5kZXJSb3cgPSAoaSwgYXJyYXkpID0+IHtcclxuICBsZXQgdGFibGVCb2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN0YXNrLXRhYmxlLWJvZHlcIik7XHJcblxyXG4gIC8vRGF0YSBrZXk/IDwtLSBOZWVkIHRvIGFkZCB0aGUgZGF0YSBrZXkgdG8gZWFjaCBkaXYuXHJcbiAgbGV0IGRrID0gYXJyYXlbaV0uaWQ7XHJcbiAgbGV0IHJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0clwiKTtcclxuICByb3cuc2V0QXR0cmlidXRlKFwiZGF0YS1rZXlcIiwgZGspO1xyXG4gIHJvdy5pZCA9IFwidGFzay1cIiArIGRrO1xyXG4gIHJvdy5jbGFzc0xpc3QuYWRkKFwidGFzay1pdGVtXCIpO1xyXG4gIGxldCB0aXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZFwiKTtcclxuICB0aXRsZS5pbm5lckhUTUwgPSBhcnJheVtpXS50YXNrTmFtZTtcclxuICByb3cuYXBwZW5kQ2hpbGQodGl0bGUpO1xyXG5cclxuICBsZXQgZGVzY3JpcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGRcIik7XHJcbiAgZGVzY3JpcHRpb24uaW5uZXJIVE1MID0gYXJyYXlbaV0uZGVzY3JpcHRpb247XHJcbiAgcm93LmFwcGVuZENoaWxkKGRlc2NyaXB0aW9uKTtcclxuXHJcbiAgbGV0IHByb2plY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGRcIik7XHJcbiAgcHJvamVjdC5pbm5lckhUTUwgPSBhcnJheVtpXS5wcm9qZWN0O1xyXG4gIHJvdy5hcHBlbmRDaGlsZChwcm9qZWN0KTtcclxuXHJcbiAgbGV0IGR1ZURhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGRcIik7XHJcbiAgZHVlRGF0ZS5pbm5lckhUTUwgPSBhcnJheVtpXS5kdWVEYXRlO1xyXG4gIHJvdy5hcHBlbmRDaGlsZChkdWVEYXRlKTtcclxuXHJcbiAgbGV0IHByaW8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGRcIik7XHJcbiAgcHJpby5pbm5lckhUTUwgPSBhcnJheVtpXS5wcmlvcml0eTtcclxuICByb3cuYXBwZW5kQ2hpbGQocHJpbyk7XHJcblxyXG4gIC8vTmVlZCB0byBjcmVhdGUgYnV0dG9uc1xyXG5cclxuICBsZXQgYnV0dG9ucyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZFwiKTtcclxuICBidXR0b25zLnNldEF0dHJpYnV0ZShcImRhdGEta2V5XCIsIGRrKTtcclxuICBsZXQgZGVsQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcclxuICBsZXQgY29tcEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcbiAgYnV0dG9ucy5hcHBlbmRDaGlsZChjb21wQnRuKTtcclxuICBjb21wQnRuLnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJidXR0b25cIik7XHJcbiAgY29tcEJ0bi5pbm5lckhUTUwgPSBgPGkgY2xhc3M9XCJmYS1zb2xpZCBmYS1jaGVja1wiPjwvaT5gO1xyXG4gIGNvbXBCdG4uY2xhc3NMaXN0LmFkZChcImNvbXAtYnRuXCIpO1xyXG4gIGNvbXBCdG4uaWQgPSBkaztcclxuICBidXR0b25zLmFwcGVuZENoaWxkKGRlbEJ0bik7XHJcbiAgZGVsQnRuLnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJidXR0b25cIik7XHJcbiAgZGVsQnRuLmlubmVySFRNTCA9IGA8aSBjbGFzcz1cImZhLXNvbGlkIGZhLXRyYXNoXCI+PC9pPmA7XHJcbiAgZGVsQnRuLmNsYXNzTGlzdC5hZGQoXCJkZWwtYnRuXCIpO1xyXG4gIGxldCBlZGl0QnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcclxuICBidXR0b25zLmFwcGVuZENoaWxkKGVkaXRCdG4pO1xyXG4gIGVkaXRCdG4uc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcImJ1dHRvblwiKTtcclxuICBlZGl0QnRuLmlubmVySFRNTCA9IGA8aSBjbGFzcz1cImZhLXNvbGlkIGZhLXBlbmNpbFwiPjwvaT5gO1xyXG4gIGVkaXRCdG4uY2xhc3NMaXN0LmFkZChcImVkaXQtYnRuXCIpO1xyXG4gIHJvdy5hcHBlbmRDaGlsZChidXR0b25zKTtcclxuXHJcbiAgdGFibGVCb2R5LmFwcGVuZENoaWxkKHJvdyk7XHJcbn07XHJcblxyXG5jb25zdCByZW1vdmVSb3dzID0gKCkgPT4ge1xyXG4gIGxldCBjb250ZW50RGl2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN0YXNrLXRhYmxlLWJvZHlcIik7XHJcbiAgd2hpbGUgKGNvbnRlbnREaXYuZmlyc3RDaGlsZCkge1xyXG4gICAgY29udGVudERpdi5yZW1vdmVDaGlsZChjb250ZW50RGl2LmZpcnN0Q2hpbGQpO1xyXG4gIH1cclxufTtcclxuXHJcbmNvbnN0IHJlbW92ZVRhc2sgPSAoZSkgPT4ge1xyXG4gIGxldCBpZCA9IGUudGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZS5nZXRBdHRyaWJ1dGUoXCJkYXRhLWtleVwiKTtcclxuICBjb25zb2xlLmxvZyhcImhlcmVcIiwgaWQpO1xyXG4gIGxldCBmaWx0ZXJBcnIgPSBUb0RvTGlzdC5tYXN0ZXJMaXN0LmZpbHRlcigodGFzaykgPT4gdGFzay5pZCAhPSBpZCk7XHJcbiAgVG9Eb0xpc3QubWFzdGVyTGlzdCA9IGZpbHRlckFycjtcclxuICBzZXRQcmlvQXJyYXlzKCk7XHJcbiAgcmVmcmVzaENvbnRlbnQoKTtcclxuICBjb25zb2xlLmxvZyhUb0RvTGlzdC5oaWdoUHJpbyk7XHJcbiAgY29uc29sZS5sb2coVG9Eb0xpc3QubWVkUHJpbyk7XHJcbiAgY29uc29sZS5sb2coVG9Eb0xpc3QubG93UHJpbyk7XHJcbn07XHJcblxyXG5jb25zdCBjb21wbGV0ZVRhc2sgPSAoZSkgPT4ge1xyXG4gIGNvbnNvbGUubG9nKFwiQ29tcGxldGUgVGFza1wiKTtcclxuICBsZXQgaWQgPSBlLnRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGUuZ2V0QXR0cmlidXRlKFwiZGF0YS1rZXlcIik7XHJcbiAgY29uc29sZS5sb2coaWQpO1xyXG4gIGxldCByb3dJZCA9IFwiW2RhdGEta2V5PVwiICsgYFwiYCArIGlkICsgYFwiXWA7XHJcbiAgbGV0IHJvdyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Iocm93SWQpO1xyXG4gIGNvbnNvbGUubG9nKHJvdyk7XHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBUb0RvTGlzdC5tYXN0ZXJMaXN0Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICBpZiAoVG9Eb0xpc3QubWFzdGVyTGlzdFtpXS5pZCA9PSBpZCkge1xyXG4gICAgICBpZiAoVG9Eb0xpc3QubWFzdGVyTGlzdFtpXS5jb21wbGV0ZSA9PT0gZmFsc2UpIHtcclxuICAgICAgICByb3cuY2xhc3NMaXN0LmFkZChcImNvbXBsZXRlXCIpO1xyXG4gICAgICAgIFRvRG9MaXN0Lm1hc3Rlckxpc3RbaV0uY29tcGxldGUgPSB0cnVlO1xyXG4gICAgICB9IGVsc2UgaWYgKFRvRG9MaXN0Lm1hc3Rlckxpc3RbaV0uY29tcGxldGUgPT09IHRydWUpIHtcclxuICAgICAgICByb3cuY2xhc3NMaXN0LnJlbW92ZShcImNvbXBsZXRlXCIpO1xyXG4gICAgICAgIFRvRG9MaXN0Lm1hc3Rlckxpc3RbaV0uY29tcGxldGUgPSBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuICBjb25zb2xlLmxvZyhyb3cuY2xhc3NMaXN0KTtcclxufTtcclxuXHJcbmNvbnN0IHJlZnJlc2hDb250ZW50ID0gKCkgPT4ge1xyXG4gIHJlbW92ZVJvd3MoKTtcclxuICByZW5kZXJUb0RvcyhUb0RvTGlzdC5tYXN0ZXJMaXN0KTtcclxufTtcclxuXHJcbmNvbnN0IHNvcnRDb250ZW50ID0gKHNvcnRUeXBlKSA9PiB7XHJcbiAgaWYgKHNvcnRUeXBlID09PSBcImRlZmF1bHRcIikge1xyXG4gICAgcmVtb3ZlUm93cygpO1xyXG4gICAgcmVuZGVyVG9Eb3MoVG9Eb0xpc3QubWFzdGVyTGlzdCk7XHJcbiAgfVxyXG4gIGlmIChzb3J0VHlwZSA9PT0gXCJsb3dUb0hpZ2hcIikge1xyXG4gICAgcmVtb3ZlUm93cygpO1xyXG4gICAgcmVuZGVyVG9Eb3MoVG9Eb0xpc3QubG93UHJpbyk7XHJcbiAgICByZW5kZXJUb0RvcyhUb0RvTGlzdC5tZWRQcmlvKTtcclxuICAgIHJlbmRlclRvRG9zKFRvRG9MaXN0LmhpZ2hQcmlvKTtcclxuICB9XHJcblxyXG4gIGlmIChzb3J0VHlwZSA9PT0gXCJoaWdoVG9Mb3dcIikge1xyXG4gICAgcmVtb3ZlUm93cygpO1xyXG4gICAgcmVuZGVyVG9Eb3MoVG9Eb0xpc3QuaGlnaFByaW8pO1xyXG4gICAgcmVuZGVyVG9Eb3MoVG9Eb0xpc3QubWVkUHJpbyk7XHJcbiAgICByZW5kZXJUb0RvcyhUb0RvTGlzdC5sb3dQcmlvKTtcclxuICB9XHJcblxyXG4gIGlmIChzb3J0VHlwZSA9PT0gXCJwcm9qZWN0U29ydGluZ1wiKSB7XHJcbiAgICByZW1vdmVSb3dzKCk7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IFRvRG9MaXN0LnByb2plY3RzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGxldCBwcm9qQXJyID0gVG9Eb0xpc3QubWFzdGVyTGlzdC5maWx0ZXIoXHJcbiAgICAgICAgKHRhc2tzKSA9PiB0YXNrcy5wcm9qZWN0ID09IFRvRG9MaXN0LnByb2plY3RzW2ldXHJcbiAgICAgICk7XHJcbiAgICAgIGNvbnNvbGUubG9nKHByb2pBcnIpO1xyXG4gICAgICByZW5kZXJUb0Rvcyhwcm9qQXJyKTtcclxuICAgIH1cclxuICB9XHJcbn07XHJcblxyXG5jb25zdCByZW5kZXJQcm9qZWN0cyA9ICgpID0+IHtcclxuICBsZXQgcHJvamVjdElucHV0RGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcm9qZWN0SW5wdXRcIik7XHJcbiAgbGV0IGVkaXRQcm9qRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcm9qZWN0RWRpdFwiKTtcclxuICB3aGlsZSAocHJvamVjdElucHV0RGl2LmNoaWxkTm9kZXMubGVuZ3RoID4gMikge1xyXG4gICAgcHJvamVjdElucHV0RGl2LnJlbW92ZUNoaWxkKHByb2plY3RJbnB1dERpdi5sYXN0Q2hpbGQpO1xyXG4gIH1cclxuICB3aGlsZSAoZWRpdFByb2pEaXYuY2hpbGROb2Rlcy5sZW5ndGggPiAyKSB7XHJcbiAgICBlZGl0UHJvakRpdi5yZW1vdmVDaGlsZChlZGl0UHJvakRpdi5sYXN0Q2hpbGQpO1xyXG4gIH1cclxuICBmb3IgKGxldCBpID0gMDsgaSA8IFRvRG9MaXN0LnByb2plY3RzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICBsZXQgb3B0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcclxuICAgIG9wdC52YWx1ZSA9IFRvRG9MaXN0LnByb2plY3RzW2ldO1xyXG4gICAgb3B0LmlubmVySFRNTCA9IFRvRG9MaXN0LnByb2plY3RzW2ldO1xyXG4gICAgcHJvamVjdElucHV0RGl2LmFwcGVuZENoaWxkKG9wdCk7XHJcbiAgfVxyXG4gIGZvciAobGV0IGogPSAwOyBqIDwgVG9Eb0xpc3QucHJvamVjdHMubGVuZ3RoOyBqKyspIHtcclxuICAgIGxldCBvcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO1xyXG4gICAgb3B0LnZhbHVlID0gVG9Eb0xpc3QucHJvamVjdHNbal07XHJcbiAgICBvcHQuaW5uZXJIVE1MID0gVG9Eb0xpc3QucHJvamVjdHNbal07XHJcbiAgICBlZGl0UHJvakRpdi5hcHBlbmRDaGlsZChvcHQpO1xyXG4gIH1cclxufTtcclxuZXhwb3J0IHtcclxuICByZW5kZXJUb0RvcyxcclxuICByZWZyZXNoQ29udGVudCxcclxuICBzb3J0Q29udGVudCxcclxuICByZW5kZXJQcm9qZWN0cyxcclxuICBjb21wbGV0ZVRhc2ssXHJcbn07XHJcblxyXG4vL1VzZSBxdWVyeSBzZWxlY3RvciB0byBnZXQgYXJyYXkgb2YgZGl2cyB0aGF0IGhhcyB0aGUgZGF0YSBhdHRyaWJ1dGUgSSB3YW50IHRvIHJlbW92ZVxyXG4iLCJpbXBvcnQgeyBUb0RvTGlzdCB9IGZyb20gXCIuL2xpc3RcIjtcclxuaW1wb3J0IHsgcmVmcmVzaENvbnRlbnQsIHNvcnRDb250ZW50IH0gZnJvbSBcIi4vY29udGVudFwiO1xyXG5cclxuY29uc3QgVG9EbyA9IGZ1bmN0aW9uICh0YXNrTmFtZSwgZGVzY3JpcHRpb24sIGR1ZURhdGUsIHByaW9yaXR5LCBwcm9qZWN0KSB7XHJcbiAgdGhpcy50YXNrTmFtZSA9IHRhc2tOYW1lO1xyXG4gIHRoaXMuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcclxuICB0aGlzLmR1ZURhdGUgPSBkdWVEYXRlO1xyXG4gIHRoaXMucHJpb3JpdHkgPSBwcmlvcml0eTtcclxuICB0aGlzLmNvbXBsZXRlID0gZmFsc2U7XHJcbiAgdGhpcy5wcm9qZWN0ID0gcHJvamVjdDtcclxuICB0aGlzLmlkID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwMCk7XHJcbn07XHJcblxyXG5jb25zdCBhZGRUb0RvID0gKCkgPT4ge1xyXG4gIGxldCB0YXNrTmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGFza05hbWVJbnB1dFwiKS52YWx1ZTtcclxuICBsZXQgdGFza0Rlc2MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRlc2NyaXB0aW9uSW5wdXRcIikudmFsdWU7XHJcbiAgbGV0IHRhc2tEYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkYXRlSW5wdXRcIikudmFsdWU7XHJcbiAgbGV0IHRhc2tQcmlvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcmlvcml0eUlucHV0XCIpLnZhbHVlO1xyXG5cclxuICBsZXQgbmV3VGFzayA9IG5ldyBUb0RvKHRhc2tOYW1lLCB0YXNrRGVzYywgdGFza0RhdGUsIHRhc2tQcmlvLCBcImRlZmF1bHRcIik7XHJcbiAgVG9Eb0xpc3QubWFzdGVyTGlzdC5wdXNoKG5ld1Rhc2spO1xyXG4gIGlmIChuZXdUYXNrLnByaW9yaXR5ID09PSBcIkxvd1wiKSB7XHJcbiAgICBUb0RvTGlzdC5sb3dQcmlvLnB1c2gobmV3VGFzayk7XHJcbiAgfVxyXG5cclxuICBpZiAobmV3VGFzay5wcmlvcml0eSA9PT0gXCJNZWRpdW1cIikge1xyXG4gICAgVG9Eb0xpc3QubWVkUHJpby5wdXNoKG5ld1Rhc2spO1xyXG4gIH1cclxuXHJcbiAgaWYgKG5ld1Rhc2sucHJpb3JpdHkgPT09IFwiSGlnaFwiKSB7XHJcbiAgICBUb0RvTGlzdC5oaWdoUHJpby5wdXNoKG5ld1Rhc2spO1xyXG4gIH1cclxuICBjb25zb2xlLmxvZyhUb0RvTGlzdC5pc1NvcnRlZCk7XHJcbiAgaWYgKFRvRG9MaXN0LmlzU29ydGVkID09PSBmYWxzZSkge1xyXG4gICAgcmVmcmVzaENvbnRlbnQoKTtcclxuICB9IGVsc2Uge1xyXG4gICAgc29ydENvbnRlbnQoKTtcclxuICB9XHJcbn07XHJcblxyXG5jb25zdCBlZGl0VGFzayA9IChlKSA9PiB7XHJcbiAgbGV0IG1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJlZGl0TW9kYWxcIik7XHJcbiAgbW9kYWwuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuXHJcbiAgbGV0IGlkID0gZS50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlLmdldEF0dHJpYnV0ZShcImRhdGEta2V5XCIpO1xyXG4gIGxldCBpbmRleCA9IDA7XHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBUb0RvTGlzdC5tYXN0ZXJMaXN0Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICBjb25zb2xlLmxvZyhcIlRETCBJRFwiLCBUb0RvTGlzdC5tYXN0ZXJMaXN0W2ldLmlkKTtcclxuICAgIGlmIChpZCA9PSBUb0RvTGlzdC5tYXN0ZXJMaXN0W2ldLmlkKSB7XHJcbiAgICAgIGluZGV4ID0gaTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNvbnNvbGUubG9nKFwiaWQgXCIsIGlkKTtcclxuICBjb25zb2xlLmxvZyhcImluZGV4IFwiLCBpbmRleCk7XHJcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0YXNrTmFtZUVkaXRcIikudmFsdWUgPVxyXG4gICAgVG9Eb0xpc3QubWFzdGVyTGlzdFtpbmRleF0udGFza05hbWU7XHJcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkZXNjcmlwdGlvbkVkaXRcIikudmFsdWUgPVxyXG4gICAgVG9Eb0xpc3QubWFzdGVyTGlzdFtpbmRleF0uZGVzY3JpcHRpb247XHJcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkYXRlRWRpdFwiKS52YWx1ZSA9XHJcbiAgICBUb0RvTGlzdC5tYXN0ZXJMaXN0W2luZGV4XS5kdWVEYXRlO1xyXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJpb3JpdHlFZGl0XCIpLnZhbHVlID1cclxuICAgIFRvRG9MaXN0Lm1hc3Rlckxpc3RbaW5kZXhdLnByaW9yaXR5O1xyXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvamVjdEVkaXRcIikudmFsdWUgPVxyXG4gICAgVG9Eb0xpc3QubWFzdGVyTGlzdFtpbmRleF0ucHJvamVjdDtcclxuXHJcbiAgbGV0IHNhdmVDaGFuZ2VzQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzdWJtaXQtZWRpdC1idG5cIik7XHJcbiAgc2F2ZUNoYW5nZXNCdG4ub25jbGljayA9IGZ1bmN0aW9uICgpIHtcclxuICAgIFRvRG9MaXN0Lm1hc3Rlckxpc3RbaW5kZXhdLnRhc2tOYW1lID1cclxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0YXNrTmFtZUVkaXRcIikudmFsdWU7XHJcbiAgICBUb0RvTGlzdC5tYXN0ZXJMaXN0W2luZGV4XS5kZXNjcmlwdGlvbiA9XHJcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGVzY3JpcHRpb25FZGl0XCIpLnZhbHVlO1xyXG4gICAgVG9Eb0xpc3QubWFzdGVyTGlzdFtpbmRleF0uZHVlRGF0ZSA9XHJcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGF0ZUVkaXRcIikudmFsdWU7XHJcbiAgICBUb0RvTGlzdC5tYXN0ZXJMaXN0W2luZGV4XS5wcmlvcml0eSA9XHJcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJpb3JpdHlFZGl0XCIpLnZhbHVlO1xyXG4gICAgVG9Eb0xpc3QubWFzdGVyTGlzdFtpbmRleF0ucHJvamVjdCA9XHJcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvamVjdEVkaXRcIikudmFsdWU7XHJcbiAgICBUb0RvTGlzdC5oaWdoUHJpbyA9IFRvRG9MaXN0Lm1hc3Rlckxpc3QuZmlsdGVyKFxyXG4gICAgICAodGFzaykgPT4gdGFzay5wcmlvcml0eSA9PT0gXCJIaWdoXCJcclxuICAgICk7XHJcbiAgICBUb0RvTGlzdC5tZWRQcmlvID0gVG9Eb0xpc3QubWFzdGVyTGlzdC5maWx0ZXIoXHJcbiAgICAgICh0YXNrKSA9PiB0YXNrLnByaW9yaXR5ID09PSBcIk1lZGl1bVwiXHJcbiAgICApO1xyXG4gICAgVG9Eb0xpc3QubG93UHJpbyA9IFRvRG9MaXN0Lm1hc3Rlckxpc3QuZmlsdGVyKFxyXG4gICAgICAodGFzaykgPT4gdGFzay5wcmlvcml0eSA9PT0gXCJMb3dcIlxyXG4gICAgKTtcclxuXHJcbiAgICByZWZyZXNoQ29udGVudCgpO1xyXG4gICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gIH07XHJcbn07XHJcblxyXG5leHBvcnQgeyBUb0RvLCBhZGRUb0RvLCBlZGl0VGFzayB9O1xyXG4vL0hvdyB0byBoYW5kbGUgcHJvamVjdHM/XHJcbi8vSGF2ZSBhbiBvdmVyYWNyY2hpbmcgYXJyYXkgdGhhdCBob2xkcyBvYmplY3RzIGFuZCBzdWJhcnJheXMgZm9yIGVhY2ggcHJvamVjdD8gPC0tIFNlZW1zIGxpa2VseVxyXG4vLyBIYXZlIGFuIG92ZXJhcmNoaW5nIGFycmF5IGFuZCBmaWx0ZXIgd2hlbiBuZWNlc3NhcnkgZm9yIHByb2plY3RzXHJcbiIsImltcG9ydCB7IFRvRG8gfSBmcm9tIFwiLi9tb2R1bGVzL3RvZG9cIjtcclxuaW1wb3J0IHsgc2V0UHJpb0FycmF5cywgVG9Eb0xpc3QgfSBmcm9tIFwiLi9tb2R1bGVzL2xpc3RcIjtcclxuaW1wb3J0IHsgcmVuZGVyUHJvamVjdHMsIHJlbmRlclRvRG9zIH0gZnJvbSBcIi4vbW9kdWxlcy9jb250ZW50XCI7XHJcbmltcG9ydCBpbml0QnV0dG9ucyBmcm9tIFwiLi9tb2R1bGVzL2J1dHRvbnNcIjtcclxuXHJcbmNvbnNvbGUubG9nKFRvRG9MaXN0Lm1hc3Rlckxpc3QpO1xyXG5sZXQgdGQyID0gbmV3IFRvRG8oXHJcbiAgXCJSb2xsIGZvciBZZWxhblwiLFxyXG4gIFwiUHVsbCBZZWxhbiBiYyBtb21teVwiLFxyXG4gIFwiNS8xMC8yMlwiLFxyXG4gIFwiTWVkaXVtXCIsXHJcbiAgXCJQdWxsc1wiXHJcbik7XHJcblRvRG9MaXN0Lm1hc3Rlckxpc3QucHVzaCh0ZDIpO1xyXG5sZXQgdGQxID0gbmV3IFRvRG8oXHJcbiAgXCJSb2xsIGZvciBBeWFrYVwiLFxyXG4gIFwiVXNlIGFsbCBtZWFucyBuZWNlc3NhcnkgdG8gcHVsbCBBeWFrYVwiLFxyXG4gIFwiNC8xOS8yMlwiLFxyXG4gIFwiSGlnaFwiLFxyXG4gIFwiQXNjZW5zaW9uXCJcclxuKTtcclxuVG9Eb0xpc3QubWFzdGVyTGlzdC5wdXNoKHRkMSk7XHJcbmxldCB0ZDMgPSBuZXcgVG9EbyhcIlJvbGwgZm9yIEF5YXRvXCIsIFwiIHB1bGwgQXlhdG9cIiwgXCI0LzE5LzIyXCIsIFwiTG93XCIsIFwiUHVsbHNcIik7XHJcblRvRG9MaXN0Lm1hc3Rlckxpc3QucHVzaCh0ZDMpO1xyXG5zZXRQcmlvQXJyYXlzKCk7XHJcbnJlbmRlclRvRG9zKFRvRG9MaXN0Lm1hc3Rlckxpc3QpO1xyXG5pbml0QnV0dG9ucygpO1xyXG5yZW5kZXJQcm9qZWN0cygpO1xyXG5cclxuLypcclxuTm90ZXM6XHJcbi1PbiBhZGQgdGFzayBmb3JtIG5lZWQgYSBwbGFjZSB0byBzZWxlY3Qgd2hpY2ggcHJvamVjdCB0byBhZGQgdGhlIHRvIGRvIHRvLiBBbGxvdyBmb3IgbXVsdGlwbGUgcHJvamVjdCBzZWxlY3Rpb24gKE1heWJlIG5vdClcclxuLU5lZWQgYW4gZWRpdCB0YXNrIGJ1dHRvbiBvbiBlYWNoIHRhc2sgcm93XHJcbi1OZWVkIHRvIGZpZ3VyZSBvdXQgd2hlcmUgdG8gY3JlYXRlIG5ldyBwcm9qZWN0c1xyXG4tVmlldyBhbGwgdGFza3MgbmVlZHMgdG8gZGlzcGxheSBwcm9qZWN0IG5hbWVzXHJcblxyXG5QbGFuIG9mIGF0dGFjazpcclxuKkFkZCBhIGZldyBkdW1teSB0byBkbyBvYmplY3RzIGFuZCBnZXQgdGhlbSByZW5kZXJpbmcgdG8gdGhlIGRvbVxyXG4qU2V0IHVwIHRoZSBhZGQgdGFzayBidXR0b24gXHJcbipTZXQgdXAgdGFzayBlZGl0aW5nIDwtLSBNb2RhbCB3aXRoIHRoZSB0YXNrcyBkYXRhIHByZS1maWxsZWQgaW50byBhIGZvcm0uIFxyXG4tLU5lZWQgYSBkaXNjYXJkIGNoYW5nZSBidXR0b24gXHJcbioqTmVlZCBhIHNhdmUgY2hhbmdlIGJ1dHRvbiBcclxuKlNldCB1cCBzb3J0aW5nIFxyXG4tLU1heWJlIGFkZCB3aGljaCB3YXkgdG8gYmUgc29ydGVkPyBTdHJlY2ggZ29hbD9cclxuKlNldCB1cCByZXZlcnRpbmcgc29ydGluZyA8LS0gUmUgcmVuZGVyIGZyb20gbWFzdGVyIGJ5IGNoZWNraW5nIGlzU29ydGluZyBmb3IgZmFsc2VcclxuLVNldCB1cCBwcm9qZWN0c1xyXG4qKiBBZGQgcHJvamVjdCBidXR0b25cclxuKiogQWRkIHByb2plY3Qgc2VsZWN0aW9uIG9uIGFkZCB0YXNrIGZvcm1cclxuLS0gRWRpdCBQcm9qZWN0cyBNb2RhbC4gKD8pXHJcbi0tIEFkZCBwcm9qZWN0IHZpZXdzIDwtLSBDYW4gZGVmaW5pdGVseSBkb1xyXG4tLSBSZSByZW5kZXIgdGFibGUgd2l0aCBhIGZpbHRlcmVkIGFycmF5IGZvciB0aGUgcHJvamVjdCB0aGV5IHdhbnQgdG8gdmlldy4gXHJcblxyXG5cclxuU29ydGluZyBNb2RhbDpcclxuKipEcm9wZG93biB3aXRoIGRlZmF1bHQsIGxvdyB0byBoaWdoIHByaW9yaXR5LCBoaWdoIHRvIGxvdywgcHJvamVjdCAod2hpY2gganVzdCBncm91cHMgdGhlIHRhc2tzIGJ5IHByb2plY3RzKVxyXG4qKiogVG8gZG8gdGhlIGxhc3Qgb25lLCBpdGVyYXRlIHRocm91Z2ggcHJvamVjdHMgYXJyYXkgZmlsdGVyaW5nIHRoZSBtYWluIGFycmF5IGFuZCByZW5kZXJpbmcgdGhlIHJlc3VsdGluZyBhcnJheSBcclxuXHJcbioqY2hhbmdlIHNvcnRpbmcgbW9kYWwgdG8gYSBkcm9wZG93biB3L291dCBtb2RhbCArIG9uY2hhbmdlIHJhdGhlciB0aGFuIGEgc3VibWl0XHJcblxyXG4tLVByb2plY3RzIGNvbGxhcHNpYmxlIG9uIHNpZGViYXIgb3IgYSBkcm9wIGRvd24/IG9yIGEgbW9kYWw/IG9yPz8/IFNvbWV0aGluZyB0byB2aWV3IG9ubHkgdGFza3Mgb2YgYSBwcm9qZWN0LiBcclxuLS1CdXR0b24vUmFkaW8gZm9yIG1hcmtpbmcgYSB0YXNrIGNvbXBsZXRlIHRoYXQgY3Jvc3NlcyBvdXQgdGhlIHJvd1xyXG4tLUNoYW5nZSBidXR0b25zIHRvIGljb25zIG9mIHNvbWUgc29ydC4gUGVuY2lsIGZvciBlZGl0LCB0cmFzaGNhbiBmb3IgZGVsZXRlXHJcblxyXG4qL1xyXG4iLCJpbXBvcnQgeyBhZGRUb0RvIH0gZnJvbSBcIi4vdG9kb1wiO1xyXG5pbXBvcnQgeyByZW5kZXJOZXdQcm9qZWN0cywgcmVuZGVyUHJvamVjdHMsIHNvcnRDb250ZW50IH0gZnJvbSBcIi4vY29udGVudFwiO1xyXG5pbXBvcnQgeyBhZGRQcm9qZWN0LCBUb0RvTGlzdCB9IGZyb20gXCIuL2xpc3RcIjtcclxuY29uc3QgaW5pdEJ1dHRvbnMgPSAoKSA9PiB7XHJcbiAgbGV0IG1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0YXNrTW9kYWxcIik7XHJcbiAgbGV0IHRhc2tCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm5ld1Rhc2tCdG5cIik7XHJcbiAgbGV0IGVkaXRNb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZWRpdE1vZGFsXCIpO1xyXG4gIGxldCBwcm9qZWN0TW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByb2plY3RNb2RhbFwiKTtcclxuICBsZXQgYWRkUHJvaiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibmV3UHJvamVjdFwiKTtcclxuICBsZXQgc29ydE1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzb3J0TW9kYWxcIik7XHJcbiAgYWRkUHJvai5vbmNsaWNrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgcHJvamVjdE1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbiAgfTtcclxuICB0YXNrQnV0dG9uLm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG4gIH07XHJcbiAgd2luZG93Lm9uY2xpY2sgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgIGlmIChldmVudC50YXJnZXQgPT0gbW9kYWwpIHtcclxuICAgICAgY29uc29sZS5sb2coXCJjbG9zZSBtb2RhbFwiKTtcclxuICAgICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgfVxyXG4gICAgaWYgKGV2ZW50LnRhcmdldCA9PSBlZGl0TW9kYWwpIHtcclxuICAgICAgZWRpdE1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgIH1cclxuICAgIGlmIChldmVudC50YXJnZXQgPT0gcHJvamVjdE1vZGFsKSB7XHJcbiAgICAgIHByb2plY3RNb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICB9XHJcbiAgICBpZiAoZXZlbnQudGFyZ2V0ID09IHNvcnRNb2RhbCkge1xyXG4gICAgICBzb3J0TW9kYWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgfVxyXG4gIH07XHJcbiAgbGV0IHN1Ym1pdGJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3VibWl0LXRhc2stYnRuXCIpO1xyXG4gIHN1Ym1pdGJ1dHRvbi5vbmNsaWNrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgYWRkVG9EbygpO1xyXG4gICAgbGV0IG1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0YXNrTW9kYWxcIik7XHJcbiAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRhc2tOYW1lSW5wdXRcIikudmFsdWUgPSBcIlwiO1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkZXNjcmlwdGlvbklucHV0XCIpLnZhbHVlID0gXCJcIjtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGF0ZUlucHV0XCIpLnZhbHVlID0gXCJcIjtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJpb3JpdHlJbnB1dFwiKS5zZWxlY3RlZEluZGV4ID0gMDtcclxuICB9O1xyXG5cclxuICAvLyBsZXQgc29ydEJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic29ydFRhc2tCdG5cIik7XHJcbiAgLy8gc29ydEJ1dHRvbi5vbmNsaWNrID0gZnVuY3Rpb24gKCkge1xyXG4gIC8vICAgbGV0IHNvcnRNb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic29ydE1vZGFsXCIpO1xyXG4gIC8vICAgc29ydE1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbiAgLy8gfTtcclxuXHJcbiAgbGV0IHN1Ym1pdFNvcnRCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInN1Ym1pdC1zb3J0LWJ0blwiKTtcclxuICBzdWJtaXRTb3J0QnRuLm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBsZXQgc29ydFR5cGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNvcnRUeXBlXCIpLnZhbHVlO1xyXG4gICAgc29ydENvbnRlbnQoc29ydFR5cGUpO1xyXG4gICAgbGV0IHNvcnRNb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic29ydE1vZGFsXCIpO1xyXG4gICAgc29ydE1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic29ydFR5cGVcIikuc2VsZWN0ZWRJbmRleCA9IDA7XHJcbiAgfTtcclxuXHJcbiAgbGV0IHNvcnRTZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNvcnRUeXBlXCIpO1xyXG4gIHNvcnRTZWxlY3Qub25jaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBjb25zb2xlLmxvZyhcImhlcmVcIik7XHJcbiAgICBsZXQgc29ydFR5cGUgPSBzb3J0U2VsZWN0LnZhbHVlO1xyXG4gICAgc29ydENvbnRlbnQoc29ydFR5cGUpO1xyXG4gIH07XHJcblxyXG4gIGxldCBhZGRQcm9qQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzdWJtaXQtcHJvamVjdC1idG5cIik7XHJcbiAgYWRkUHJvakJ0bi5vbmNsaWNrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgYWRkUHJvamVjdCgpO1xyXG4gICAgcHJvamVjdE1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvamVjdE5hbWVcIikudmFsdWUgPSBcIlwiO1xyXG4gICAgcmVuZGVyTmV3UHJvamVjdHMoKTtcclxuICB9O1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgaW5pdEJ1dHRvbnM7XHJcbiJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfcmVxdWlyZV9fIiwiZXhwb3J0cyIsImRlZmluaXRpb24iLCJrZXkiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0Iiwib2JqIiwicHJvcCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJUb0RvTGlzdCIsIm1hc3Rlckxpc3QiLCJsb3dQcmlvIiwibWVkUHJpbyIsImhpZ2hQcmlvIiwiaXNTb3J0ZWQiLCJwcm9qZWN0cyIsInNldFByaW9BcnJheXMiLCJmaWx0ZXIiLCJ0YXNrcyIsInByaW9yaXR5IiwicmVuZGVyVG9Eb3MiLCJhcnJheSIsImkiLCJsZW5ndGgiLCJyZW5kZXJSb3ciLCJkZWxCdG5zIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwiY29uc29sZSIsImxvZyIsImoiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlVGFzayIsImVkaXRCdG5zIiwiayIsImVkaXRUYXNrIiwiY29tcGxldGVCdG5zIiwibCIsImlkIiwiY29tcGxldGVUYXNrIiwidGFibGVCb2R5IiwicXVlcnlTZWxlY3RvciIsImRrIiwicm93IiwiY3JlYXRlRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsImNsYXNzTGlzdCIsImFkZCIsInRpdGxlIiwiaW5uZXJIVE1MIiwidGFza05hbWUiLCJhcHBlbmRDaGlsZCIsImRlc2NyaXB0aW9uIiwicHJvamVjdCIsImR1ZURhdGUiLCJwcmlvIiwiYnV0dG9ucyIsImRlbEJ0biIsImNvbXBCdG4iLCJlZGl0QnRuIiwicmVtb3ZlUm93cyIsImNvbnRlbnREaXYiLCJmaXJzdENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJlIiwidGFyZ2V0IiwicGFyZW50Tm9kZSIsImdldEF0dHJpYnV0ZSIsImZpbHRlckFyciIsInRhc2siLCJyZWZyZXNoQ29udGVudCIsInJvd0lkIiwiY29tcGxldGUiLCJyZW1vdmUiLCJzb3J0Q29udGVudCIsInNvcnRUeXBlIiwicHJvakFyciIsInJlbmRlclByb2plY3RzIiwicHJvamVjdElucHV0RGl2IiwiZ2V0RWxlbWVudEJ5SWQiLCJlZGl0UHJvakRpdiIsImNoaWxkTm9kZXMiLCJsYXN0Q2hpbGQiLCJvcHQiLCJUb0RvIiwidGhpcyIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsIm1vZGFsIiwic3R5bGUiLCJkaXNwbGF5IiwiaW5kZXgiLCJvbmNsaWNrIiwidGQyIiwicHVzaCIsInRkMSIsInRkMyIsInRhc2tCdXR0b24iLCJlZGl0TW9kYWwiLCJwcm9qZWN0TW9kYWwiLCJhZGRQcm9qIiwic29ydE1vZGFsIiwid2luZG93IiwiZXZlbnQiLCJ0YXNrRGVzYyIsInRhc2tEYXRlIiwidGFza1ByaW8iLCJuZXdUYXNrIiwiYWRkVG9EbyIsInNlbGVjdGVkSW5kZXgiLCJzb3J0U2VsZWN0Iiwib25jaGFuZ2UiLCJwcm9qSW5wdXQiLCJhZGRQcm9qZWN0IiwicmVuZGVyTmV3UHJvamVjdHMiXSwic291cmNlUm9vdCI6IiJ9