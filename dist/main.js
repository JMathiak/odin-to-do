(()=>{"use strict";const e=e=>{let o=["Task Name","Description","Project","Due Date","Priority",""],i=document.getElementById("task-table"),d=document.createElement("tr");i.prepend(d);for(let e=0;e<o.length;e++){let t=document.createElement("th");t.innerHTML=o[e],d.appendChild(t)}for(let o=0;o<e.length;o++)t(o,e);const r=document.getElementsByClassName("del-btn");for(let e=0;e<r.length;e++)r[e].addEventListener("click",l);const s=document.getElementsByClassName("edit-btn");for(let e=0;e<s.length;e++)s[e].addEventListener("click",L);const a=document.getElementsByClassName("comp-btn");for(let e=0;e<a.length;e++)console.log(a[e].id),a[e].id,a[e].addEventListener("click",n)},t=(e,t)=>{let o=document.querySelector("#task-table-body"),l=t[e].id,n=document.createElement("tr");1==t[e].complete&&n.classList.add("complete"),n.setAttribute("data-key",l),n.id="task-"+l,n.classList.add("task-item");let i=document.createElement("td");i.innerHTML=t[e].taskName,n.appendChild(i);let d=document.createElement("td");d.innerHTML=t[e].description,n.appendChild(d);let r=document.createElement("td");r.innerHTML=t[e].project,n.appendChild(r);let s=document.createElement("td"),a=t[e].dueDate.split("-"),c=a[1]+"-"+a[2]+"-"+a[0];s.innerHTML=c,n.appendChild(s);let m=document.createElement("td");m.innerHTML=t[e].priority,n.appendChild(m);let u=document.createElement("td");u.setAttribute("data-key",l);let p=document.createElement("button");u.appendChild(p),p.setAttribute("type","button"),p.innerHTML='<i class="fa-solid fa-check"></i>',p.classList.add("comp-btn"),p.id=l;let g=document.createElement("button");u.appendChild(g),g.setAttribute("type","button"),g.innerHTML='<i class="fa-solid fa-trash"></i>',g.classList.add("del-btn");let y=document.createElement("button");u.appendChild(y),y.setAttribute("type","button"),y.innerHTML='<i class="fa-solid fa-pencil"></i>',y.classList.add("edit-btn"),n.appendChild(u),o.appendChild(n)},o=()=>{let e=document.querySelector("#task-table-body");for(;e.firstChild;)e.removeChild(e.firstChild)},l=e=>{let t=e.target.parentNode.parentNode.getAttribute("data-key"),o="task-"+E.masterList.indexOf(E.masterList.find((e=>e.id==t))),l=E.masterList.filter((e=>e.id!=t));E.masterList=l,h(),i(),localStorage.removeItem(o)},n=e=>{console.log("Complete Task");let t=e.target.parentNode.parentNode.getAttribute("data-key");console.log(t);let o='[data-key="'+t+'"]',l=document.querySelector(o);console.log(l);for(let e=0;e<E.masterList.length;e++)E.masterList[e].id==t&&(!1===E.masterList[e].complete?(l.classList.add("complete"),E.masterList[e].complete=!0):!0===E.masterList[e].complete&&(l.classList.remove("complete"),E.masterList[e].complete=!1));console.log(l.classList)},i=()=>{o(),s(),e(E.masterList)},d=t=>{if(s(),"default"===t&&(o(),e(E.masterList)),"lowToHigh"===t&&(o(),e(E.lowPrio),e(E.medPrio),e(E.highPrio)),"highToLow"===t&&(o(),e(E.highPrio),e(E.medPrio),e(E.lowPrio)),"projectSorting"===t){o();for(let t=0;t<E.projects.length;t++){let o=E.masterList.filter((e=>e.project==E.projects[t]));console.log(o),e(o.filter((e=>"High"===e.priority))),e(o.filter((e=>"Medium"===e.priority))),e(o.filter((e=>"Low"===e.priority)))}}},r=()=>{let e=document.getElementById("projectInput"),t=document.getElementById("projectEdit");for(;e.childNodes.length>2;)e.removeChild(e.lastChild);for(;t.childNodes.length>2;)t.removeChild(t.lastChild);for(let t=0;t<E.projects.length;t++){let o=document.createElement("option");o.value=E.projects[t],o.innerHTML=E.projects[t],e.appendChild(o)}for(let e=0;e<E.projects.length;e++){let o=document.createElement("option");o.value=E.projects[e],o.innerHTML=E.projects[e],t.appendChild(o)}},s=()=>{let e=document.getElementById("task-table");e.removeChild(e.firstChild)},a=()=>{document.getElementById("task-table-body");for(let e=1;e<E.projects.length;e++)c(e);const e=document.getElementsByClassName("del-btn");for(let t=0;t<e.length;t++)e[t].addEventListener("click",p);const t=document.getElementsByClassName("edit-btn");for(let e=0;e<t.length;e++)t[e].addEventListener("click",g)},c=e=>{let t=document.querySelector("#task-table-body"),o=document.createElement("tr");o.setAttribute("data-key",e),o.id="task-"+e,o.classList.add("task-item");let l=document.createElement("td");l.innerHTML=E.projects[e],o.appendChild(l);let n=document.createElement("td");n.id=e,n.setAttribute("data-key",e);let i=document.createElement("button");n.appendChild(i),i.setAttribute("type","button"),i.innerHTML='<i class="fa-solid fa-trash"></i>',i.classList.add("del-btn"),i.id=e;let d=document.createElement("button");n.appendChild(d),d.setAttribute("type","button"),d.innerHTML='<i class="fa-solid fa-pencil"></i>',d.classList.add("edit-btn"),d.id=e,o.appendChild(n),t.appendChild(o)},m=()=>{let e=document.querySelector("#task-table-body");for(;e.firstChild;)e.removeChild(e.firstChild)},u=()=>{m(),a()},p=e=>{let t=e.target.parentNode.id;console.log(t);let o=E.projects[t];console.log(o);let l=E.projects.filter((e=>e!=o));E.projects=l,u();let n="project-"+t;localStorage.removeItem(n)},g=e=>{let t=document.getElementById("editProjectModal");t.style.display="block",console.log(t);let o=e.target.parentNode.id;console.log(e.target.parentNode);let l=E.projects[o];document.getElementById("editProjectName").value=l,document.getElementById("submit-project-edit-btn").onclick=function(){E.projects[o]=document.getElementById("editProjectName").value;let e=document.getElementById("editProjectName").value;for(let t=0;t<E.masterList.length;t++)E.masterList[t].project===l&&(E.masterList[t].project=e);t.style.display="none",u();let n="project-"+o;localStorage.removeItem(n),localStorage.setItem(n,E.projects[o])}},y=()=>{let e=localStorage.getItem("task-3");console.log(e)},E={masterList:[],lowPrio:[],medPrio:[],highPrio:[],isSorted:!1,projects:["None"],viewingProjects:!1},h=()=>{E.highPrio=E.masterList.filter((e=>"High"===e.priority)),E.medPrio=E.masterList.filter((e=>"Medium"===e.priority)),E.lowPrio=E.masterList.filter((e=>"Low"===e.priority))},I=function(e,t,o,l,n){this.taskName=e,this.description=t,this.dueDate=o,this.priority=l,this.complete=!1,this.project=n,this.id=Math.floor(1e3*Math.random())},L=e=>{let t=document.getElementById("editModal");t.style.display="block";let o=e.target.parentNode.parentNode.getAttribute("data-key"),l=0;for(let e=0;e<E.masterList.length;e++)console.log("TDL ID",E.masterList[e].id),o==E.masterList[e].id&&(l=e);console.log("id ",o),console.log("index ",l),document.getElementById("taskNameEdit").value=E.masterList[l].taskName,document.getElementById("descriptionEdit").value=E.masterList[l].description,document.getElementById("dateEdit").value=E.masterList[l].dueDate,document.getElementById("priorityEdit").value=E.masterList[l].priority,document.getElementById("projectEdit").value=E.masterList[l].project,document.getElementById("submit-edit-btn").onclick=function(){E.masterList[l].taskName=document.getElementById("taskNameEdit").value,E.masterList[l].description=document.getElementById("descriptionEdit").value,E.masterList[l].dueDate=document.getElementById("dateEdit").value,E.masterList[l].priority=document.getElementById("priorityEdit").value,E.masterList[l].project=document.getElementById("projectEdit").value,E.highPrio=E.masterList.filter((e=>"High"===e.priority)),E.medPrio=E.masterList.filter((e=>"Medium"===e.priority)),E.lowPrio=E.masterList.filter((e=>"Low"===e.priority)),i(),t.style.display="none";let e="task-"+l;localStorage.removeItem(e),localStorage.setItem(e,JSON.stringify(E.masterList[l]))}};Object.keys(localStorage).forEach((function(e){if(console.log(localStorage.getItem(e)),e.includes("task")){const t=JSON.parse(localStorage.getItem(e));console.log(t);let o=new I(t.taskName,t.description,t.dueDate,t.priority,t.project);E.masterList.push(o)}e.includes("project")&&E.projects.push(localStorage.getItem(e))})),h(),e(E.masterList),(()=>{let t=document.getElementById("taskModal"),l=document.getElementById("newTaskBtn"),n=document.getElementById("editModal"),c=document.getElementById("projectModal"),p=document.getElementById("newProject"),g=document.getElementById("sortModal"),h=document.getElementById("editProjectModal"),L=document.getElementById("submit-task-btn"),f=document.getElementById("sortType"),k=document.getElementById("submit-project-btn"),j=document.getElementById("project-view"),B=document.getElementById("all-tasks"),b=document.getElementById("complete-tasks"),v=document.getElementById("incomplete-tasks");p.onclick=function(){c.style.display="block"},l.onclick=function(){t.style.display="block"},window.onclick=function(e){e.target==t&&(console.log("close modal"),t.style.display="none",document.getElementById("taskNameInput").value="",document.getElementById("descriptionInput").value="",document.getElementById("dateInput").value="",document.getElementById("priorityInput").selectedIndex=0),e.target==n&&(n.style.display="none"),e.target==c&&(c.style.display="none",document.getElementById("projectName").value=""),e.target==g&&(g.style.display="none"),e.target==h&&(h.style.display="none")},L.onclick=function(){(()=>{let e=document.getElementById("taskNameInput").value,t=document.getElementById("descriptionInput").value,o=document.getElementById("dateInput").value,l=document.getElementById("priorityInput").value,n=document.getElementById("projectInput").value,r=new I(e,t,o,l,n);E.masterList.push(r),"Low"===r.priority&&E.lowPrio.push(r),"Medium"===r.priority&&E.medPrio.push(r),"High"===r.priority&&E.highPrio.push(r),console.log(E.isSorted),console.log(E.viewingProjects),!1===E.viewingProjects&&(!1===E.isSorted?i():d()),((e,t)=>{let o="task-"+e,l=JSON.stringify(t);localStorage.setItem(o,l)})(E.masterList.indexOf(r),r),y()})(),document.getElementById("taskModal").style.display="none",document.getElementById("taskNameInput").value="",document.getElementById("descriptionInput").value="",document.getElementById("dateInput").value="",document.getElementById("priorityInput").selectedIndex=0},f.onchange=function(){console.log("here");let e=f.value;d(e)},k.onclick=function(){(()=>{let e=document.getElementById("projectName").value;E.projects.push(e),((e,t)=>{let o="project-"+e;localStorage.setItem(o,t)})(E.projects.indexOf(e),e),y(),1==E.viewingProjects&&u()})(),c.style.display="none",document.getElementById("projectName").value="",r()},j.onclick=function(){E.viewingProjects=!0,o(),s(),(()=>{let e=document.getElementById("task-table"),t=["Project Name",""],o=document.createElement("tr");e.prepend(o);for(let e=0;e<t.length;e++){let l=document.createElement("th");l.innerHTML=t[e],o.appendChild(l)}})(),a()},B.onclick=function(){E.viewingProjects=!1,s(),m(),e(E.masterList)},b.onclick=function(){E.viewingProjects=!1,s(),m(),e(E.masterList.filter((e=>1==e.complete)))},v.onclick=function(){E.viewingProjects=!1,s(),m(),e(E.masterList.filter((e=>0==e.complete)))}})(),r()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QixFQUMzQnZDLElBQ0F3QixJQUNBbEcsRUFBWTZELEVBQVNDLFdBQVdLLFFBQVFGLEdBQTBCLEdBQWpCQSxFQUFLL0IsY0RsRjFELEdBQ0FpRCxLIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb2Rpbi10by1kby8uL3NyYy9tb2R1bGVzL2NvbnRlbnQuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10by1kby8uL3NyYy9tb2R1bGVzL3Byb2plY3RWaWV3LmpzIiwid2VicGFjazovL29kaW4tdG8tZG8vLi9zcmMvbW9kdWxlcy9zdG9yYWdlLmpzIiwid2VicGFjazovL29kaW4tdG8tZG8vLi9zcmMvbW9kdWxlcy9saXN0LmpzIiwid2VicGFjazovL29kaW4tdG8tZG8vLi9zcmMvbW9kdWxlcy90b2RvLmpzIiwid2VicGFjazovL29kaW4tdG8tZG8vLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vb2Rpbi10by1kby8uL3NyYy9tb2R1bGVzL2J1dHRvbnMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgc2V0UHJpb0FycmF5cywgVG9Eb0xpc3QgfSBmcm9tIFwiLi9saXN0XCI7XHJcbmltcG9ydCB7IGVkaXRUYXNrLCBUb0RvIH0gZnJvbSBcIi4vdG9kb1wiO1xyXG5jb25zdCByZW5kZXJUb0RvcyA9IChhcnJheSkgPT4ge1xyXG4gIGxldCBoZWFkZXJBcnIgPSBbXHJcbiAgICBcIlRhc2sgTmFtZVwiLFxyXG4gICAgXCJEZXNjcmlwdGlvblwiLFxyXG4gICAgXCJQcm9qZWN0XCIsXHJcbiAgICBcIkR1ZSBEYXRlXCIsXHJcbiAgICBcIlByaW9yaXR5XCIsXHJcbiAgICBcIlwiLFxyXG4gIF07XHJcbiAgbGV0IHRhc2tIZWFkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRhc2stdGFibGVcIik7XHJcbiAgbGV0IGhlYWRlckRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0clwiKTtcclxuICB0YXNrSGVhZGVyLnByZXBlbmQoaGVhZGVyRGl2KTtcclxuICBmb3IgKGxldCBzID0gMDsgcyA8IGhlYWRlckFyci5sZW5ndGg7IHMrKykge1xyXG4gICAgbGV0IHRoID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRoXCIpO1xyXG4gICAgdGguaW5uZXJIVE1MID0gaGVhZGVyQXJyW3NdO1xyXG4gICAgaGVhZGVyRGl2LmFwcGVuZENoaWxkKHRoKTtcclxuICB9XHJcbiAgLy9JdGVyYXRlcyB0aHJvdWdoIHRoZSBhcnJheSBwYXNzZWQgdG8gdGhlIGZ1bmN0aW9uIGFuZCBjYWxscyB0aGUgZnVuY3Rpb24gdGhhdCB3aWxsIHJlbmRlciB0aGUgb2JqZWN0IGF0IHRoZSBpbmRleCBvZiB0aGUgYXJyYXlcclxuICBmb3IgKGxldCBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICByZW5kZXJSb3coaSwgYXJyYXkpO1xyXG4gIH1cclxuICAvL0l0ZXJhdGVzIHRocm91Z2ggdGhlIGRlbGV0ZSAvIGVkaXQgLyBjb21wbGV0ZSBidXR0b25zIGluIGVhY2ggcm93IGFuZCBsaW5rcyB0aGVtIHRvIHRoZWlyIHJlc3BlY3RpdmUgcm93XHJcbiAgLy8gYW5kIGdpdmVzIHRoZW0gYW4gb24gY2xpY2sgZnVuY3Rpb25cclxuICBjb25zdCBkZWxCdG5zID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImRlbC1idG5cIik7XHJcbiAgZm9yIChsZXQgaiA9IDA7IGogPCBkZWxCdG5zLmxlbmd0aDsgaisrKSB7XHJcbiAgICBkZWxCdG5zW2pdLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCByZW1vdmVUYXNrKTtcclxuICB9XHJcblxyXG4gIGNvbnN0IGVkaXRCdG5zID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImVkaXQtYnRuXCIpO1xyXG4gIGZvciAobGV0IGsgPSAwOyBrIDwgZWRpdEJ0bnMubGVuZ3RoOyBrKyspIHtcclxuICAgIGVkaXRCdG5zW2tdLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBlZGl0VGFzayk7XHJcbiAgfVxyXG5cclxuICBjb25zdCBjb21wbGV0ZUJ0bnMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiY29tcC1idG5cIik7XHJcbiAgZm9yIChsZXQgbCA9IDA7IGwgPCBjb21wbGV0ZUJ0bnMubGVuZ3RoOyBsKyspIHtcclxuICAgIGNvbnNvbGUubG9nKGNvbXBsZXRlQnRuc1tsXS5pZCk7XHJcbiAgICBsZXQgYnRuSWQgPSBjb21wbGV0ZUJ0bnNbbF0uaWQ7XHJcbiAgICBjb21wbGV0ZUJ0bnNbbF0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNvbXBsZXRlVGFzayk7XHJcbiAgfVxyXG59O1xyXG5cclxuY29uc3QgcmVuZGVyUm93ID0gKGksIGFycmF5KSA9PiB7XHJcbiAgbGV0IHRhYmxlQm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdGFzay10YWJsZS1ib2R5XCIpO1xyXG5cclxuICBsZXQgZGsgPSBhcnJheVtpXS5pZDsgLy9UaGUgZGF0YSBrZXkgdXNlZCB0byBhY2Nlc3Mgcm93c1xyXG4gIC8vQ3JlYXRlcyB0aGUgcm93IHRhZyBhbmQgY2hlY2tzIGlmIHRoZSBuZWVkIHRvIGFkZCBzdHlsaW5nIGZvciBhIGNvbXBsZXRlZCB0YXNrXHJcbiAgbGV0IHJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0clwiKTtcclxuICBpZiAoYXJyYXlbaV0uY29tcGxldGUgPT0gdHJ1ZSkge1xyXG4gICAgcm93LmNsYXNzTGlzdC5hZGQoXCJjb21wbGV0ZVwiKTtcclxuICB9XHJcbiAgcm93LnNldEF0dHJpYnV0ZShcImRhdGEta2V5XCIsIGRrKTtcclxuICByb3cuaWQgPSBcInRhc2stXCIgKyBkaztcclxuICByb3cuY2xhc3NMaXN0LmFkZChcInRhc2staXRlbVwiKTtcclxuXHJcbiAgLy9UaGUgZm9sbG93aW5nIGNvZGUgc2VjdGlvbnMgY3JlYXRlcyB0aGUgZGF0YSBjZWxscyBmb3IgZWFjaCBwYXJ0IG9mIHRoZSB0YXNrIHRvIGJlIGRpc3BsYXllZFxyXG4gIGxldCB0aXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZFwiKTtcclxuICB0aXRsZS5pbm5lckhUTUwgPSBhcnJheVtpXS50YXNrTmFtZTtcclxuICByb3cuYXBwZW5kQ2hpbGQodGl0bGUpO1xyXG5cclxuICBsZXQgZGVzY3JpcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGRcIik7XHJcbiAgZGVzY3JpcHRpb24uaW5uZXJIVE1MID0gYXJyYXlbaV0uZGVzY3JpcHRpb247XHJcbiAgcm93LmFwcGVuZENoaWxkKGRlc2NyaXB0aW9uKTtcclxuXHJcbiAgbGV0IHByb2plY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGRcIik7XHJcbiAgcHJvamVjdC5pbm5lckhUTUwgPSBhcnJheVtpXS5wcm9qZWN0O1xyXG4gIHJvdy5hcHBlbmRDaGlsZChwcm9qZWN0KTtcclxuXHJcbiAgbGV0IGR1ZURhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGRcIik7XHJcbiAgLy9JIHdhbnRlZCB0byBjaGFuZ2UgdGhlIHdheSB0aGUgRGF0ZSB3YXMgcmVuZGVyZWQgc28gSSBzcGxpdCB0aGUgc3RyaW5nIHRvIG1hbmlwdWxhdGUgaG93IGl0cyByZW5kZXJlZFxyXG4gIGxldCBzcGxpdERhdGUgPSBhcnJheVtpXS5kdWVEYXRlLnNwbGl0KFwiLVwiKTtcclxuICBsZXQgZm9ybWF0dGVkRGF0ZSA9IHNwbGl0RGF0ZVsxXSArIFwiLVwiICsgc3BsaXREYXRlWzJdICsgXCItXCIgKyBzcGxpdERhdGVbMF07XHJcbiAgZHVlRGF0ZS5pbm5lckhUTUwgPSBmb3JtYXR0ZWREYXRlO1xyXG4gIHJvdy5hcHBlbmRDaGlsZChkdWVEYXRlKTtcclxuXHJcbiAgbGV0IHByaW8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGRcIik7XHJcbiAgcHJpby5pbm5lckhUTUwgPSBhcnJheVtpXS5wcmlvcml0eTtcclxuICByb3cuYXBwZW5kQ2hpbGQocHJpbyk7XHJcblxyXG4gIC8vRm9sbG93aW5nIGNvZGUgc2VjdGlvbiBjcmVhdGVzIHRoZSBidXR0b25zXHJcblxyXG4gIC8vQ3JlYXRlcyB0aGUgYnV0dG9uIGNlbGxcclxuICBsZXQgYnV0dG9ucyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZFwiKTtcclxuICBidXR0b25zLnNldEF0dHJpYnV0ZShcImRhdGEta2V5XCIsIGRrKTtcclxuXHJcbiAgLy9DcmVhdGVzIHRoZSBjb21wbGV0ZSBidXR0b25cclxuICBsZXQgY29tcEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcbiAgYnV0dG9ucy5hcHBlbmRDaGlsZChjb21wQnRuKTtcclxuICBjb21wQnRuLnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJidXR0b25cIik7XHJcbiAgY29tcEJ0bi5pbm5lckhUTUwgPSBgPGkgY2xhc3M9XCJmYS1zb2xpZCBmYS1jaGVja1wiPjwvaT5gO1xyXG4gIGNvbXBCdG4uY2xhc3NMaXN0LmFkZChcImNvbXAtYnRuXCIpO1xyXG4gIGNvbXBCdG4uaWQgPSBkaztcclxuXHJcbiAgLy9DcmVhdGVzIHRoZSBkZWxldGUgYnV0dG9uXHJcbiAgbGV0IGRlbEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcbiAgYnV0dG9ucy5hcHBlbmRDaGlsZChkZWxCdG4pO1xyXG4gIGRlbEJ0bi5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwiYnV0dG9uXCIpO1xyXG4gIGRlbEJ0bi5pbm5lckhUTUwgPSBgPGkgY2xhc3M9XCJmYS1zb2xpZCBmYS10cmFzaFwiPjwvaT5gO1xyXG4gIGRlbEJ0bi5jbGFzc0xpc3QuYWRkKFwiZGVsLWJ0blwiKTtcclxuXHJcbiAgLy9DcmVhdGVzIHRoZSBlZGl0IGJ1dHRvblxyXG4gIGxldCBlZGl0QnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcclxuICBidXR0b25zLmFwcGVuZENoaWxkKGVkaXRCdG4pO1xyXG4gIGVkaXRCdG4uc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcImJ1dHRvblwiKTtcclxuICBlZGl0QnRuLmlubmVySFRNTCA9IGA8aSBjbGFzcz1cImZhLXNvbGlkIGZhLXBlbmNpbFwiPjwvaT5gO1xyXG4gIGVkaXRCdG4uY2xhc3NMaXN0LmFkZChcImVkaXQtYnRuXCIpO1xyXG4gIHJvdy5hcHBlbmRDaGlsZChidXR0b25zKTtcclxuXHJcbiAgdGFibGVCb2R5LmFwcGVuZENoaWxkKHJvdyk7XHJcbn07XHJcblxyXG4vL0Z1bmN0aW9uIHVzZWQgdG8gY2xlYXIgdGhlIHRhYmxlIHRoYXQgaXMgYmVpbmcgY3VycmVudGx5IGRpc3BsYXllZFxyXG5jb25zdCByZW1vdmVSb3dzID0gKCkgPT4ge1xyXG4gIGxldCBjb250ZW50RGl2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN0YXNrLXRhYmxlLWJvZHlcIik7XHJcbiAgd2hpbGUgKGNvbnRlbnREaXYuZmlyc3RDaGlsZCkge1xyXG4gICAgY29udGVudERpdi5yZW1vdmVDaGlsZChjb250ZW50RGl2LmZpcnN0Q2hpbGQpO1xyXG4gIH1cclxufTtcclxuXHJcbi8vT24gY2xpY2sgZnVuY3Rpb24gZm9yIGRlbGV0ZSB0YXNrIGJ1dHRvbnNcclxuY29uc3QgcmVtb3ZlVGFzayA9IChlKSA9PiB7XHJcbiAgLy9HZXRzIHRoZSBpZCBieSBhY2Nlc3NpbmcgdGhlIGRhdGEga2V5IGZvciB0aGUgcm93XHJcbiAgbGV0IGlkID0gZS50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlLmdldEF0dHJpYnV0ZShcImRhdGEta2V5XCIpO1xyXG5cclxuICAvL0dldHMgdGhlIGluZGV4IHVzZWQgd2l0aCBsb2NhbCBzdG9yYWdlXHJcbiAgbGV0IGluZCA9IFRvRG9MaXN0Lm1hc3Rlckxpc3QuaW5kZXhPZihcclxuICAgIFRvRG9MaXN0Lm1hc3Rlckxpc3QuZmluZCgodGFzaykgPT4gdGFzay5pZCA9PSBpZClcclxuICApO1xyXG4gIGxldCBrZXkgPSBcInRhc2stXCIgKyBpbmQ7XHJcblxyXG4gIC8vRmlsdGVycyB0aGUgYXJyYXksIGdldHRpbmcgcmlkIG9mIHRoZSB0YXNrIHRoYXQgbWF0Y2hlcyB0aGUgSUQgb2YgdGhlIHJvd1xyXG4gIGxldCBmaWx0ZXJBcnIgPSBUb0RvTGlzdC5tYXN0ZXJMaXN0LmZpbHRlcigodGFzaykgPT4gdGFzay5pZCAhPSBpZCk7XHJcbiAgVG9Eb0xpc3QubWFzdGVyTGlzdCA9IGZpbHRlckFycjtcclxuICBzZXRQcmlvQXJyYXlzKCk7XHJcbiAgcmVmcmVzaENvbnRlbnQoKTtcclxuXHJcbiAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oa2V5KTtcclxufTtcclxuXHJcbi8vRnVuY3Rpb24gdXNlZCB0byB0b2dnbGUgaWYgYSB0YXNrIGlzIGNvbXBsZXRlXHJcbmNvbnN0IGNvbXBsZXRlVGFzayA9IChlKSA9PiB7XHJcbiAgY29uc29sZS5sb2coXCJDb21wbGV0ZSBUYXNrXCIpO1xyXG4gIGxldCBpZCA9IGUudGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZS5nZXRBdHRyaWJ1dGUoXCJkYXRhLWtleVwiKTtcclxuICBjb25zb2xlLmxvZyhpZCk7XHJcbiAgbGV0IHJvd0lkID0gXCJbZGF0YS1rZXk9XCIgKyBgXCJgICsgaWQgKyBgXCJdYDtcclxuICBsZXQgcm93ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihyb3dJZCk7XHJcbiAgY29uc29sZS5sb2cocm93KTtcclxuICAvL0l0ZXJhdGVzIHRocm91Z2ggYWxsIHRhc2tzIGFuZCBhZGRzL3JlbW92ZXMgc3R5bGluZyB1c2VkIHRvIGluZGljYXRlIGEgdGFzayBjb21wbGV0aW9uXHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBUb0RvTGlzdC5tYXN0ZXJMaXN0Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICBpZiAoVG9Eb0xpc3QubWFzdGVyTGlzdFtpXS5pZCA9PSBpZCkge1xyXG4gICAgICBpZiAoVG9Eb0xpc3QubWFzdGVyTGlzdFtpXS5jb21wbGV0ZSA9PT0gZmFsc2UpIHtcclxuICAgICAgICByb3cuY2xhc3NMaXN0LmFkZChcImNvbXBsZXRlXCIpO1xyXG4gICAgICAgIFRvRG9MaXN0Lm1hc3Rlckxpc3RbaV0uY29tcGxldGUgPSB0cnVlO1xyXG4gICAgICB9IGVsc2UgaWYgKFRvRG9MaXN0Lm1hc3Rlckxpc3RbaV0uY29tcGxldGUgPT09IHRydWUpIHtcclxuICAgICAgICByb3cuY2xhc3NMaXN0LnJlbW92ZShcImNvbXBsZXRlXCIpO1xyXG4gICAgICAgIFRvRG9MaXN0Lm1hc3Rlckxpc3RbaV0uY29tcGxldGUgPSBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuICBjb25zb2xlLmxvZyhyb3cuY2xhc3NMaXN0KTtcclxufTtcclxuXHJcbi8vUmVmcmVzaGVzIHRoZSB0YWJsZSB0byByZS1yZW5kZXIgdGhlIHRhYmxlLiBVc2VkIHRvIHVwZGF0ZSB0aGUgdGFibGUgd2hlbiBjaGFuZ2VzIGFyZSBtYWRlLlxyXG5jb25zdCByZWZyZXNoQ29udGVudCA9ICgpID0+IHtcclxuICByZW1vdmVSb3dzKCk7XHJcbiAgcmVtb3ZlSGVhZGVycygpO1xyXG4gIHJlbmRlclRvRG9zKFRvRG9MaXN0Lm1hc3Rlckxpc3QpO1xyXG59O1xyXG5cclxuLy9SZW5kZXJzIHRoZSB0YXNrcyBpbiBvcmRlciBvZiB0aGUgc2VsZWN0ZWQgc29ydCB0eXBlXHJcbmNvbnN0IHNvcnRDb250ZW50ID0gKHNvcnRUeXBlKSA9PiB7XHJcbiAgcmVtb3ZlSGVhZGVycygpO1xyXG4gIGlmIChzb3J0VHlwZSA9PT0gXCJkZWZhdWx0XCIpIHtcclxuICAgIHJlbW92ZVJvd3MoKTtcclxuICAgIHJlbmRlclRvRG9zKFRvRG9MaXN0Lm1hc3Rlckxpc3QpO1xyXG4gIH1cclxuXHJcbiAgLy9Tb3J0aW5nIGJ5IHByaW9yaXR5IGlzIGRvbmUgYnkgcmVuZGVyaW5nIHN1Yi1hcnJheXMgaW4gYSBjZXJ0YWluIG9yZGVyLlxyXG4gIGlmIChzb3J0VHlwZSA9PT0gXCJsb3dUb0hpZ2hcIikge1xyXG4gICAgcmVtb3ZlUm93cygpO1xyXG4gICAgcmVuZGVyVG9Eb3MoVG9Eb0xpc3QubG93UHJpbyk7XHJcbiAgICByZW5kZXJUb0RvcyhUb0RvTGlzdC5tZWRQcmlvKTtcclxuICAgIHJlbmRlclRvRG9zKFRvRG9MaXN0LmhpZ2hQcmlvKTtcclxuICB9XHJcblxyXG4gIGlmIChzb3J0VHlwZSA9PT0gXCJoaWdoVG9Mb3dcIikge1xyXG4gICAgcmVtb3ZlUm93cygpO1xyXG4gICAgcmVuZGVyVG9Eb3MoVG9Eb0xpc3QuaGlnaFByaW8pO1xyXG4gICAgcmVuZGVyVG9Eb3MoVG9Eb0xpc3QubWVkUHJpbyk7XHJcbiAgICByZW5kZXJUb0RvcyhUb0RvTGlzdC5sb3dQcmlvKTtcclxuICB9XHJcblxyXG4gIC8vSXRlcmF0ZXMgdGhyb3VnaCB0aGUgcHJvamVjdHMgYXJyYXkgYW5kIHRoZW4gdGhlIGxpc3Qgb2YgdGFza3Mgb25seSByZW5kZXJpbmcgdGhlIHRhc2tzIHdpdGggbWF0Y2hpbmcgcHJvamVjdHMuXHJcbiAgLy8gQWxsIHRhc2tzIHdpbGwgaGF2ZSBiZWVuIGl0ZXJhdGVkIGJ5IHRoZSB0aW1lIGl0ZXJhdGlvbiBpcyBkb25lXHJcbiAgaWYgKHNvcnRUeXBlID09PSBcInByb2plY3RTb3J0aW5nXCIpIHtcclxuICAgIHJlbW92ZVJvd3MoKTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgVG9Eb0xpc3QucHJvamVjdHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgbGV0IHByb2pBcnIgPSBUb0RvTGlzdC5tYXN0ZXJMaXN0LmZpbHRlcihcclxuICAgICAgICAodGFza3MpID0+IHRhc2tzLnByb2plY3QgPT0gVG9Eb0xpc3QucHJvamVjdHNbaV1cclxuICAgICAgKTtcclxuICAgICAgY29uc29sZS5sb2cocHJvakFycik7XHJcbiAgICAgIHJlbmRlclRvRG9zKHByb2pBcnIuZmlsdGVyKCh0YXNrcykgPT4gdGFza3MucHJpb3JpdHkgPT09IFwiSGlnaFwiKSk7XHJcbiAgICAgIHJlbmRlclRvRG9zKHByb2pBcnIuZmlsdGVyKCh0YXNrcykgPT4gdGFza3MucHJpb3JpdHkgPT09IFwiTWVkaXVtXCIpKTtcclxuICAgICAgcmVuZGVyVG9Eb3MocHJvakFyci5maWx0ZXIoKHRhc2tzKSA9PiB0YXNrcy5wcmlvcml0eSA9PT0gXCJMb3dcIikpO1xyXG4gICAgfVxyXG4gIH1cclxufTtcclxuXHJcbi8vVXBkYXRlcyBzZWxlY3QgYm94ZXMgd2hlbiBwcm9qZWN0cyBoYXZlIGJlZW4gYWRkZWQvcmVtb3ZlZC5cclxuY29uc3QgcmVuZGVyUHJvamVjdHNGb3JUYXNrTWVudXMgPSAoKSA9PiB7XHJcbiAgbGV0IHByb2plY3RJbnB1dERpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvamVjdElucHV0XCIpO1xyXG4gIGxldCBlZGl0UHJvakRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvamVjdEVkaXRcIik7XHJcbiAgd2hpbGUgKHByb2plY3RJbnB1dERpdi5jaGlsZE5vZGVzLmxlbmd0aCA+IDIpIHtcclxuICAgIHByb2plY3RJbnB1dERpdi5yZW1vdmVDaGlsZChwcm9qZWN0SW5wdXREaXYubGFzdENoaWxkKTtcclxuICB9XHJcbiAgd2hpbGUgKGVkaXRQcm9qRGl2LmNoaWxkTm9kZXMubGVuZ3RoID4gMikge1xyXG4gICAgZWRpdFByb2pEaXYucmVtb3ZlQ2hpbGQoZWRpdFByb2pEaXYubGFzdENoaWxkKTtcclxuICB9XHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBUb0RvTGlzdC5wcm9qZWN0cy5sZW5ndGg7IGkrKykge1xyXG4gICAgbGV0IG9wdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7XHJcbiAgICBvcHQudmFsdWUgPSBUb0RvTGlzdC5wcm9qZWN0c1tpXTtcclxuICAgIG9wdC5pbm5lckhUTUwgPSBUb0RvTGlzdC5wcm9qZWN0c1tpXTtcclxuICAgIHByb2plY3RJbnB1dERpdi5hcHBlbmRDaGlsZChvcHQpO1xyXG4gIH1cclxuICBmb3IgKGxldCBqID0gMDsgaiA8IFRvRG9MaXN0LnByb2plY3RzLmxlbmd0aDsgaisrKSB7XHJcbiAgICBsZXQgb3B0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcclxuICAgIG9wdC52YWx1ZSA9IFRvRG9MaXN0LnByb2plY3RzW2pdO1xyXG4gICAgb3B0LmlubmVySFRNTCA9IFRvRG9MaXN0LnByb2plY3RzW2pdO1xyXG4gICAgZWRpdFByb2pEaXYuYXBwZW5kQ2hpbGQob3B0KTtcclxuICB9XHJcbn07XHJcblxyXG4vL1JlbW92ZXMgdGFibGUgaGVhZGVycy4gVXNlZCBmb3Igc3dpdGNoaW5nIGJldHdlZW4gdGFzayB2aWV3cyBhbmQgdmlld2luZyBwcm9qZWN0c1xyXG5jb25zdCByZW1vdmVIZWFkZXJzID0gKCkgPT4ge1xyXG4gIGxldCBoZWFkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRhc2stdGFibGVcIik7XHJcbiAgaGVhZGVyLnJlbW92ZUNoaWxkKGhlYWRlci5maXJzdENoaWxkKTtcclxufTtcclxuZXhwb3J0IHtcclxuICByZW5kZXJUb0RvcyxcclxuICByZWZyZXNoQ29udGVudCxcclxuICBzb3J0Q29udGVudCxcclxuICByZW5kZXJQcm9qZWN0c0ZvclRhc2tNZW51cyxcclxuICBjb21wbGV0ZVRhc2ssXHJcbiAgcmVtb3ZlUm93cyxcclxuICByZW1vdmVIZWFkZXJzLFxyXG59O1xyXG5cclxuLy9Vc2UgcXVlcnkgc2VsZWN0b3IgdG8gZ2V0IGFycmF5IG9mIGRpdnMgdGhhdCBoYXMgdGhlIGRhdGEgYXR0cmlidXRlIEkgd2FudCB0byByZW1vdmVcclxuIiwiaW1wb3J0IHtcclxuICByZW1vdmVIZWFkZXJzLFxyXG4gIHJlbW92ZVJvd3MsXHJcbiAgcmVuZGVyUHJvamVjdHNGb3JUYXNrTWVudXMsXHJcbn0gZnJvbSBcIi4vY29udGVudFwiO1xyXG5pbXBvcnQgeyBUb0RvTGlzdCB9IGZyb20gXCIuL2xpc3RcIjtcclxuXHJcbmNvbnN0IHByZXBhcmVEaXYgPSAoKSA9PiB7XHJcbiAgcmVtb3ZlUm93cygpO1xyXG4gIHJlbW92ZUhlYWRlcnMoKTtcclxuICByZW5kZXJQcm9qZWN0SGVhZGVycygpO1xyXG4gIHJlbmRlclByb2plY3RzKCk7XHJcbn07XHJcblxyXG5jb25zdCByZW5kZXJQcm9qZWN0SGVhZGVycyA9ICgpID0+IHtcclxuICBsZXQgdGFibGVEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRhc2stdGFibGVcIik7XHJcbiAgbGV0IHByb2plY3RIZWFkZXJzID0gW1wiUHJvamVjdCBOYW1lXCIsIFwiXCJdO1xyXG4gIGxldCBoZWFkZXJEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidHJcIik7XHJcbiAgdGFibGVEaXYucHJlcGVuZChoZWFkZXJEaXYpO1xyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgcHJvamVjdEhlYWRlcnMubGVuZ3RoOyBpKyspIHtcclxuICAgIGxldCB0aCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0aFwiKTtcclxuICAgIHRoLmlubmVySFRNTCA9IHByb2plY3RIZWFkZXJzW2ldO1xyXG4gICAgaGVhZGVyRGl2LmFwcGVuZENoaWxkKHRoKTtcclxuICB9XHJcbn07XHJcbmNvbnN0IHJlbmRlclByb2plY3RzID0gKCkgPT4ge1xyXG4gIGxldCB0YWJsZUJvZHkgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRhc2stdGFibGUtYm9keVwiKTtcclxuXHJcbiAgZm9yIChsZXQgaiA9IDE7IGogPCBUb0RvTGlzdC5wcm9qZWN0cy5sZW5ndGg7IGorKykge1xyXG4gICAgcmVuZGVyUHJvamVjdFJvdyhqKTtcclxuICB9XHJcblxyXG4gIGNvbnN0IGRlbGV0ZUJ1dHRvbnMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiZGVsLWJ0blwiKTtcclxuICBmb3IgKGxldCBrID0gMDsgayA8IGRlbGV0ZUJ1dHRvbnMubGVuZ3RoOyBrKyspIHtcclxuICAgIGRlbGV0ZUJ1dHRvbnNba10uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHJlbW92ZVByb2plY3QpO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgZWRpdEJ1dHRvbnMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiZWRpdC1idG5cIik7XHJcbiAgZm9yIChsZXQgbCA9IDA7IGwgPCBlZGl0QnV0dG9ucy5sZW5ndGg7IGwrKykge1xyXG4gICAgZWRpdEJ1dHRvbnNbbF0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGVkaXRQcm9qZWN0KTtcclxuICB9XHJcbn07XHJcblxyXG5jb25zdCByZW5kZXJQcm9qZWN0Um93ID0gKGkpID0+IHtcclxuICBsZXQgdGFibGVCb2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN0YXNrLXRhYmxlLWJvZHlcIik7XHJcbiAgbGV0IHJvdyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0clwiKTtcclxuICByb3cuc2V0QXR0cmlidXRlKFwiZGF0YS1rZXlcIiwgaSk7XHJcbiAgcm93LmlkID0gXCJ0YXNrLVwiICsgaTtcclxuICByb3cuY2xhc3NMaXN0LmFkZChcInRhc2staXRlbVwiKTtcclxuXHJcbiAgbGV0IHByb2plY3ROYW1lID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRkXCIpO1xyXG4gIHByb2plY3ROYW1lLmlubmVySFRNTCA9IFRvRG9MaXN0LnByb2plY3RzW2ldO1xyXG4gIHJvdy5hcHBlbmRDaGlsZChwcm9qZWN0TmFtZSk7XHJcblxyXG4gIGxldCBidXR0b25zID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRkXCIpO1xyXG4gIGJ1dHRvbnMuaWQgPSBpO1xyXG4gIGJ1dHRvbnMuc2V0QXR0cmlidXRlKFwiZGF0YS1rZXlcIiwgaSk7XHJcblxyXG4gIGxldCBkZWxCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xyXG4gIGJ1dHRvbnMuYXBwZW5kQ2hpbGQoZGVsQnRuKTtcclxuICBkZWxCdG4uc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcImJ1dHRvblwiKTtcclxuICBkZWxCdG4uaW5uZXJIVE1MID0gYDxpIGNsYXNzPVwiZmEtc29saWQgZmEtdHJhc2hcIj48L2k+YDtcclxuICBkZWxCdG4uY2xhc3NMaXN0LmFkZChcImRlbC1idG5cIik7XHJcbiAgZGVsQnRuLmlkID0gaTtcclxuXHJcbiAgbGV0IGVkaXRCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xyXG4gIGJ1dHRvbnMuYXBwZW5kQ2hpbGQoZWRpdEJ0bik7XHJcbiAgZWRpdEJ0bi5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwiYnV0dG9uXCIpO1xyXG4gIGVkaXRCdG4uaW5uZXJIVE1MID0gYDxpIGNsYXNzPVwiZmEtc29saWQgZmEtcGVuY2lsXCI+PC9pPmA7XHJcbiAgZWRpdEJ0bi5jbGFzc0xpc3QuYWRkKFwiZWRpdC1idG5cIik7XHJcbiAgZWRpdEJ0bi5pZCA9IGk7XHJcblxyXG4gIHJvdy5hcHBlbmRDaGlsZChidXR0b25zKTtcclxuXHJcbiAgdGFibGVCb2R5LmFwcGVuZENoaWxkKHJvdyk7XHJcbn07XHJcblxyXG5jb25zdCByZW1vdmVQcm9qZWN0Um93cyA9ICgpID0+IHtcclxuICBsZXQgY29udGVudERpdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdGFzay10YWJsZS1ib2R5XCIpO1xyXG4gIHdoaWxlIChjb250ZW50RGl2LmZpcnN0Q2hpbGQpIHtcclxuICAgIGNvbnRlbnREaXYucmVtb3ZlQ2hpbGQoY29udGVudERpdi5maXJzdENoaWxkKTtcclxuICB9XHJcbn07XHJcblxyXG5jb25zdCByZWZyZXNoUHJvamVjdHMgPSAoKSA9PiB7XHJcbiAgcmVtb3ZlUHJvamVjdFJvd3MoKTtcclxuICByZW5kZXJQcm9qZWN0cygpO1xyXG59O1xyXG5cclxuY29uc3QgcmVtb3ZlUHJvamVjdCA9IChlKSA9PiB7XHJcbiAgbGV0IGlkID0gZS50YXJnZXQucGFyZW50Tm9kZS5pZDtcclxuICBjb25zb2xlLmxvZyhpZCk7XHJcbiAgbGV0IHRhcmdldCA9IFRvRG9MaXN0LnByb2plY3RzW2lkXTtcclxuICBjb25zb2xlLmxvZyh0YXJnZXQpO1xyXG4gIGxldCBmaWx0ZXJlZEFyciA9IFRvRG9MaXN0LnByb2plY3RzLmZpbHRlcigodGFzaykgPT4gdGFzayAhPSB0YXJnZXQpO1xyXG4gIFRvRG9MaXN0LnByb2plY3RzID0gZmlsdGVyZWRBcnI7XHJcbiAgcmVmcmVzaFByb2plY3RzKCk7XHJcbiAgbGV0IGtleSA9IFwicHJvamVjdC1cIiArIGlkO1xyXG4gIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGtleSk7XHJcbn07XHJcblxyXG5jb25zdCBlZGl0UHJvamVjdCA9IChlKSA9PiB7XHJcbiAgbGV0IG1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJlZGl0UHJvamVjdE1vZGFsXCIpO1xyXG4gIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbiAgY29uc29sZS5sb2cobW9kYWwpO1xyXG4gIGxldCBpZCA9IGUudGFyZ2V0LnBhcmVudE5vZGUuaWQ7XHJcbiAgY29uc29sZS5sb2coZS50YXJnZXQucGFyZW50Tm9kZSk7XHJcbiAgbGV0IG9sZFByb2plY3ROYW1lID0gVG9Eb0xpc3QucHJvamVjdHNbaWRdO1xyXG5cclxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImVkaXRQcm9qZWN0TmFtZVwiKS52YWx1ZSA9IG9sZFByb2plY3ROYW1lO1xyXG5cclxuICBsZXQgc2F2ZUNoYW5nZXNCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInN1Ym1pdC1wcm9qZWN0LWVkaXQtYnRuXCIpO1xyXG4gIHNhdmVDaGFuZ2VzQnRuLm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBUb0RvTGlzdC5wcm9qZWN0c1tpZF0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImVkaXRQcm9qZWN0TmFtZVwiKS52YWx1ZTtcclxuICAgIGxldCBuZXdQcm9qID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJlZGl0UHJvamVjdE5hbWVcIikudmFsdWU7XHJcbiAgICBmb3IgKGxldCBtID0gMDsgbSA8IFRvRG9MaXN0Lm1hc3Rlckxpc3QubGVuZ3RoOyBtKyspIHtcclxuICAgICAgaWYgKFRvRG9MaXN0Lm1hc3Rlckxpc3RbbV0ucHJvamVjdCA9PT0gb2xkUHJvamVjdE5hbWUpIHtcclxuICAgICAgICBUb0RvTGlzdC5tYXN0ZXJMaXN0W21dLnByb2plY3QgPSBuZXdQcm9qO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICByZWZyZXNoUHJvamVjdHMoKTtcclxuICAgIGxldCBrZXkgPSBcInByb2plY3QtXCIgKyBpZDtcclxuICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGtleSk7XHJcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShrZXksIFRvRG9MaXN0LnByb2plY3RzW2lkXSk7XHJcbiAgfTtcclxufTtcclxuXHJcbmV4cG9ydCB7IHByZXBhcmVEaXYsIHJlbW92ZVByb2plY3RSb3dzLCByZWZyZXNoUHJvamVjdHMgfTtcclxuIiwiaW1wb3J0IHsgVG9Eb0xpc3QgfSBmcm9tIFwiLi9saXN0XCI7XHJcbmltcG9ydCB7IFRvRG8gfSBmcm9tIFwiLi90b2RvXCI7XHJcblxyXG5jb25zdCBzdG9yZVByb2plY3RzID0gKGluZCwgaW5wdXQpID0+IHtcclxuICBsZXQga2V5ID0gXCJwcm9qZWN0LVwiICsgaW5kO1xyXG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGtleSwgaW5wdXQpO1xyXG59O1xyXG5cclxuY29uc3Qgc3RvcmVUYXNrID0gKGluZCwgaW5wdXQpID0+IHtcclxuICBsZXQga2V5ID0gXCJ0YXNrLVwiICsgaW5kO1xyXG4gIGxldCBzdHJ1bmcgPSBKU09OLnN0cmluZ2lmeShpbnB1dCk7XHJcbiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCBzdHJ1bmcpO1xyXG59O1xyXG5cclxuY29uc3QgbG9nTG9jYWwgPSAoKSA9PiB7XHJcbiAgbGV0IHRlc3QgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInRhc2stM1wiKTtcclxuICBjb25zb2xlLmxvZyh0ZXN0KTtcclxufTtcclxuXHJcbmNvbnN0IGdldFN0b3JhZ2UgPSAoKSA9PiB7XHJcbiAgT2JqZWN0LmtleXMobG9jYWxTdG9yYWdlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcclxuICAgIGNvbnNvbGUubG9nKGxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSkpO1xyXG4gICAgaWYgKGtleS5pbmNsdWRlcyhcInRhc2tcIikpIHtcclxuICAgICAgY29uc3Qgb2JqID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpKTtcclxuICAgICAgY29uc29sZS5sb2cob2JqKTtcclxuICAgICAgbGV0IHJlc3RvcmVUYXNrID0gbmV3IFRvRG8oXHJcbiAgICAgICAgb2JqLnRhc2tOYW1lLFxyXG4gICAgICAgIG9iai5kZXNjcmlwdGlvbixcclxuICAgICAgICBvYmouZHVlRGF0ZSxcclxuICAgICAgICBvYmoucHJpb3JpdHksXHJcbiAgICAgICAgb2JqLnByb2plY3RcclxuICAgICAgKTtcclxuICAgICAgVG9Eb0xpc3QubWFzdGVyTGlzdC5wdXNoKHJlc3RvcmVUYXNrKTtcclxuICAgIH1cclxuICAgIGlmIChrZXkuaW5jbHVkZXMoXCJwcm9qZWN0XCIpKSB7XHJcbiAgICAgIFRvRG9MaXN0LnByb2plY3RzLnB1c2gobG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KSk7XHJcbiAgICB9XHJcbiAgfSk7XHJcbn07XHJcbmV4cG9ydCB7IHN0b3JlUHJvamVjdHMsIHN0b3JlVGFzaywgbG9nTG9jYWwsIGdldFN0b3JhZ2UgfTtcclxuIiwiaW1wb3J0IHsgcmVuZGVyUHJvamVjdHNGb3JUYXNrTWVudXMgfSBmcm9tIFwiLi9jb250ZW50XCI7XHJcbmltcG9ydCB7IHJlZnJlc2hQcm9qZWN0cyB9IGZyb20gXCIuL3Byb2plY3RWaWV3XCI7XHJcbmltcG9ydCB7IGxvZ0xvY2FsLCBzdG9yZVByb2plY3RzIH0gZnJvbSBcIi4vc3RvcmFnZVwiO1xyXG5cclxuY29uc3QgVG9Eb0xpc3QgPSAoKCkgPT4ge1xyXG4gIGxldCBpc1NvcnRlZCA9IGZhbHNlO1xyXG4gIGxldCB2aWV3aW5nUHJvamVjdHMgPSBmYWxzZTtcclxuICBsZXQgbWFzdGVyTGlzdCA9IFtdO1xyXG4gIGxldCBsb3dQcmlvID0gW107XHJcbiAgbGV0IG1lZFByaW8gPSBbXTtcclxuICBsZXQgaGlnaFByaW8gPSBbXTtcclxuICBsZXQgcHJvamVjdHMgPSBbXCJOb25lXCJdO1xyXG4gIHJldHVybiB7XHJcbiAgICBtYXN0ZXJMaXN0LFxyXG4gICAgbG93UHJpbyxcclxuICAgIG1lZFByaW8sXHJcbiAgICBoaWdoUHJpbyxcclxuICAgIGlzU29ydGVkLFxyXG4gICAgcHJvamVjdHMsXHJcbiAgICB2aWV3aW5nUHJvamVjdHMsXHJcbiAgfTtcclxufSkoKTtcclxuXHJcbmNvbnN0IHNldFByaW9BcnJheXMgPSAoKSA9PiB7XHJcbiAgVG9Eb0xpc3QuaGlnaFByaW8gPSBUb0RvTGlzdC5tYXN0ZXJMaXN0LmZpbHRlcihcclxuICAgICh0YXNrcykgPT4gdGFza3MucHJpb3JpdHkgPT09IFwiSGlnaFwiXHJcbiAgKTtcclxuICBUb0RvTGlzdC5tZWRQcmlvID0gVG9Eb0xpc3QubWFzdGVyTGlzdC5maWx0ZXIoXHJcbiAgICAodGFza3MpID0+IHRhc2tzLnByaW9yaXR5ID09PSBcIk1lZGl1bVwiXHJcbiAgKTtcclxuICBUb0RvTGlzdC5sb3dQcmlvID0gVG9Eb0xpc3QubWFzdGVyTGlzdC5maWx0ZXIoXHJcbiAgICAodGFza3MpID0+IHRhc2tzLnByaW9yaXR5ID09PSBcIkxvd1wiXHJcbiAgKTtcclxufTtcclxuXHJcbmNvbnN0IGFkZFByb2plY3QgPSAoKSA9PiB7XHJcbiAgbGV0IHByb2pJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvamVjdE5hbWVcIikudmFsdWU7XHJcbiAgVG9Eb0xpc3QucHJvamVjdHMucHVzaChwcm9qSW5wdXQpO1xyXG4gIGxldCBpbmQgPSBUb0RvTGlzdC5wcm9qZWN0cy5pbmRleE9mKHByb2pJbnB1dCk7XHJcbiAgc3RvcmVQcm9qZWN0cyhpbmQsIHByb2pJbnB1dCk7XHJcbiAgbG9nTG9jYWwoKTtcclxuICBpZiAoVG9Eb0xpc3Qudmlld2luZ1Byb2plY3RzID09IHRydWUpIHtcclxuICAgIHJlZnJlc2hQcm9qZWN0cygpO1xyXG4gIH1cclxufTtcclxuZXhwb3J0IHsgVG9Eb0xpc3QsIHNldFByaW9BcnJheXMsIGFkZFByb2plY3QgfTtcclxuIiwiaW1wb3J0IHsgVG9Eb0xpc3QgfSBmcm9tIFwiLi9saXN0XCI7XHJcbmltcG9ydCB7IHJlZnJlc2hDb250ZW50LCBzb3J0Q29udGVudCB9IGZyb20gXCIuL2NvbnRlbnRcIjtcclxuaW1wb3J0IHsgbG9nTG9jYWwsIHN0b3JlVGFzayB9IGZyb20gXCIuL3N0b3JhZ2VcIjtcclxuXHJcbmNvbnN0IFRvRG8gPSBmdW5jdGlvbiAodGFza05hbWUsIGRlc2NyaXB0aW9uLCBkdWVEYXRlLCBwcmlvcml0eSwgcHJvamVjdCkge1xyXG4gIHRoaXMudGFza05hbWUgPSB0YXNrTmFtZTtcclxuICB0aGlzLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XHJcbiAgdGhpcy5kdWVEYXRlID0gZHVlRGF0ZTtcclxuICB0aGlzLnByaW9yaXR5ID0gcHJpb3JpdHk7XHJcbiAgdGhpcy5jb21wbGV0ZSA9IGZhbHNlO1xyXG4gIHRoaXMucHJvamVjdCA9IHByb2plY3Q7XHJcbiAgdGhpcy5pZCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDEwMDApO1xyXG59O1xyXG5cclxuY29uc3QgYWRkVG9EbyA9ICgpID0+IHtcclxuICBsZXQgdGFza05hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRhc2tOYW1lSW5wdXRcIikudmFsdWU7XHJcbiAgbGV0IHRhc2tEZXNjID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkZXNjcmlwdGlvbklucHV0XCIpLnZhbHVlO1xyXG4gIGxldCB0YXNrRGF0ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGF0ZUlucHV0XCIpLnZhbHVlO1xyXG4gIGxldCB0YXNrUHJpbyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJpb3JpdHlJbnB1dFwiKS52YWx1ZTtcclxuICBsZXQgdGFza1Byb2ogPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByb2plY3RJbnB1dFwiKS52YWx1ZTtcclxuICBsZXQgbmV3VGFzayA9IG5ldyBUb0RvKHRhc2tOYW1lLCB0YXNrRGVzYywgdGFza0RhdGUsIHRhc2tQcmlvLCB0YXNrUHJvaik7XHJcbiAgVG9Eb0xpc3QubWFzdGVyTGlzdC5wdXNoKG5ld1Rhc2spO1xyXG4gIGlmIChuZXdUYXNrLnByaW9yaXR5ID09PSBcIkxvd1wiKSB7XHJcbiAgICBUb0RvTGlzdC5sb3dQcmlvLnB1c2gobmV3VGFzayk7XHJcbiAgfVxyXG5cclxuICBpZiAobmV3VGFzay5wcmlvcml0eSA9PT0gXCJNZWRpdW1cIikge1xyXG4gICAgVG9Eb0xpc3QubWVkUHJpby5wdXNoKG5ld1Rhc2spO1xyXG4gIH1cclxuXHJcbiAgaWYgKG5ld1Rhc2sucHJpb3JpdHkgPT09IFwiSGlnaFwiKSB7XHJcbiAgICBUb0RvTGlzdC5oaWdoUHJpby5wdXNoKG5ld1Rhc2spO1xyXG4gIH1cclxuICBjb25zb2xlLmxvZyhUb0RvTGlzdC5pc1NvcnRlZCk7XHJcbiAgY29uc29sZS5sb2coVG9Eb0xpc3Qudmlld2luZ1Byb2plY3RzKTtcclxuICBpZiAoVG9Eb0xpc3Qudmlld2luZ1Byb2plY3RzID09PSBmYWxzZSkge1xyXG4gICAgaWYgKFRvRG9MaXN0LmlzU29ydGVkID09PSBmYWxzZSkge1xyXG4gICAgICByZWZyZXNoQ29udGVudCgpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgc29ydENvbnRlbnQoKTtcclxuICAgIH1cclxuICB9XHJcbiAgbGV0IGluZCA9IFRvRG9MaXN0Lm1hc3Rlckxpc3QuaW5kZXhPZihuZXdUYXNrKTtcclxuICBzdG9yZVRhc2soaW5kLCBuZXdUYXNrKTtcclxuICBsb2dMb2NhbCgpO1xyXG59O1xyXG5cclxuY29uc3QgZWRpdFRhc2sgPSAoZSkgPT4ge1xyXG4gIGxldCBtb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZWRpdE1vZGFsXCIpO1xyXG4gIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcblxyXG4gIGxldCBpZCA9IGUudGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZS5nZXRBdHRyaWJ1dGUoXCJkYXRhLWtleVwiKTtcclxuICBsZXQgaW5kZXggPSAwO1xyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgVG9Eb0xpc3QubWFzdGVyTGlzdC5sZW5ndGg7IGkrKykge1xyXG4gICAgY29uc29sZS5sb2coXCJUREwgSURcIiwgVG9Eb0xpc3QubWFzdGVyTGlzdFtpXS5pZCk7XHJcbiAgICBpZiAoaWQgPT0gVG9Eb0xpc3QubWFzdGVyTGlzdFtpXS5pZCkge1xyXG4gICAgICBpbmRleCA9IGk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjb25zb2xlLmxvZyhcImlkIFwiLCBpZCk7XHJcbiAgY29uc29sZS5sb2coXCJpbmRleCBcIiwgaW5kZXgpO1xyXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGFza05hbWVFZGl0XCIpLnZhbHVlID1cclxuICAgIFRvRG9MaXN0Lm1hc3Rlckxpc3RbaW5kZXhdLnRhc2tOYW1lO1xyXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGVzY3JpcHRpb25FZGl0XCIpLnZhbHVlID1cclxuICAgIFRvRG9MaXN0Lm1hc3Rlckxpc3RbaW5kZXhdLmRlc2NyaXB0aW9uO1xyXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGF0ZUVkaXRcIikudmFsdWUgPVxyXG4gICAgVG9Eb0xpc3QubWFzdGVyTGlzdFtpbmRleF0uZHVlRGF0ZTtcclxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByaW9yaXR5RWRpdFwiKS52YWx1ZSA9XHJcbiAgICBUb0RvTGlzdC5tYXN0ZXJMaXN0W2luZGV4XS5wcmlvcml0eTtcclxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByb2plY3RFZGl0XCIpLnZhbHVlID1cclxuICAgIFRvRG9MaXN0Lm1hc3Rlckxpc3RbaW5kZXhdLnByb2plY3Q7XHJcblxyXG4gIGxldCBzYXZlQ2hhbmdlc0J0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3VibWl0LWVkaXQtYnRuXCIpO1xyXG4gIHNhdmVDaGFuZ2VzQnRuLm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBUb0RvTGlzdC5tYXN0ZXJMaXN0W2luZGV4XS50YXNrTmFtZSA9XHJcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGFza05hbWVFZGl0XCIpLnZhbHVlO1xyXG4gICAgVG9Eb0xpc3QubWFzdGVyTGlzdFtpbmRleF0uZGVzY3JpcHRpb24gPVxyXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRlc2NyaXB0aW9uRWRpdFwiKS52YWx1ZTtcclxuICAgIFRvRG9MaXN0Lm1hc3Rlckxpc3RbaW5kZXhdLmR1ZURhdGUgPVxyXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRhdGVFZGl0XCIpLnZhbHVlO1xyXG4gICAgVG9Eb0xpc3QubWFzdGVyTGlzdFtpbmRleF0ucHJpb3JpdHkgPVxyXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByaW9yaXR5RWRpdFwiKS52YWx1ZTtcclxuICAgIFRvRG9MaXN0Lm1hc3Rlckxpc3RbaW5kZXhdLnByb2plY3QgPVxyXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByb2plY3RFZGl0XCIpLnZhbHVlO1xyXG4gICAgVG9Eb0xpc3QuaGlnaFByaW8gPSBUb0RvTGlzdC5tYXN0ZXJMaXN0LmZpbHRlcihcclxuICAgICAgKHRhc2spID0+IHRhc2sucHJpb3JpdHkgPT09IFwiSGlnaFwiXHJcbiAgICApO1xyXG4gICAgVG9Eb0xpc3QubWVkUHJpbyA9IFRvRG9MaXN0Lm1hc3Rlckxpc3QuZmlsdGVyKFxyXG4gICAgICAodGFzaykgPT4gdGFzay5wcmlvcml0eSA9PT0gXCJNZWRpdW1cIlxyXG4gICAgKTtcclxuICAgIFRvRG9MaXN0Lmxvd1ByaW8gPSBUb0RvTGlzdC5tYXN0ZXJMaXN0LmZpbHRlcihcclxuICAgICAgKHRhc2spID0+IHRhc2sucHJpb3JpdHkgPT09IFwiTG93XCJcclxuICAgICk7XHJcblxyXG4gICAgcmVmcmVzaENvbnRlbnQoKTtcclxuICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgIGxldCBrZXkgPSBcInRhc2stXCIgKyBpbmRleDtcclxuICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGtleSk7XHJcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShrZXksIEpTT04uc3RyaW5naWZ5KFRvRG9MaXN0Lm1hc3Rlckxpc3RbaW5kZXhdKSk7XHJcbiAgfTtcclxufTtcclxuXHJcbmV4cG9ydCB7IFRvRG8sIGFkZFRvRG8sIGVkaXRUYXNrIH07XHJcbiIsImltcG9ydCB7IFRvRG8gfSBmcm9tIFwiLi9tb2R1bGVzL3RvZG9cIjtcclxuaW1wb3J0IHsgc2V0UHJpb0FycmF5cywgVG9Eb0xpc3QgfSBmcm9tIFwiLi9tb2R1bGVzL2xpc3RcIjtcclxuaW1wb3J0IHsgcmVuZGVyUHJvamVjdHNGb3JUYXNrTWVudXMsIHJlbmRlclRvRG9zIH0gZnJvbSBcIi4vbW9kdWxlcy9jb250ZW50XCI7XHJcbmltcG9ydCBpbml0QnV0dG9ucyBmcm9tIFwiLi9tb2R1bGVzL2J1dHRvbnNcIjtcclxuaW1wb3J0IHsgZ2V0U3RvcmFnZSB9IGZyb20gXCIuL21vZHVsZXMvc3RvcmFnZVwiO1xyXG5cclxuLy8gY29uc29sZS5sb2coVG9Eb0xpc3QubWFzdGVyTGlzdCk7XHJcbi8vIGxldCB0ZDIgPSBuZXcgVG9EbyhcclxuLy8gICBcIlJvbGwgZm9yIFllbGFuXCIsXHJcbi8vICAgXCJQdWxsIFllbGFuIGJjIG1vbW15XCIsXHJcbi8vICAgXCI1LzEwLzIyXCIsXHJcbi8vICAgXCJNZWRpdW1cIixcclxuLy8gICBcIlB1bGxzXCJcclxuLy8gKTtcclxuLy8gVG9Eb0xpc3QubWFzdGVyTGlzdC5wdXNoKHRkMik7XHJcbi8vIGxldCB0ZDEgPSBuZXcgVG9EbyhcclxuLy8gICBcIlJvbGwgZm9yIEF5YWthXCIsXHJcbi8vICAgXCJVc2UgYWxsIG1lYW5zIG5lY2Vzc2FyeSB0byBwdWxsIEF5YWthXCIsXHJcbi8vICAgXCI0LzE5LzIyXCIsXHJcbi8vICAgXCJIaWdoXCIsXHJcbi8vICAgXCJBc2NlbnNpb25cIlxyXG4vLyApO1xyXG4vLyBUb0RvTGlzdC5tYXN0ZXJMaXN0LnB1c2godGQxKTtcclxuLy8gbGV0IHRkMyA9IG5ldyBUb0RvKFwiUm9sbCBmb3IgQXlhdG9cIiwgXCIgcHVsbCBBeWF0b1wiLCBcIjQvMTkvMjJcIiwgXCJMb3dcIiwgXCJQdWxsc1wiKTtcclxuLy8gVG9Eb0xpc3QubWFzdGVyTGlzdC5wdXNoKHRkMyk7XHJcbmdldFN0b3JhZ2UoKTtcclxuc2V0UHJpb0FycmF5cygpO1xyXG5yZW5kZXJUb0RvcyhUb0RvTGlzdC5tYXN0ZXJMaXN0KTtcclxuaW5pdEJ1dHRvbnMoKTtcclxucmVuZGVyUHJvamVjdHNGb3JUYXNrTWVudXMoKTtcclxuXHJcbi8qXHJcbk5vdGVzOlxyXG4tT24gYWRkIHRhc2sgZm9ybSBuZWVkIGEgcGxhY2UgdG8gc2VsZWN0IHdoaWNoIHByb2plY3QgdG8gYWRkIHRoZSB0byBkbyB0by4gQWxsb3cgZm9yIG11bHRpcGxlIHByb2plY3Qgc2VsZWN0aW9uIChNYXliZSBub3QpXHJcbi1OZWVkIGFuIGVkaXQgdGFzayBidXR0b24gb24gZWFjaCB0YXNrIHJvd1xyXG4tTmVlZCB0byBmaWd1cmUgb3V0IHdoZXJlIHRvIGNyZWF0ZSBuZXcgcHJvamVjdHNcclxuLVZpZXcgYWxsIHRhc2tzIG5lZWRzIHRvIGRpc3BsYXkgcHJvamVjdCBuYW1lc1xyXG5cclxuUGxhbiBvZiBhdHRhY2s6XHJcbipBZGQgYSBmZXcgZHVtbXkgdG8gZG8gb2JqZWN0cyBhbmQgZ2V0IHRoZW0gcmVuZGVyaW5nIHRvIHRoZSBkb21cclxuKlNldCB1cCB0aGUgYWRkIHRhc2sgYnV0dG9uIFxyXG4qU2V0IHVwIHRhc2sgZWRpdGluZyA8LS0gTW9kYWwgd2l0aCB0aGUgdGFza3MgZGF0YSBwcmUtZmlsbGVkIGludG8gYSBmb3JtLiBcclxuLS1OZWVkIGEgZGlzY2FyZCBjaGFuZ2UgYnV0dG9uIFxyXG4qKk5lZWQgYSBzYXZlIGNoYW5nZSBidXR0b24gXHJcbipTZXQgdXAgc29ydGluZyBcclxuLS1NYXliZSBhZGQgd2hpY2ggd2F5IHRvIGJlIHNvcnRlZD8gU3RyZWNoIGdvYWw/XHJcbipTZXQgdXAgcmV2ZXJ0aW5nIHNvcnRpbmcgPC0tIFJlIHJlbmRlciBmcm9tIG1hc3RlciBieSBjaGVja2luZyBpc1NvcnRpbmcgZm9yIGZhbHNlXHJcbi1TZXQgdXAgcHJvamVjdHNcclxuKiogQWRkIHByb2plY3QgYnV0dG9uXHJcbioqIEFkZCBwcm9qZWN0IHNlbGVjdGlvbiBvbiBhZGQgdGFzayBmb3JtXHJcbi0tIEVkaXQgUHJvamVjdHMgTW9kYWwuICg/KVxyXG4tLSBBZGQgcHJvamVjdCB2aWV3cyA8LS0gQ2FuIGRlZmluaXRlbHkgZG9cclxuLS0gUmUgcmVuZGVyIHRhYmxlIHdpdGggYSBmaWx0ZXJlZCBhcnJheSBmb3IgdGhlIHByb2plY3QgdGhleSB3YW50IHRvIHZpZXcuIFxyXG5cclxuXHJcblNvcnRpbmcgTW9kYWw6XHJcbioqRHJvcGRvd24gd2l0aCBkZWZhdWx0LCBsb3cgdG8gaGlnaCBwcmlvcml0eSwgaGlnaCB0byBsb3csIHByb2plY3QgKHdoaWNoIGp1c3QgZ3JvdXBzIHRoZSB0YXNrcyBieSBwcm9qZWN0cylcclxuKioqIFRvIGRvIHRoZSBsYXN0IG9uZSwgaXRlcmF0ZSB0aHJvdWdoIHByb2plY3RzIGFycmF5IGZpbHRlcmluZyB0aGUgbWFpbiBhcnJheSBhbmQgcmVuZGVyaW5nIHRoZSByZXN1bHRpbmcgYXJyYXkgXHJcblxyXG4qKmNoYW5nZSBzb3J0aW5nIG1vZGFsIHRvIGEgZHJvcGRvd24gdy9vdXQgbW9kYWwgKyBvbmNoYW5nZSByYXRoZXIgdGhhbiBhIHN1Ym1pdFxyXG5cclxuLS1Qcm9qZWN0cyBjb2xsYXBzaWJsZSBvbiBzaWRlYmFyIG9yIGEgZHJvcCBkb3duPyBvciBhIG1vZGFsPyBvcj8/PyBTb21ldGhpbmcgdG8gdmlldyBvbmx5IHRhc2tzIG9mIGEgcHJvamVjdC4gXHJcbioqQnV0dG9uL1JhZGlvIGZvciBtYXJraW5nIGEgdGFzayBjb21wbGV0ZSB0aGF0IGNyb3NzZXMgb3V0IHRoZSByb3dcclxuKipDaGFuZ2UgYnV0dG9ucyB0byBpY29ucyBvZiBzb21lIHNvcnQuIFBlbmNpbCBmb3IgZWRpdCwgdHJhc2hjYW4gZm9yIGRlbGV0ZVxyXG5cclxuKkNTUyBmb3IgTW9kYWxzXHJcblxyXG5cclxuXHJcbipDaGFuZ2UgdGFibGUgcmVuZGVyaW5nIHRvIGFsbCBvY2N1ciBpbiBKU1xyXG4tUHJvamVjdHMgYnV0dG9uIGluIHNpZGUgYmFyIHJlbmRlcnMgdGFibGUgd2l0aCBwcm9qZWN0IG5hbWUgKyBidXR0b25zIGZvciBlZGl0ICsgZGVsZXRlXHJcblxyXG4tU2V0IHVwIGRhdGUgcGlja2VyXHJcbi1DbGVhbiB1cCBjb25zb2xlIGxvZ3MgKyBjb2RlIG9yZ2FuaXphdGlvbiAoYWxsIGxldHMgZ3JvdXBlZCB0b2dldGhlciBhdCB0b3Agb2YgbWV0aG9kcylcclxuKi9cclxuIiwiaW1wb3J0IHsgYWRkVG9EbyB9IGZyb20gXCIuL3RvZG9cIjtcclxuaW1wb3J0IHtcclxuICByZW1vdmVIZWFkZXJzLFxyXG4gIHJlbmRlck5ld1Byb2plY3RzLFxyXG4gIHJlbmRlclByb2plY3RzRm9yVGFza01lbnVzLFxyXG4gIHJlbmRlclRvRG9zLFxyXG4gIHNvcnRDb250ZW50LFxyXG59IGZyb20gXCIuL2NvbnRlbnRcIjtcclxuaW1wb3J0IHsgYWRkUHJvamVjdCwgVG9Eb0xpc3QgfSBmcm9tIFwiLi9saXN0XCI7XHJcbmltcG9ydCB7IHByZXBhcmVEaXYsIHJlbW92ZVByb2plY3RSb3dzIH0gZnJvbSBcIi4vcHJvamVjdFZpZXdcIjtcclxuY29uc3QgaW5pdEJ1dHRvbnMgPSAoKSA9PiB7XHJcbiAgLy9WYXJpYWJsZSBzZXR0aW5nIGZvciBhbGwgdGhlIGRpZmZlcmVudCBIVE1MIGNvbXBvbmVudHNcclxuICBsZXQgdGFza01vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0YXNrTW9kYWxcIik7XHJcbiAgbGV0IHRhc2tCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm5ld1Rhc2tCdG5cIik7XHJcbiAgbGV0IGVkaXRNb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZWRpdE1vZGFsXCIpO1xyXG4gIGxldCBwcm9qZWN0TW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByb2plY3RNb2RhbFwiKTtcclxuICBsZXQgYWRkUHJvaiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibmV3UHJvamVjdFwiKTtcclxuICBsZXQgc29ydE1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzb3J0TW9kYWxcIik7XHJcbiAgbGV0IGVkaXRQcm9qTW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImVkaXRQcm9qZWN0TW9kYWxcIik7XHJcbiAgbGV0IHN1Ym1pdGJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3VibWl0LXRhc2stYnRuXCIpO1xyXG4gIGxldCBzb3J0U2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzb3J0VHlwZVwiKTtcclxuICBsZXQgYWRkUHJvakJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3VibWl0LXByb2plY3QtYnRuXCIpO1xyXG4gIGxldCBwcm9qZWN0Vmlld0J0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvamVjdC12aWV3XCIpO1xyXG4gIGxldCBhbGxUYXNrc0J1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWxsLXRhc2tzXCIpO1xyXG4gIGxldCBjb21wbGV0ZWRUYXNrQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb21wbGV0ZS10YXNrc1wiKTtcclxuICBsZXQgaW5jb21wbGV0ZVRhc2tCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImluY29tcGxldGUtdGFza3NcIik7XHJcblxyXG4gIC8vIFJlc3BlY3RpdmUgYnV0dG9ucyB3aWxsIG9wZW4gdGhlaXIgY29ycmVzcG9uZGluZyBtb2RhbHNcclxuICBhZGRQcm9qLm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBwcm9qZWN0TW9kYWwuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuICB9O1xyXG4gIHRhc2tCdXR0b24ub25jbGljayA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHRhc2tNb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG4gIH07XHJcblxyXG4gIC8vIENsaWNraW5nIG91dHNpZGUgb2YgbW9kYWxzIHdpbGwgY2xvc2UgdGhlIG1vZGFsc1xyXG4gIHdpbmRvdy5vbmNsaWNrID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICBpZiAoZXZlbnQudGFyZ2V0ID09IHRhc2tNb2RhbCkge1xyXG4gICAgICBjb25zb2xlLmxvZyhcImNsb3NlIG1vZGFsXCIpO1xyXG4gICAgICB0YXNrTW9kYWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRhc2tOYW1lSW5wdXRcIikudmFsdWUgPSBcIlwiO1xyXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRlc2NyaXB0aW9uSW5wdXRcIikudmFsdWUgPSBcIlwiO1xyXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRhdGVJbnB1dFwiKS52YWx1ZSA9IFwiXCI7XHJcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJpb3JpdHlJbnB1dFwiKS5zZWxlY3RlZEluZGV4ID0gMDtcclxuICAgIH1cclxuICAgIGlmIChldmVudC50YXJnZXQgPT0gZWRpdE1vZGFsKSB7XHJcbiAgICAgIGVkaXRNb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICB9XHJcbiAgICBpZiAoZXZlbnQudGFyZ2V0ID09IHByb2plY3RNb2RhbCkge1xyXG4gICAgICBwcm9qZWN0TW9kYWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByb2plY3ROYW1lXCIpLnZhbHVlID0gXCJcIjtcclxuICAgIH1cclxuICAgIGlmIChldmVudC50YXJnZXQgPT0gc29ydE1vZGFsKSB7XHJcbiAgICAgIHNvcnRNb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICB9XHJcbiAgICBpZiAoZXZlbnQudGFyZ2V0ID09IGVkaXRQcm9qTW9kYWwpIHtcclxuICAgICAgZWRpdFByb2pNb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgLy9GdW5jdGlvbmFsaXR5IGltcGxlbWVudGF0aW9uIGZvciB0aGUgYnV0dG9uIHRoYXQgaGFuZGxlcyBhZGRpbmcgYSB0YXNrXHJcbiAgc3VibWl0YnV0dG9uLm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBhZGRUb0RvKCk7XHJcbiAgICBsZXQgbW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRhc2tNb2RhbFwiKTtcclxuICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGFza05hbWVJbnB1dFwiKS52YWx1ZSA9IFwiXCI7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRlc2NyaXB0aW9uSW5wdXRcIikudmFsdWUgPSBcIlwiO1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkYXRlSW5wdXRcIikudmFsdWUgPSBcIlwiO1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcmlvcml0eUlucHV0XCIpLnNlbGVjdGVkSW5kZXggPSAwO1xyXG4gIH07XHJcblxyXG4gIC8vSW1wbGVtZW50YXRpb24gb2YgdGhlIG9uIGNoYW5nZSBmdW5jdGlvbiBmb3IgdGhlIHNvcnRpbmcgc2VsZWN0IGJveFxyXG4gIHNvcnRTZWxlY3Qub25jaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBjb25zb2xlLmxvZyhcImhlcmVcIik7XHJcbiAgICBsZXQgc29ydFR5cGUgPSBzb3J0U2VsZWN0LnZhbHVlO1xyXG4gICAgc29ydENvbnRlbnQoc29ydFR5cGUpO1xyXG4gIH07XHJcblxyXG4gIC8vIE9uIGNsaWNrIGZ1bmN0aW9uIGZvciBhZGRpbmcgYSBwcm9qZWN0XHJcbiAgYWRkUHJvakJ0bi5vbmNsaWNrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgYWRkUHJvamVjdCgpO1xyXG4gICAgcHJvamVjdE1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvamVjdE5hbWVcIikudmFsdWUgPSBcIlwiO1xyXG4gICAgcmVuZGVyUHJvamVjdHNGb3JUYXNrTWVudXMoKTtcclxuICB9O1xyXG5cclxuICAvL1NpZGUgYmFyIG9uIGNsaWNrIGZ1bmN0aW9ucyBmb3IgY2hhbmdpbmcgdGhlIHZpZXdzXHJcbiAgcHJvamVjdFZpZXdCdG4ub25jbGljayA9IGZ1bmN0aW9uICgpIHtcclxuICAgIFRvRG9MaXN0LnZpZXdpbmdQcm9qZWN0cyA9IHRydWU7XHJcbiAgICBwcmVwYXJlRGl2KCk7XHJcbiAgfTtcclxuXHJcbiAgYWxsVGFza3NCdXR0b24ub25jbGljayA9IGZ1bmN0aW9uICgpIHtcclxuICAgIFRvRG9MaXN0LnZpZXdpbmdQcm9qZWN0cyA9IGZhbHNlO1xyXG4gICAgcmVtb3ZlSGVhZGVycygpO1xyXG4gICAgcmVtb3ZlUHJvamVjdFJvd3MoKTtcclxuICAgIHJlbmRlclRvRG9zKFRvRG9MaXN0Lm1hc3Rlckxpc3QpO1xyXG4gIH07XHJcblxyXG4gIGNvbXBsZXRlZFRhc2tCdG4ub25jbGljayA9IGZ1bmN0aW9uICgpIHtcclxuICAgIFRvRG9MaXN0LnZpZXdpbmdQcm9qZWN0cyA9IGZhbHNlO1xyXG4gICAgcmVtb3ZlSGVhZGVycygpO1xyXG4gICAgcmVtb3ZlUHJvamVjdFJvd3MoKTtcclxuICAgIHJlbmRlclRvRG9zKFRvRG9MaXN0Lm1hc3Rlckxpc3QuZmlsdGVyKCh0YXNrKSA9PiB0YXNrLmNvbXBsZXRlID09IHRydWUpKTtcclxuICB9O1xyXG5cclxuICBpbmNvbXBsZXRlVGFza0J0bi5vbmNsaWNrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgVG9Eb0xpc3Qudmlld2luZ1Byb2plY3RzID0gZmFsc2U7XHJcbiAgICByZW1vdmVIZWFkZXJzKCk7XHJcbiAgICByZW1vdmVQcm9qZWN0Um93cygpO1xyXG4gICAgcmVuZGVyVG9Eb3MoVG9Eb0xpc3QubWFzdGVyTGlzdC5maWx0ZXIoKHRhc2spID0+IHRhc2suY29tcGxldGUgPT0gZmFsc2UpKTtcclxuICB9O1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgaW5pdEJ1dHRvbnM7XHJcbiJdLCJuYW1lcyI6WyJyZW5kZXJUb0RvcyIsImFycmF5IiwiaGVhZGVyQXJyIiwidGFza0hlYWRlciIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJoZWFkZXJEaXYiLCJjcmVhdGVFbGVtZW50IiwicHJlcGVuZCIsInMiLCJsZW5ndGgiLCJ0aCIsImlubmVySFRNTCIsImFwcGVuZENoaWxkIiwiaSIsInJlbmRlclJvdyIsImRlbEJ0bnMiLCJnZXRFbGVtZW50c0J5Q2xhc3NOYW1lIiwiaiIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVUYXNrIiwiZWRpdEJ0bnMiLCJrIiwiZWRpdFRhc2siLCJjb21wbGV0ZUJ0bnMiLCJsIiwiY29uc29sZSIsImxvZyIsImlkIiwiY29tcGxldGVUYXNrIiwidGFibGVCb2R5IiwicXVlcnlTZWxlY3RvciIsImRrIiwicm93IiwiY29tcGxldGUiLCJjbGFzc0xpc3QiLCJhZGQiLCJzZXRBdHRyaWJ1dGUiLCJ0aXRsZSIsInRhc2tOYW1lIiwiZGVzY3JpcHRpb24iLCJwcm9qZWN0IiwiZHVlRGF0ZSIsInNwbGl0RGF0ZSIsInNwbGl0IiwiZm9ybWF0dGVkRGF0ZSIsInByaW8iLCJwcmlvcml0eSIsImJ1dHRvbnMiLCJjb21wQnRuIiwiZGVsQnRuIiwiZWRpdEJ0biIsInJlbW92ZVJvd3MiLCJjb250ZW50RGl2IiwiZmlyc3RDaGlsZCIsInJlbW92ZUNoaWxkIiwiZSIsInRhcmdldCIsInBhcmVudE5vZGUiLCJnZXRBdHRyaWJ1dGUiLCJrZXkiLCJUb0RvTGlzdCIsIm1hc3Rlckxpc3QiLCJpbmRleE9mIiwiZmluZCIsInRhc2siLCJmaWx0ZXJBcnIiLCJmaWx0ZXIiLCJzZXRQcmlvQXJyYXlzIiwicmVmcmVzaENvbnRlbnQiLCJsb2NhbFN0b3JhZ2UiLCJyZW1vdmVJdGVtIiwicm93SWQiLCJyZW1vdmUiLCJyZW1vdmVIZWFkZXJzIiwic29ydENvbnRlbnQiLCJzb3J0VHlwZSIsImxvd1ByaW8iLCJtZWRQcmlvIiwiaGlnaFByaW8iLCJwcm9qZWN0cyIsInByb2pBcnIiLCJ0YXNrcyIsInJlbmRlclByb2plY3RzRm9yVGFza01lbnVzIiwicHJvamVjdElucHV0RGl2IiwiZWRpdFByb2pEaXYiLCJjaGlsZE5vZGVzIiwibGFzdENoaWxkIiwib3B0IiwidmFsdWUiLCJoZWFkZXIiLCJyZW5kZXJQcm9qZWN0cyIsInJlbmRlclByb2plY3RSb3ciLCJkZWxldGVCdXR0b25zIiwicmVtb3ZlUHJvamVjdCIsImVkaXRCdXR0b25zIiwiZWRpdFByb2plY3QiLCJwcm9qZWN0TmFtZSIsInJlbW92ZVByb2plY3RSb3dzIiwicmVmcmVzaFByb2plY3RzIiwiZmlsdGVyZWRBcnIiLCJtb2RhbCIsInN0eWxlIiwiZGlzcGxheSIsIm9sZFByb2plY3ROYW1lIiwib25jbGljayIsIm5ld1Byb2oiLCJtIiwic2V0SXRlbSIsImxvZ0xvY2FsIiwidGVzdCIsImdldEl0ZW0iLCJpc1NvcnRlZCIsInZpZXdpbmdQcm9qZWN0cyIsIlRvRG8iLCJ0aGlzIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiaW5kZXgiLCJKU09OIiwic3RyaW5naWZ5IiwiT2JqZWN0Iiwia2V5cyIsImZvckVhY2giLCJpbmNsdWRlcyIsIm9iaiIsInBhcnNlIiwicmVzdG9yZVRhc2siLCJwdXNoIiwidGFza01vZGFsIiwidGFza0J1dHRvbiIsImVkaXRNb2RhbCIsInByb2plY3RNb2RhbCIsImFkZFByb2oiLCJzb3J0TW9kYWwiLCJlZGl0UHJvak1vZGFsIiwic3VibWl0YnV0dG9uIiwic29ydFNlbGVjdCIsImFkZFByb2pCdG4iLCJwcm9qZWN0Vmlld0J0biIsImFsbFRhc2tzQnV0dG9uIiwiY29tcGxldGVkVGFza0J0biIsImluY29tcGxldGVUYXNrQnRuIiwid2luZG93IiwiZXZlbnQiLCJzZWxlY3RlZEluZGV4IiwidGFza0Rlc2MiLCJ0YXNrRGF0ZSIsInRhc2tQcmlvIiwidGFza1Byb2oiLCJuZXdUYXNrIiwiaW5kIiwiaW5wdXQiLCJzdHJ1bmciLCJzdG9yZVRhc2siLCJhZGRUb0RvIiwib25jaGFuZ2UiLCJwcm9qSW5wdXQiLCJzdG9yZVByb2plY3RzIiwiYWRkUHJvamVjdCIsInRhYmxlRGl2IiwicHJvamVjdEhlYWRlcnMiLCJyZW5kZXJQcm9qZWN0SGVhZGVycyJdLCJzb3VyY2VSb290IjoiIn0=