(()=>{"use strict";const e={masterList:[],lowPrio:[],medPrio:[],highPrio:[],isSorted:!1,projects:["None","Pulls","Ascension"]},t=()=>{e.highPrio=e.masterList.filter((e=>"High"===e.priority)),e.medPrio=e.masterList.filter((e=>"Medium"===e.priority)),e.lowPrio=e.masterList.filter((e=>"Low"===e.priority))},l=e=>{let t=["Task Name","Description","Project","Due Date","Priority",""],l=document.getElementById("task-table"),n=document.createElement("tr");l.prepend(n);for(let e=0;e<t.length;e++){let l=document.createElement("th");l.innerHTML=t[e],n.appendChild(l)}for(let t=0;t<e.length;t++)o(t,e);const s=document.getElementsByClassName("del-btn");console.log(s);for(let e=0;e<s.length;e++)console.log("here"),s[e].addEventListener("click",i);const r=document.getElementsByClassName("edit-btn");for(let e=0;e<r.length;e++)r[e].addEventListener("click",u);const a=document.getElementsByClassName("comp-btn");for(let e=0;e<a.length;e++)console.log(a[e].id),a[e].id,a[e].addEventListener("click",d)},o=(e,t)=>{let l=document.querySelector("#task-table-body"),o=t[e].id,n=document.createElement("tr");1==t[e].complete&&n.classList.add("complete"),n.setAttribute("data-key",o),n.id="task-"+o,n.classList.add("task-item");let i=document.createElement("td");i.innerHTML=t[e].taskName,n.appendChild(i);let d=document.createElement("td");d.innerHTML=t[e].description,n.appendChild(d);let s=document.createElement("td");s.innerHTML=t[e].project,n.appendChild(s);let r=document.createElement("td");r.innerHTML=t[e].dueDate,n.appendChild(r);let a=document.createElement("td");a.innerHTML=t[e].priority,n.appendChild(a);let c=document.createElement("td");c.setAttribute("data-key",o);let m=document.createElement("button"),u=document.createElement("button");c.appendChild(u),u.setAttribute("type","button"),u.innerHTML='<i class="fa-solid fa-check"></i>',u.classList.add("comp-btn"),u.id=o,c.appendChild(m),m.setAttribute("type","button"),m.innerHTML='<i class="fa-solid fa-trash"></i>',m.classList.add("del-btn");let p=document.createElement("button");c.appendChild(p),p.setAttribute("type","button"),p.innerHTML='<i class="fa-solid fa-pencil"></i>',p.classList.add("edit-btn"),n.appendChild(c),l.appendChild(n)},n=()=>{let e=document.querySelector("#task-table-body");for(;e.firstChild;)e.removeChild(e.firstChild)},i=l=>{let o=l.target.parentNode.parentNode.getAttribute("data-key");console.log("here",o);let n=e.masterList.filter((e=>e.id!=o));e.masterList=n,t(),s(),console.log(e.highPrio),console.log(e.medPrio),console.log(e.lowPrio)},d=t=>{console.log("Complete Task");let l=t.target.parentNode.parentNode.getAttribute("data-key");console.log(l);let o='[data-key="'+l+'"]',n=document.querySelector(o);console.log(n);for(let t=0;t<e.masterList.length;t++)e.masterList[t].id==l&&(!1===e.masterList[t].complete?(n.classList.add("complete"),e.masterList[t].complete=!0):!0===e.masterList[t].complete&&(n.classList.remove("complete"),e.masterList[t].complete=!1));console.log(n.classList)},s=()=>{n(),l(e.masterList)},r=t=>{if("default"===t&&(n(),l(e.masterList)),"lowToHigh"===t&&(n(),l(e.lowPrio),l(e.medPrio),l(e.highPrio)),"highToLow"===t&&(n(),l(e.highPrio),l(e.medPrio),l(e.lowPrio)),"projectSorting"===t){n();for(let t=0;t<e.projects.length;t++){let o=e.masterList.filter((l=>l.project==e.projects[t]));console.log(o),l(o.filter((e=>"High"===e.priority))),l(o.filter((e=>"Medium"===e.priority))),l(o.filter((e=>"Low"===e.priority)))}}},a=()=>{let t=document.getElementById("projectInput"),l=document.getElementById("projectEdit");for(;t.childNodes.length>2;)t.removeChild(t.lastChild);for(;l.childNodes.length>2;)l.removeChild(l.lastChild);for(let l=0;l<e.projects.length;l++){let o=document.createElement("option");o.value=e.projects[l],o.innerHTML=e.projects[l],t.appendChild(o)}for(let t=0;t<e.projects.length;t++){let o=document.createElement("option");o.value=e.projects[t],o.innerHTML=e.projects[t],l.appendChild(o)}},c=()=>{let e=document.getElementById("task-table");e.removeChild(e.firstChild)},m=function(e,t,l,o,n){this.taskName=e,this.description=t,this.dueDate=l,this.priority=o,this.complete=!1,this.project=n,this.id=Math.floor(1e3*Math.random())},u=t=>{let l=document.getElementById("editModal");l.style.display="block";let o=t.target.parentNode.parentNode.getAttribute("data-key"),n=0;for(let t=0;t<e.masterList.length;t++)console.log("TDL ID",e.masterList[t].id),o==e.masterList[t].id&&(n=t);console.log("id ",o),console.log("index ",n),document.getElementById("taskNameEdit").value=e.masterList[n].taskName,document.getElementById("descriptionEdit").value=e.masterList[n].description,document.getElementById("dateEdit").value=e.masterList[n].dueDate,document.getElementById("priorityEdit").value=e.masterList[n].priority,document.getElementById("projectEdit").value=e.masterList[n].project,document.getElementById("submit-edit-btn").onclick=function(){e.masterList[n].taskName=document.getElementById("taskNameEdit").value,e.masterList[n].description=document.getElementById("descriptionEdit").value,e.masterList[n].dueDate=document.getElementById("dateEdit").value,e.masterList[n].priority=document.getElementById("priorityEdit").value,e.masterList[n].project=document.getElementById("projectEdit").value,e.highPrio=e.masterList.filter((e=>"High"===e.priority)),e.medPrio=e.masterList.filter((e=>"Medium"===e.priority)),e.lowPrio=e.masterList.filter((e=>"Low"===e.priority)),s(),l.style.display="none"}},p=()=>{document.getElementById("task-table-body");for(let t=0;t<e.projects.length;t++)y(t);const t=document.getElementsByClassName("del-btn");for(let e=0;e<t.length;e++)t[e].addEventListener("click",h)},y=t=>{let l=document.querySelector("#task-table-body"),o=document.createElement("tr");o.setAttribute("data-key",t),o.id="task-"+t,o.classList.add("task-item");let n=document.createElement("td");n.innerHTML=e.projects[t],o.appendChild(n);let i=document.createElement("td");i.setAttribute("data-key",t);let d=document.createElement("button");i.appendChild(d),d.setAttribute("type","button"),d.innerHTML='<i class="fa-solid fa-trash"></i>',d.classList.add("del-btn"),d.id=t;let s=document.createElement("button");i.appendChild(s),s.setAttribute("type","button"),s.innerHTML='<i class="fa-solid fa-pencil"></i>',s.classList.add("edit-btn"),s.id=t,o.appendChild(i),l.appendChild(o)},g=()=>{let e=document.querySelector("#task-table-body");for(;e.firstChild;)e.removeChild(e.firstChild)},h=t=>{let l=t.target.parentNode.id;console.log(l);let o=e.projects[l];console.log(o);let n=e.projects.filter((e=>e!=o));e.projects=n,g(),p()};console.log(e.masterList);let E=new m("Roll for Yelan","Pull Yelan bc mommy","5/10/22","Medium","Pulls");e.masterList.push(E);let L=new m("Roll for Ayaka","Use all means necessary to pull Ayaka","4/19/22","High","Ascension");e.masterList.push(L);let f=new m("Roll for Ayato"," pull Ayato","4/19/22","Low","Pulls");e.masterList.push(f),t(),l(e.masterList),(()=>{let t=document.getElementById("taskModal"),o=document.getElementById("newTaskBtn"),i=document.getElementById("editModal"),d=document.getElementById("projectModal"),u=document.getElementById("newProject"),y=document.getElementById("sortModal");u.onclick=function(){d.style.display="block"},o.onclick=function(){t.style.display="block"},window.onclick=function(e){e.target==t&&(console.log("close modal"),t.style.display="none"),e.target==i&&(i.style.display="none"),e.target==d&&(d.style.display="none"),e.target==y&&(y.style.display="none")},document.getElementById("submit-task-btn").onclick=function(){(()=>{let t=document.getElementById("taskNameInput").value,l=document.getElementById("descriptionInput").value,o=document.getElementById("dateInput").value,n=document.getElementById("priorityInput").value,i=new m(t,l,o,n,"default");e.masterList.push(i),"Low"===i.priority&&e.lowPrio.push(i),"Medium"===i.priority&&e.medPrio.push(i),"High"===i.priority&&e.highPrio.push(i),console.log(e.isSorted),!1===e.isSorted?s():r()})(),document.getElementById("taskModal").style.display="none",document.getElementById("taskNameInput").value="",document.getElementById("descriptionInput").value="",document.getElementById("dateInput").value="",document.getElementById("priorityInput").selectedIndex=0},document.getElementById("submit-sort-btn").onclick=function(){let e=document.getElementById("sortType").value;r(e),document.getElementById("sortModal").style.display="none",document.getElementById("sortType").selectedIndex=0};let h=document.getElementById("sortType");h.onchange=function(){console.log("here");let e=h.value;r(e)},document.getElementById("submit-project-btn").onclick=function(){(()=>{let t=document.getElementById("projectName").value;e.projects.push(t)})(),d.style.display="none",document.getElementById("projectName").value="",a()},document.getElementById("project-view").onclick=function(){n(),c(),(()=>{let e=document.getElementById("task-table"),t=["Project Name",""],l=document.createElement("tr");e.prepend(l);for(let e=0;e<t.length;e++){let o=document.createElement("th");o.innerHTML=t[e],l.appendChild(o)}})(),p()},document.getElementById("all-tasks").onclick=function(){c(),g(),l(e.masterList)},document.getElementById("complete-tasks").onclick=function(){c(),g(),l(e.masterList.filter((e=>1==e.complete)))},document.getElementById("incomplete-tasks").onclick=function(){c(),g(),l(e.masterList.filter((e=>0==e.complete)))}})(),a()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LElBQ0FpQixJQUNBeEYsRUFBWVgsRUFBU0MsV0FBV08sUUFBUTRELEdBQTBCLEdBQWpCQSxFQUFLdkIsY0Q1RTFELEdBQ0E4QixLIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb2Rpbi10by1kby8uL3NyYy9tb2R1bGVzL2xpc3QuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10by1kby8uL3NyYy9tb2R1bGVzL2NvbnRlbnQuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10by1kby8uL3NyYy9tb2R1bGVzL3RvZG8uanMiLCJ3ZWJwYWNrOi8vb2Rpbi10by1kby8uL3NyYy9tb2R1bGVzL3Byb2plY3RWaWV3LmpzIiwid2VicGFjazovL29kaW4tdG8tZG8vLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vb2Rpbi10by1kby8uL3NyYy9tb2R1bGVzL2J1dHRvbnMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgVG9Eb0xpc3QgPSAoKCkgPT4ge1xyXG4gIGxldCBpc1NvcnRlZCA9IGZhbHNlO1xyXG4gIGxldCBtYXN0ZXJMaXN0ID0gW107XHJcbiAgbGV0IGxvd1ByaW8gPSBbXTtcclxuICBsZXQgbWVkUHJpbyA9IFtdO1xyXG4gIGxldCBoaWdoUHJpbyA9IFtdO1xyXG4gIGxldCBwcm9qZWN0cyA9IFtcIk5vbmVcIiwgXCJQdWxsc1wiLCBcIkFzY2Vuc2lvblwiXTtcclxuICByZXR1cm4geyBtYXN0ZXJMaXN0LCBsb3dQcmlvLCBtZWRQcmlvLCBoaWdoUHJpbywgaXNTb3J0ZWQsIHByb2plY3RzIH07XHJcbn0pKCk7XHJcblxyXG5jb25zdCBzZXRQcmlvQXJyYXlzID0gKCkgPT4ge1xyXG4gIFRvRG9MaXN0LmhpZ2hQcmlvID0gVG9Eb0xpc3QubWFzdGVyTGlzdC5maWx0ZXIoXHJcbiAgICAodGFza3MpID0+IHRhc2tzLnByaW9yaXR5ID09PSBcIkhpZ2hcIlxyXG4gICk7XHJcbiAgVG9Eb0xpc3QubWVkUHJpbyA9IFRvRG9MaXN0Lm1hc3Rlckxpc3QuZmlsdGVyKFxyXG4gICAgKHRhc2tzKSA9PiB0YXNrcy5wcmlvcml0eSA9PT0gXCJNZWRpdW1cIlxyXG4gICk7XHJcbiAgVG9Eb0xpc3QubG93UHJpbyA9IFRvRG9MaXN0Lm1hc3Rlckxpc3QuZmlsdGVyKFxyXG4gICAgKHRhc2tzKSA9PiB0YXNrcy5wcmlvcml0eSA9PT0gXCJMb3dcIlxyXG4gICk7XHJcbn07XHJcblxyXG5jb25zdCBhZGRQcm9qZWN0ID0gKCkgPT4ge1xyXG4gIGxldCBwcm9qSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByb2plY3ROYW1lXCIpLnZhbHVlO1xyXG4gIFRvRG9MaXN0LnByb2plY3RzLnB1c2gocHJvaklucHV0KTtcclxufTtcclxuZXhwb3J0IHsgVG9Eb0xpc3QsIHNldFByaW9BcnJheXMsIGFkZFByb2plY3QgfTtcclxuIiwiaW1wb3J0IHsgc2V0UHJpb0FycmF5cywgVG9Eb0xpc3QgfSBmcm9tIFwiLi9saXN0XCI7XHJcbmltcG9ydCB7IGVkaXRUYXNrLCBUb0RvIH0gZnJvbSBcIi4vdG9kb1wiO1xyXG5jb25zdCByZW5kZXJUb0RvcyA9IChhcnJheSkgPT4ge1xyXG4gIGxldCBoZWFkZXJBcnIgPSBbXHJcbiAgICBcIlRhc2sgTmFtZVwiLFxyXG4gICAgXCJEZXNjcmlwdGlvblwiLFxyXG4gICAgXCJQcm9qZWN0XCIsXHJcbiAgICBcIkR1ZSBEYXRlXCIsXHJcbiAgICBcIlByaW9yaXR5XCIsXHJcbiAgICBcIlwiLFxyXG4gIF07XHJcbiAgbGV0IHRhc2tIZWFkZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRhc2stdGFibGVcIik7XHJcbiAgbGV0IGhlYWRlckRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0clwiKTtcclxuICB0YXNrSGVhZGVyLnByZXBlbmQoaGVhZGVyRGl2KTtcclxuICBmb3IgKGxldCBzID0gMDsgcyA8IGhlYWRlckFyci5sZW5ndGg7IHMrKykge1xyXG4gICAgbGV0IHRoID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRoXCIpO1xyXG4gICAgdGguaW5uZXJIVE1MID0gaGVhZGVyQXJyW3NdO1xyXG4gICAgaGVhZGVyRGl2LmFwcGVuZENoaWxkKHRoKTtcclxuICB9XHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnJheS5sZW5ndGg7IGkrKykge1xyXG4gICAgcmVuZGVyUm93KGksIGFycmF5KTtcclxuICB9XHJcbiAgY29uc3QgZGVsQnRucyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJkZWwtYnRuXCIpO1xyXG4gIGNvbnNvbGUubG9nKGRlbEJ0bnMpO1xyXG4gIGZvciAobGV0IGogPSAwOyBqIDwgZGVsQnRucy5sZW5ndGg7IGorKykge1xyXG4gICAgY29uc29sZS5sb2coXCJoZXJlXCIpO1xyXG4gICAgZGVsQnRuc1tqXS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgcmVtb3ZlVGFzayk7XHJcbiAgfVxyXG5cclxuICBjb25zdCBlZGl0QnRucyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJlZGl0LWJ0blwiKTtcclxuICBmb3IgKGxldCBrID0gMDsgayA8IGVkaXRCdG5zLmxlbmd0aDsgaysrKSB7XHJcbiAgICBlZGl0QnRuc1trXS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZWRpdFRhc2spO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgY29tcGxldGVCdG5zID0gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShcImNvbXAtYnRuXCIpO1xyXG4gIGZvciAobGV0IGwgPSAwOyBsIDwgY29tcGxldGVCdG5zLmxlbmd0aDsgbCsrKSB7XHJcbiAgICBjb25zb2xlLmxvZyhjb21wbGV0ZUJ0bnNbbF0uaWQpO1xyXG4gICAgbGV0IGJ0bklkID0gY29tcGxldGVCdG5zW2xdLmlkO1xyXG4gICAgY29tcGxldGVCdG5zW2xdLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjb21wbGV0ZVRhc2spO1xyXG4gIH1cclxufTtcclxuXHJcbmNvbnN0IHJlbmRlclJvdyA9IChpLCBhcnJheSkgPT4ge1xyXG4gIGxldCB0YWJsZUJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Rhc2stdGFibGUtYm9keVwiKTtcclxuXHJcbiAgLy9EYXRhIGtleT8gPC0tIE5lZWQgdG8gYWRkIHRoZSBkYXRhIGtleSB0byBlYWNoIGRpdi5cclxuICBsZXQgZGsgPSBhcnJheVtpXS5pZDtcclxuICBsZXQgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRyXCIpO1xyXG4gIGlmIChhcnJheVtpXS5jb21wbGV0ZSA9PSB0cnVlKSB7XHJcbiAgICByb3cuY2xhc3NMaXN0LmFkZChcImNvbXBsZXRlXCIpO1xyXG4gIH1cclxuICByb3cuc2V0QXR0cmlidXRlKFwiZGF0YS1rZXlcIiwgZGspO1xyXG4gIHJvdy5pZCA9IFwidGFzay1cIiArIGRrO1xyXG4gIHJvdy5jbGFzc0xpc3QuYWRkKFwidGFzay1pdGVtXCIpO1xyXG4gIGxldCB0aXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZFwiKTtcclxuICB0aXRsZS5pbm5lckhUTUwgPSBhcnJheVtpXS50YXNrTmFtZTtcclxuICByb3cuYXBwZW5kQ2hpbGQodGl0bGUpO1xyXG5cclxuICBsZXQgZGVzY3JpcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGRcIik7XHJcbiAgZGVzY3JpcHRpb24uaW5uZXJIVE1MID0gYXJyYXlbaV0uZGVzY3JpcHRpb247XHJcbiAgcm93LmFwcGVuZENoaWxkKGRlc2NyaXB0aW9uKTtcclxuXHJcbiAgbGV0IHByb2plY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGRcIik7XHJcbiAgcHJvamVjdC5pbm5lckhUTUwgPSBhcnJheVtpXS5wcm9qZWN0O1xyXG4gIHJvdy5hcHBlbmRDaGlsZChwcm9qZWN0KTtcclxuXHJcbiAgbGV0IGR1ZURhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGRcIik7XHJcbiAgZHVlRGF0ZS5pbm5lckhUTUwgPSBhcnJheVtpXS5kdWVEYXRlO1xyXG4gIHJvdy5hcHBlbmRDaGlsZChkdWVEYXRlKTtcclxuXHJcbiAgbGV0IHByaW8gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGRcIik7XHJcbiAgcHJpby5pbm5lckhUTUwgPSBhcnJheVtpXS5wcmlvcml0eTtcclxuICByb3cuYXBwZW5kQ2hpbGQocHJpbyk7XHJcblxyXG4gIC8vTmVlZCB0byBjcmVhdGUgYnV0dG9uc1xyXG5cclxuICBsZXQgYnV0dG9ucyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZFwiKTtcclxuICBidXR0b25zLnNldEF0dHJpYnV0ZShcImRhdGEta2V5XCIsIGRrKTtcclxuICBsZXQgZGVsQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcclxuICBsZXQgY29tcEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcbiAgYnV0dG9ucy5hcHBlbmRDaGlsZChjb21wQnRuKTtcclxuICBjb21wQnRuLnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJidXR0b25cIik7XHJcbiAgY29tcEJ0bi5pbm5lckhUTUwgPSBgPGkgY2xhc3M9XCJmYS1zb2xpZCBmYS1jaGVja1wiPjwvaT5gO1xyXG4gIGNvbXBCdG4uY2xhc3NMaXN0LmFkZChcImNvbXAtYnRuXCIpO1xyXG4gIGNvbXBCdG4uaWQgPSBkaztcclxuICBidXR0b25zLmFwcGVuZENoaWxkKGRlbEJ0bik7XHJcbiAgZGVsQnRuLnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJidXR0b25cIik7XHJcbiAgZGVsQnRuLmlubmVySFRNTCA9IGA8aSBjbGFzcz1cImZhLXNvbGlkIGZhLXRyYXNoXCI+PC9pPmA7XHJcbiAgZGVsQnRuLmNsYXNzTGlzdC5hZGQoXCJkZWwtYnRuXCIpO1xyXG4gIGxldCBlZGl0QnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcclxuICBidXR0b25zLmFwcGVuZENoaWxkKGVkaXRCdG4pO1xyXG4gIGVkaXRCdG4uc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcImJ1dHRvblwiKTtcclxuICBlZGl0QnRuLmlubmVySFRNTCA9IGA8aSBjbGFzcz1cImZhLXNvbGlkIGZhLXBlbmNpbFwiPjwvaT5gO1xyXG4gIGVkaXRCdG4uY2xhc3NMaXN0LmFkZChcImVkaXQtYnRuXCIpO1xyXG4gIHJvdy5hcHBlbmRDaGlsZChidXR0b25zKTtcclxuXHJcbiAgdGFibGVCb2R5LmFwcGVuZENoaWxkKHJvdyk7XHJcbn07XHJcblxyXG5jb25zdCByZW1vdmVSb3dzID0gKCkgPT4ge1xyXG4gIGxldCBjb250ZW50RGl2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN0YXNrLXRhYmxlLWJvZHlcIik7XHJcbiAgd2hpbGUgKGNvbnRlbnREaXYuZmlyc3RDaGlsZCkge1xyXG4gICAgY29udGVudERpdi5yZW1vdmVDaGlsZChjb250ZW50RGl2LmZpcnN0Q2hpbGQpO1xyXG4gIH1cclxufTtcclxuXHJcbmNvbnN0IHJlbW92ZVRhc2sgPSAoZSkgPT4ge1xyXG4gIGxldCBpZCA9IGUudGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZS5nZXRBdHRyaWJ1dGUoXCJkYXRhLWtleVwiKTtcclxuICBjb25zb2xlLmxvZyhcImhlcmVcIiwgaWQpO1xyXG4gIGxldCBmaWx0ZXJBcnIgPSBUb0RvTGlzdC5tYXN0ZXJMaXN0LmZpbHRlcigodGFzaykgPT4gdGFzay5pZCAhPSBpZCk7XHJcbiAgVG9Eb0xpc3QubWFzdGVyTGlzdCA9IGZpbHRlckFycjtcclxuICBzZXRQcmlvQXJyYXlzKCk7XHJcbiAgcmVmcmVzaENvbnRlbnQoKTtcclxuICBjb25zb2xlLmxvZyhUb0RvTGlzdC5oaWdoUHJpbyk7XHJcbiAgY29uc29sZS5sb2coVG9Eb0xpc3QubWVkUHJpbyk7XHJcbiAgY29uc29sZS5sb2coVG9Eb0xpc3QubG93UHJpbyk7XHJcbn07XHJcblxyXG5jb25zdCBjb21wbGV0ZVRhc2sgPSAoZSkgPT4ge1xyXG4gIGNvbnNvbGUubG9nKFwiQ29tcGxldGUgVGFza1wiKTtcclxuICBsZXQgaWQgPSBlLnRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGUuZ2V0QXR0cmlidXRlKFwiZGF0YS1rZXlcIik7XHJcbiAgY29uc29sZS5sb2coaWQpO1xyXG4gIGxldCByb3dJZCA9IFwiW2RhdGEta2V5PVwiICsgYFwiYCArIGlkICsgYFwiXWA7XHJcbiAgbGV0IHJvdyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Iocm93SWQpO1xyXG4gIGNvbnNvbGUubG9nKHJvdyk7XHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBUb0RvTGlzdC5tYXN0ZXJMaXN0Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICBpZiAoVG9Eb0xpc3QubWFzdGVyTGlzdFtpXS5pZCA9PSBpZCkge1xyXG4gICAgICBpZiAoVG9Eb0xpc3QubWFzdGVyTGlzdFtpXS5jb21wbGV0ZSA9PT0gZmFsc2UpIHtcclxuICAgICAgICByb3cuY2xhc3NMaXN0LmFkZChcImNvbXBsZXRlXCIpO1xyXG4gICAgICAgIFRvRG9MaXN0Lm1hc3Rlckxpc3RbaV0uY29tcGxldGUgPSB0cnVlO1xyXG4gICAgICB9IGVsc2UgaWYgKFRvRG9MaXN0Lm1hc3Rlckxpc3RbaV0uY29tcGxldGUgPT09IHRydWUpIHtcclxuICAgICAgICByb3cuY2xhc3NMaXN0LnJlbW92ZShcImNvbXBsZXRlXCIpO1xyXG4gICAgICAgIFRvRG9MaXN0Lm1hc3Rlckxpc3RbaV0uY29tcGxldGUgPSBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuICBjb25zb2xlLmxvZyhyb3cuY2xhc3NMaXN0KTtcclxufTtcclxuXHJcbmNvbnN0IHJlZnJlc2hDb250ZW50ID0gKCkgPT4ge1xyXG4gIHJlbW92ZVJvd3MoKTtcclxuICByZW5kZXJUb0RvcyhUb0RvTGlzdC5tYXN0ZXJMaXN0KTtcclxufTtcclxuXHJcbmNvbnN0IHNvcnRDb250ZW50ID0gKHNvcnRUeXBlKSA9PiB7XHJcbiAgaWYgKHNvcnRUeXBlID09PSBcImRlZmF1bHRcIikge1xyXG4gICAgcmVtb3ZlUm93cygpO1xyXG4gICAgcmVuZGVyVG9Eb3MoVG9Eb0xpc3QubWFzdGVyTGlzdCk7XHJcbiAgfVxyXG4gIGlmIChzb3J0VHlwZSA9PT0gXCJsb3dUb0hpZ2hcIikge1xyXG4gICAgcmVtb3ZlUm93cygpO1xyXG4gICAgcmVuZGVyVG9Eb3MoVG9Eb0xpc3QubG93UHJpbyk7XHJcbiAgICByZW5kZXJUb0RvcyhUb0RvTGlzdC5tZWRQcmlvKTtcclxuICAgIHJlbmRlclRvRG9zKFRvRG9MaXN0LmhpZ2hQcmlvKTtcclxuICB9XHJcblxyXG4gIGlmIChzb3J0VHlwZSA9PT0gXCJoaWdoVG9Mb3dcIikge1xyXG4gICAgcmVtb3ZlUm93cygpO1xyXG4gICAgcmVuZGVyVG9Eb3MoVG9Eb0xpc3QuaGlnaFByaW8pO1xyXG4gICAgcmVuZGVyVG9Eb3MoVG9Eb0xpc3QubWVkUHJpbyk7XHJcbiAgICByZW5kZXJUb0RvcyhUb0RvTGlzdC5sb3dQcmlvKTtcclxuICB9XHJcblxyXG4gIGlmIChzb3J0VHlwZSA9PT0gXCJwcm9qZWN0U29ydGluZ1wiKSB7XHJcbiAgICByZW1vdmVSb3dzKCk7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IFRvRG9MaXN0LnByb2plY3RzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGxldCBwcm9qQXJyID0gVG9Eb0xpc3QubWFzdGVyTGlzdC5maWx0ZXIoXHJcbiAgICAgICAgKHRhc2tzKSA9PiB0YXNrcy5wcm9qZWN0ID09IFRvRG9MaXN0LnByb2plY3RzW2ldXHJcbiAgICAgICk7XHJcbiAgICAgIGNvbnNvbGUubG9nKHByb2pBcnIpO1xyXG4gICAgICByZW5kZXJUb0Rvcyhwcm9qQXJyLmZpbHRlcigodGFza3MpID0+IHRhc2tzLnByaW9yaXR5ID09PSBcIkhpZ2hcIikpO1xyXG4gICAgICByZW5kZXJUb0Rvcyhwcm9qQXJyLmZpbHRlcigodGFza3MpID0+IHRhc2tzLnByaW9yaXR5ID09PSBcIk1lZGl1bVwiKSk7XHJcbiAgICAgIHJlbmRlclRvRG9zKHByb2pBcnIuZmlsdGVyKCh0YXNrcykgPT4gdGFza3MucHJpb3JpdHkgPT09IFwiTG93XCIpKTtcclxuICAgIH1cclxuICB9XHJcbn07XHJcblxyXG5jb25zdCByZW5kZXJQcm9qZWN0c0ZvclRhc2tNZW51cyA9ICgpID0+IHtcclxuICBsZXQgcHJvamVjdElucHV0RGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcm9qZWN0SW5wdXRcIik7XHJcbiAgbGV0IGVkaXRQcm9qRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcm9qZWN0RWRpdFwiKTtcclxuICB3aGlsZSAocHJvamVjdElucHV0RGl2LmNoaWxkTm9kZXMubGVuZ3RoID4gMikge1xyXG4gICAgcHJvamVjdElucHV0RGl2LnJlbW92ZUNoaWxkKHByb2plY3RJbnB1dERpdi5sYXN0Q2hpbGQpO1xyXG4gIH1cclxuICB3aGlsZSAoZWRpdFByb2pEaXYuY2hpbGROb2Rlcy5sZW5ndGggPiAyKSB7XHJcbiAgICBlZGl0UHJvakRpdi5yZW1vdmVDaGlsZChlZGl0UHJvakRpdi5sYXN0Q2hpbGQpO1xyXG4gIH1cclxuICBmb3IgKGxldCBpID0gMDsgaSA8IFRvRG9MaXN0LnByb2plY3RzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICBsZXQgb3B0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcclxuICAgIG9wdC52YWx1ZSA9IFRvRG9MaXN0LnByb2plY3RzW2ldO1xyXG4gICAgb3B0LmlubmVySFRNTCA9IFRvRG9MaXN0LnByb2plY3RzW2ldO1xyXG4gICAgcHJvamVjdElucHV0RGl2LmFwcGVuZENoaWxkKG9wdCk7XHJcbiAgfVxyXG4gIGZvciAobGV0IGogPSAwOyBqIDwgVG9Eb0xpc3QucHJvamVjdHMubGVuZ3RoOyBqKyspIHtcclxuICAgIGxldCBvcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO1xyXG4gICAgb3B0LnZhbHVlID0gVG9Eb0xpc3QucHJvamVjdHNbal07XHJcbiAgICBvcHQuaW5uZXJIVE1MID0gVG9Eb0xpc3QucHJvamVjdHNbal07XHJcbiAgICBlZGl0UHJvakRpdi5hcHBlbmRDaGlsZChvcHQpO1xyXG4gIH1cclxufTtcclxuXHJcbmNvbnN0IHJlbW92ZUhlYWRlcnMgPSAoKSA9PiB7XHJcbiAgbGV0IGhlYWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGFzay10YWJsZVwiKTtcclxuICBoZWFkZXIucmVtb3ZlQ2hpbGQoaGVhZGVyLmZpcnN0Q2hpbGQpO1xyXG59O1xyXG5leHBvcnQge1xyXG4gIHJlbmRlclRvRG9zLFxyXG4gIHJlZnJlc2hDb250ZW50LFxyXG4gIHNvcnRDb250ZW50LFxyXG4gIHJlbmRlclByb2plY3RzRm9yVGFza01lbnVzLFxyXG4gIGNvbXBsZXRlVGFzayxcclxuICByZW1vdmVSb3dzLFxyXG4gIHJlbW92ZUhlYWRlcnMsXHJcbn07XHJcblxyXG4vL1VzZSBxdWVyeSBzZWxlY3RvciB0byBnZXQgYXJyYXkgb2YgZGl2cyB0aGF0IGhhcyB0aGUgZGF0YSBhdHRyaWJ1dGUgSSB3YW50IHRvIHJlbW92ZVxyXG4iLCJpbXBvcnQgeyBUb0RvTGlzdCB9IGZyb20gXCIuL2xpc3RcIjtcclxuaW1wb3J0IHsgcmVmcmVzaENvbnRlbnQsIHNvcnRDb250ZW50IH0gZnJvbSBcIi4vY29udGVudFwiO1xyXG5cclxuY29uc3QgVG9EbyA9IGZ1bmN0aW9uICh0YXNrTmFtZSwgZGVzY3JpcHRpb24sIGR1ZURhdGUsIHByaW9yaXR5LCBwcm9qZWN0KSB7XHJcbiAgdGhpcy50YXNrTmFtZSA9IHRhc2tOYW1lO1xyXG4gIHRoaXMuZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcclxuICB0aGlzLmR1ZURhdGUgPSBkdWVEYXRlO1xyXG4gIHRoaXMucHJpb3JpdHkgPSBwcmlvcml0eTtcclxuICB0aGlzLmNvbXBsZXRlID0gZmFsc2U7XHJcbiAgdGhpcy5wcm9qZWN0ID0gcHJvamVjdDtcclxuICB0aGlzLmlkID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwMCk7XHJcbn07XHJcblxyXG5jb25zdCBhZGRUb0RvID0gKCkgPT4ge1xyXG4gIGxldCB0YXNrTmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGFza05hbWVJbnB1dFwiKS52YWx1ZTtcclxuICBsZXQgdGFza0Rlc2MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRlc2NyaXB0aW9uSW5wdXRcIikudmFsdWU7XHJcbiAgbGV0IHRhc2tEYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkYXRlSW5wdXRcIikudmFsdWU7XHJcbiAgbGV0IHRhc2tQcmlvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcmlvcml0eUlucHV0XCIpLnZhbHVlO1xyXG5cclxuICBsZXQgbmV3VGFzayA9IG5ldyBUb0RvKHRhc2tOYW1lLCB0YXNrRGVzYywgdGFza0RhdGUsIHRhc2tQcmlvLCBcImRlZmF1bHRcIik7XHJcbiAgVG9Eb0xpc3QubWFzdGVyTGlzdC5wdXNoKG5ld1Rhc2spO1xyXG4gIGlmIChuZXdUYXNrLnByaW9yaXR5ID09PSBcIkxvd1wiKSB7XHJcbiAgICBUb0RvTGlzdC5sb3dQcmlvLnB1c2gobmV3VGFzayk7XHJcbiAgfVxyXG5cclxuICBpZiAobmV3VGFzay5wcmlvcml0eSA9PT0gXCJNZWRpdW1cIikge1xyXG4gICAgVG9Eb0xpc3QubWVkUHJpby5wdXNoKG5ld1Rhc2spO1xyXG4gIH1cclxuXHJcbiAgaWYgKG5ld1Rhc2sucHJpb3JpdHkgPT09IFwiSGlnaFwiKSB7XHJcbiAgICBUb0RvTGlzdC5oaWdoUHJpby5wdXNoKG5ld1Rhc2spO1xyXG4gIH1cclxuICBjb25zb2xlLmxvZyhUb0RvTGlzdC5pc1NvcnRlZCk7XHJcbiAgaWYgKFRvRG9MaXN0LmlzU29ydGVkID09PSBmYWxzZSkge1xyXG4gICAgcmVmcmVzaENvbnRlbnQoKTtcclxuICB9IGVsc2Uge1xyXG4gICAgc29ydENvbnRlbnQoKTtcclxuICB9XHJcbn07XHJcblxyXG5jb25zdCBlZGl0VGFzayA9IChlKSA9PiB7XHJcbiAgbGV0IG1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJlZGl0TW9kYWxcIik7XHJcbiAgbW9kYWwuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuXHJcbiAgbGV0IGlkID0gZS50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlLmdldEF0dHJpYnV0ZShcImRhdGEta2V5XCIpO1xyXG4gIGxldCBpbmRleCA9IDA7XHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBUb0RvTGlzdC5tYXN0ZXJMaXN0Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICBjb25zb2xlLmxvZyhcIlRETCBJRFwiLCBUb0RvTGlzdC5tYXN0ZXJMaXN0W2ldLmlkKTtcclxuICAgIGlmIChpZCA9PSBUb0RvTGlzdC5tYXN0ZXJMaXN0W2ldLmlkKSB7XHJcbiAgICAgIGluZGV4ID0gaTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNvbnNvbGUubG9nKFwiaWQgXCIsIGlkKTtcclxuICBjb25zb2xlLmxvZyhcImluZGV4IFwiLCBpbmRleCk7XHJcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0YXNrTmFtZUVkaXRcIikudmFsdWUgPVxyXG4gICAgVG9Eb0xpc3QubWFzdGVyTGlzdFtpbmRleF0udGFza05hbWU7XHJcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkZXNjcmlwdGlvbkVkaXRcIikudmFsdWUgPVxyXG4gICAgVG9Eb0xpc3QubWFzdGVyTGlzdFtpbmRleF0uZGVzY3JpcHRpb247XHJcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkYXRlRWRpdFwiKS52YWx1ZSA9XHJcbiAgICBUb0RvTGlzdC5tYXN0ZXJMaXN0W2luZGV4XS5kdWVEYXRlO1xyXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJpb3JpdHlFZGl0XCIpLnZhbHVlID1cclxuICAgIFRvRG9MaXN0Lm1hc3Rlckxpc3RbaW5kZXhdLnByaW9yaXR5O1xyXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvamVjdEVkaXRcIikudmFsdWUgPVxyXG4gICAgVG9Eb0xpc3QubWFzdGVyTGlzdFtpbmRleF0ucHJvamVjdDtcclxuXHJcbiAgbGV0IHNhdmVDaGFuZ2VzQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzdWJtaXQtZWRpdC1idG5cIik7XHJcbiAgc2F2ZUNoYW5nZXNCdG4ub25jbGljayA9IGZ1bmN0aW9uICgpIHtcclxuICAgIFRvRG9MaXN0Lm1hc3Rlckxpc3RbaW5kZXhdLnRhc2tOYW1lID1cclxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0YXNrTmFtZUVkaXRcIikudmFsdWU7XHJcbiAgICBUb0RvTGlzdC5tYXN0ZXJMaXN0W2luZGV4XS5kZXNjcmlwdGlvbiA9XHJcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGVzY3JpcHRpb25FZGl0XCIpLnZhbHVlO1xyXG4gICAgVG9Eb0xpc3QubWFzdGVyTGlzdFtpbmRleF0uZHVlRGF0ZSA9XHJcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGF0ZUVkaXRcIikudmFsdWU7XHJcbiAgICBUb0RvTGlzdC5tYXN0ZXJMaXN0W2luZGV4XS5wcmlvcml0eSA9XHJcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJpb3JpdHlFZGl0XCIpLnZhbHVlO1xyXG4gICAgVG9Eb0xpc3QubWFzdGVyTGlzdFtpbmRleF0ucHJvamVjdCA9XHJcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvamVjdEVkaXRcIikudmFsdWU7XHJcbiAgICBUb0RvTGlzdC5oaWdoUHJpbyA9IFRvRG9MaXN0Lm1hc3Rlckxpc3QuZmlsdGVyKFxyXG4gICAgICAodGFzaykgPT4gdGFzay5wcmlvcml0eSA9PT0gXCJIaWdoXCJcclxuICAgICk7XHJcbiAgICBUb0RvTGlzdC5tZWRQcmlvID0gVG9Eb0xpc3QubWFzdGVyTGlzdC5maWx0ZXIoXHJcbiAgICAgICh0YXNrKSA9PiB0YXNrLnByaW9yaXR5ID09PSBcIk1lZGl1bVwiXHJcbiAgICApO1xyXG4gICAgVG9Eb0xpc3QubG93UHJpbyA9IFRvRG9MaXN0Lm1hc3Rlckxpc3QuZmlsdGVyKFxyXG4gICAgICAodGFzaykgPT4gdGFzay5wcmlvcml0eSA9PT0gXCJMb3dcIlxyXG4gICAgKTtcclxuXHJcbiAgICByZWZyZXNoQ29udGVudCgpO1xyXG4gICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gIH07XHJcbn07XHJcblxyXG5leHBvcnQgeyBUb0RvLCBhZGRUb0RvLCBlZGl0VGFzayB9O1xyXG4vL0hvdyB0byBoYW5kbGUgcHJvamVjdHM/XHJcbi8vSGF2ZSBhbiBvdmVyYWNyY2hpbmcgYXJyYXkgdGhhdCBob2xkcyBvYmplY3RzIGFuZCBzdWJhcnJheXMgZm9yIGVhY2ggcHJvamVjdD8gPC0tIFNlZW1zIGxpa2VseVxyXG4vLyBIYXZlIGFuIG92ZXJhcmNoaW5nIGFycmF5IGFuZCBmaWx0ZXIgd2hlbiBuZWNlc3NhcnkgZm9yIHByb2plY3RzXHJcbiIsImltcG9ydCB7IHJlbW92ZUhlYWRlcnMsIHJlbW92ZVJvd3MgfSBmcm9tIFwiLi9jb250ZW50XCI7XHJcbmltcG9ydCB7IFRvRG9MaXN0IH0gZnJvbSBcIi4vbGlzdFwiO1xyXG5cclxuY29uc3QgcHJlcGFyZURpdiA9ICgpID0+IHtcclxuICByZW1vdmVSb3dzKCk7XHJcbiAgcmVtb3ZlSGVhZGVycygpO1xyXG4gIHJlbmRlclByb2plY3RIZWFkZXJzKCk7XHJcbiAgcmVuZGVyUHJvamVjdHMoKTtcclxufTtcclxuXHJcbmNvbnN0IHJlbmRlclByb2plY3RIZWFkZXJzID0gKCkgPT4ge1xyXG4gIGxldCB0YWJsZURpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGFzay10YWJsZVwiKTtcclxuICBsZXQgcHJvamVjdEhlYWRlcnMgPSBbXCJQcm9qZWN0IE5hbWVcIiwgXCJcIl07XHJcbiAgbGV0IGhlYWRlckRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0clwiKTtcclxuICB0YWJsZURpdi5wcmVwZW5kKGhlYWRlckRpdik7XHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBwcm9qZWN0SGVhZGVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgbGV0IHRoID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRoXCIpO1xyXG4gICAgdGguaW5uZXJIVE1MID0gcHJvamVjdEhlYWRlcnNbaV07XHJcbiAgICBoZWFkZXJEaXYuYXBwZW5kQ2hpbGQodGgpO1xyXG4gIH1cclxufTtcclxuY29uc3QgcmVuZGVyUHJvamVjdHMgPSAoKSA9PiB7XHJcbiAgbGV0IHRhYmxlQm9keSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGFzay10YWJsZS1ib2R5XCIpO1xyXG5cclxuICBmb3IgKGxldCBqID0gMDsgaiA8IFRvRG9MaXN0LnByb2plY3RzLmxlbmd0aDsgaisrKSB7XHJcbiAgICByZW5kZXJQcm9qZWN0Um93KGopO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgZGVsZXRlQnV0dG9ucyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJkZWwtYnRuXCIpO1xyXG4gIGZvciAobGV0IGsgPSAwOyBrIDwgZGVsZXRlQnV0dG9ucy5sZW5ndGg7IGsrKykge1xyXG4gICAgZGVsZXRlQnV0dG9uc1trXS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgcmVtb3ZlUHJvamVjdCk7XHJcbiAgfVxyXG59O1xyXG5cclxuY29uc3QgcmVuZGVyUHJvamVjdFJvdyA9IChpKSA9PiB7XHJcbiAgbGV0IHRhYmxlQm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdGFzay10YWJsZS1ib2R5XCIpO1xyXG4gIGxldCByb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidHJcIik7XHJcbiAgcm93LnNldEF0dHJpYnV0ZShcImRhdGEta2V5XCIsIGkpO1xyXG4gIHJvdy5pZCA9IFwidGFzay1cIiArIGk7XHJcbiAgcm93LmNsYXNzTGlzdC5hZGQoXCJ0YXNrLWl0ZW1cIik7XHJcblxyXG4gIGxldCBwcm9qZWN0TmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZFwiKTtcclxuICBwcm9qZWN0TmFtZS5pbm5lckhUTUwgPSBUb0RvTGlzdC5wcm9qZWN0c1tpXTtcclxuICByb3cuYXBwZW5kQ2hpbGQocHJvamVjdE5hbWUpO1xyXG5cclxuICBsZXQgYnV0dG9ucyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0ZFwiKTtcclxuICBidXR0b25zLnNldEF0dHJpYnV0ZShcImRhdGEta2V5XCIsIGkpO1xyXG5cclxuICBsZXQgZGVsQnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcclxuICBidXR0b25zLmFwcGVuZENoaWxkKGRlbEJ0bik7XHJcbiAgZGVsQnRuLnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJidXR0b25cIik7XHJcbiAgZGVsQnRuLmlubmVySFRNTCA9IGA8aSBjbGFzcz1cImZhLXNvbGlkIGZhLXRyYXNoXCI+PC9pPmA7XHJcbiAgZGVsQnRuLmNsYXNzTGlzdC5hZGQoXCJkZWwtYnRuXCIpO1xyXG4gIGRlbEJ0bi5pZCA9IGk7XHJcblxyXG4gIGxldCBlZGl0QnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcclxuICBidXR0b25zLmFwcGVuZENoaWxkKGVkaXRCdG4pO1xyXG4gIGVkaXRCdG4uc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcImJ1dHRvblwiKTtcclxuICBlZGl0QnRuLmlubmVySFRNTCA9IGA8aSBjbGFzcz1cImZhLXNvbGlkIGZhLXBlbmNpbFwiPjwvaT5gO1xyXG4gIGVkaXRCdG4uY2xhc3NMaXN0LmFkZChcImVkaXQtYnRuXCIpO1xyXG4gIGVkaXRCdG4uaWQgPSBpO1xyXG4gIHJvdy5hcHBlbmRDaGlsZChidXR0b25zKTtcclxuXHJcbiAgdGFibGVCb2R5LmFwcGVuZENoaWxkKHJvdyk7XHJcbn07XHJcblxyXG5jb25zdCByZW1vdmVQcm9qZWN0Um93cyA9ICgpID0+IHtcclxuICBsZXQgY29udGVudERpdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdGFzay10YWJsZS1ib2R5XCIpO1xyXG4gIHdoaWxlIChjb250ZW50RGl2LmZpcnN0Q2hpbGQpIHtcclxuICAgIGNvbnRlbnREaXYucmVtb3ZlQ2hpbGQoY29udGVudERpdi5maXJzdENoaWxkKTtcclxuICB9XHJcbn07XHJcblxyXG5jb25zdCByZWZyZXNoUHJvamVjdHMgPSAoKSA9PiB7XHJcbiAgcmVtb3ZlUHJvamVjdFJvd3MoKTtcclxuICByZW5kZXJQcm9qZWN0cygpO1xyXG59O1xyXG5cclxuY29uc3QgcmVtb3ZlUHJvamVjdCA9IChlKSA9PiB7XHJcbiAgbGV0IGlkID0gZS50YXJnZXQucGFyZW50Tm9kZS5pZDtcclxuICBjb25zb2xlLmxvZyhpZCk7XHJcbiAgbGV0IHRhcmdldCA9IFRvRG9MaXN0LnByb2plY3RzW2lkXTtcclxuICBjb25zb2xlLmxvZyh0YXJnZXQpO1xyXG4gIGxldCBmaWx0ZXJlZEFyciA9IFRvRG9MaXN0LnByb2plY3RzLmZpbHRlcigodGFzaykgPT4gdGFzayAhPSB0YXJnZXQpO1xyXG4gIFRvRG9MaXN0LnByb2plY3RzID0gZmlsdGVyZWRBcnI7XHJcbiAgcmVmcmVzaFByb2plY3RzKCk7XHJcbn07XHJcblxyXG5leHBvcnQgeyBwcmVwYXJlRGl2LCByZW1vdmVQcm9qZWN0Um93cyB9O1xyXG4iLCJpbXBvcnQgeyBUb0RvIH0gZnJvbSBcIi4vbW9kdWxlcy90b2RvXCI7XHJcbmltcG9ydCB7IHNldFByaW9BcnJheXMsIFRvRG9MaXN0IH0gZnJvbSBcIi4vbW9kdWxlcy9saXN0XCI7XHJcbmltcG9ydCB7IHJlbmRlclByb2plY3RzRm9yVGFza01lbnVzLCByZW5kZXJUb0RvcyB9IGZyb20gXCIuL21vZHVsZXMvY29udGVudFwiO1xyXG5pbXBvcnQgaW5pdEJ1dHRvbnMgZnJvbSBcIi4vbW9kdWxlcy9idXR0b25zXCI7XHJcblxyXG5jb25zb2xlLmxvZyhUb0RvTGlzdC5tYXN0ZXJMaXN0KTtcclxubGV0IHRkMiA9IG5ldyBUb0RvKFxyXG4gIFwiUm9sbCBmb3IgWWVsYW5cIixcclxuICBcIlB1bGwgWWVsYW4gYmMgbW9tbXlcIixcclxuICBcIjUvMTAvMjJcIixcclxuICBcIk1lZGl1bVwiLFxyXG4gIFwiUHVsbHNcIlxyXG4pO1xyXG5Ub0RvTGlzdC5tYXN0ZXJMaXN0LnB1c2godGQyKTtcclxubGV0IHRkMSA9IG5ldyBUb0RvKFxyXG4gIFwiUm9sbCBmb3IgQXlha2FcIixcclxuICBcIlVzZSBhbGwgbWVhbnMgbmVjZXNzYXJ5IHRvIHB1bGwgQXlha2FcIixcclxuICBcIjQvMTkvMjJcIixcclxuICBcIkhpZ2hcIixcclxuICBcIkFzY2Vuc2lvblwiXHJcbik7XHJcblRvRG9MaXN0Lm1hc3Rlckxpc3QucHVzaCh0ZDEpO1xyXG5sZXQgdGQzID0gbmV3IFRvRG8oXCJSb2xsIGZvciBBeWF0b1wiLCBcIiBwdWxsIEF5YXRvXCIsIFwiNC8xOS8yMlwiLCBcIkxvd1wiLCBcIlB1bGxzXCIpO1xyXG5Ub0RvTGlzdC5tYXN0ZXJMaXN0LnB1c2godGQzKTtcclxuc2V0UHJpb0FycmF5cygpO1xyXG5yZW5kZXJUb0RvcyhUb0RvTGlzdC5tYXN0ZXJMaXN0KTtcclxuaW5pdEJ1dHRvbnMoKTtcclxucmVuZGVyUHJvamVjdHNGb3JUYXNrTWVudXMoKTtcclxuXHJcbi8qXHJcbk5vdGVzOlxyXG4tT24gYWRkIHRhc2sgZm9ybSBuZWVkIGEgcGxhY2UgdG8gc2VsZWN0IHdoaWNoIHByb2plY3QgdG8gYWRkIHRoZSB0byBkbyB0by4gQWxsb3cgZm9yIG11bHRpcGxlIHByb2plY3Qgc2VsZWN0aW9uIChNYXliZSBub3QpXHJcbi1OZWVkIGFuIGVkaXQgdGFzayBidXR0b24gb24gZWFjaCB0YXNrIHJvd1xyXG4tTmVlZCB0byBmaWd1cmUgb3V0IHdoZXJlIHRvIGNyZWF0ZSBuZXcgcHJvamVjdHNcclxuLVZpZXcgYWxsIHRhc2tzIG5lZWRzIHRvIGRpc3BsYXkgcHJvamVjdCBuYW1lc1xyXG5cclxuUGxhbiBvZiBhdHRhY2s6XHJcbipBZGQgYSBmZXcgZHVtbXkgdG8gZG8gb2JqZWN0cyBhbmQgZ2V0IHRoZW0gcmVuZGVyaW5nIHRvIHRoZSBkb21cclxuKlNldCB1cCB0aGUgYWRkIHRhc2sgYnV0dG9uIFxyXG4qU2V0IHVwIHRhc2sgZWRpdGluZyA8LS0gTW9kYWwgd2l0aCB0aGUgdGFza3MgZGF0YSBwcmUtZmlsbGVkIGludG8gYSBmb3JtLiBcclxuLS1OZWVkIGEgZGlzY2FyZCBjaGFuZ2UgYnV0dG9uIFxyXG4qKk5lZWQgYSBzYXZlIGNoYW5nZSBidXR0b24gXHJcbipTZXQgdXAgc29ydGluZyBcclxuLS1NYXliZSBhZGQgd2hpY2ggd2F5IHRvIGJlIHNvcnRlZD8gU3RyZWNoIGdvYWw/XHJcbipTZXQgdXAgcmV2ZXJ0aW5nIHNvcnRpbmcgPC0tIFJlIHJlbmRlciBmcm9tIG1hc3RlciBieSBjaGVja2luZyBpc1NvcnRpbmcgZm9yIGZhbHNlXHJcbi1TZXQgdXAgcHJvamVjdHNcclxuKiogQWRkIHByb2plY3QgYnV0dG9uXHJcbioqIEFkZCBwcm9qZWN0IHNlbGVjdGlvbiBvbiBhZGQgdGFzayBmb3JtXHJcbi0tIEVkaXQgUHJvamVjdHMgTW9kYWwuICg/KVxyXG4tLSBBZGQgcHJvamVjdCB2aWV3cyA8LS0gQ2FuIGRlZmluaXRlbHkgZG9cclxuLS0gUmUgcmVuZGVyIHRhYmxlIHdpdGggYSBmaWx0ZXJlZCBhcnJheSBmb3IgdGhlIHByb2plY3QgdGhleSB3YW50IHRvIHZpZXcuIFxyXG5cclxuXHJcblNvcnRpbmcgTW9kYWw6XHJcbioqRHJvcGRvd24gd2l0aCBkZWZhdWx0LCBsb3cgdG8gaGlnaCBwcmlvcml0eSwgaGlnaCB0byBsb3csIHByb2plY3QgKHdoaWNoIGp1c3QgZ3JvdXBzIHRoZSB0YXNrcyBieSBwcm9qZWN0cylcclxuKioqIFRvIGRvIHRoZSBsYXN0IG9uZSwgaXRlcmF0ZSB0aHJvdWdoIHByb2plY3RzIGFycmF5IGZpbHRlcmluZyB0aGUgbWFpbiBhcnJheSBhbmQgcmVuZGVyaW5nIHRoZSByZXN1bHRpbmcgYXJyYXkgXHJcblxyXG4qKmNoYW5nZSBzb3J0aW5nIG1vZGFsIHRvIGEgZHJvcGRvd24gdy9vdXQgbW9kYWwgKyBvbmNoYW5nZSByYXRoZXIgdGhhbiBhIHN1Ym1pdFxyXG5cclxuLS1Qcm9qZWN0cyBjb2xsYXBzaWJsZSBvbiBzaWRlYmFyIG9yIGEgZHJvcCBkb3duPyBvciBhIG1vZGFsPyBvcj8/PyBTb21ldGhpbmcgdG8gdmlldyBvbmx5IHRhc2tzIG9mIGEgcHJvamVjdC4gXHJcbioqQnV0dG9uL1JhZGlvIGZvciBtYXJraW5nIGEgdGFzayBjb21wbGV0ZSB0aGF0IGNyb3NzZXMgb3V0IHRoZSByb3dcclxuKipDaGFuZ2UgYnV0dG9ucyB0byBpY29ucyBvZiBzb21lIHNvcnQuIFBlbmNpbCBmb3IgZWRpdCwgdHJhc2hjYW4gZm9yIGRlbGV0ZVxyXG5cclxuLUNTUyBmb3IgTW9kYWxzXHJcbi1DaGFuZ2UgTmV3IHRhc2svcHJvamVjdHMgdG8gYnV0dG9ucyBmb3Igc3R5bGlzdGljIHB1cnBvc2VzLiBTaG91bGRuJ3QgY2hhbmdlIGZ1bmN0aW9uYWxpdHlcclxuXHJcblxyXG4tQ2hhbmdlIHRhYmxlIHJlbmRlcmluZyB0byBhbGwgb2NjdXIgaW4gSlNcclxuLVByb2plY3RzIGJ1dHRvbiBpbiBzaWRlIGJhciByZW5kZXJzIHRhYmxlIHdpdGggcHJvamVjdCBuYW1lICsgYnV0dG9ucyBmb3IgZWRpdCArIGRlbGV0ZVxyXG5cclxuKi9cclxuIiwiaW1wb3J0IHsgYWRkVG9EbyB9IGZyb20gXCIuL3RvZG9cIjtcclxuaW1wb3J0IHtcclxuICByZW1vdmVIZWFkZXJzLFxyXG4gIHJlbmRlck5ld1Byb2plY3RzLFxyXG4gIHJlbmRlclByb2plY3RzRm9yVGFza01lbnVzLFxyXG4gIHJlbmRlclRvRG9zLFxyXG4gIHNvcnRDb250ZW50LFxyXG59IGZyb20gXCIuL2NvbnRlbnRcIjtcclxuaW1wb3J0IHsgYWRkUHJvamVjdCwgVG9Eb0xpc3QgfSBmcm9tIFwiLi9saXN0XCI7XHJcbmltcG9ydCB7IHByZXBhcmVEaXYsIHJlbW92ZVByb2plY3RSb3dzIH0gZnJvbSBcIi4vcHJvamVjdFZpZXdcIjtcclxuY29uc3QgaW5pdEJ1dHRvbnMgPSAoKSA9PiB7XHJcbiAgbGV0IG1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0YXNrTW9kYWxcIik7XHJcbiAgbGV0IHRhc2tCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm5ld1Rhc2tCdG5cIik7XHJcbiAgbGV0IGVkaXRNb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZWRpdE1vZGFsXCIpO1xyXG4gIGxldCBwcm9qZWN0TW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByb2plY3RNb2RhbFwiKTtcclxuICBsZXQgYWRkUHJvaiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibmV3UHJvamVjdFwiKTtcclxuICBsZXQgc29ydE1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzb3J0TW9kYWxcIik7XHJcbiAgYWRkUHJvai5vbmNsaWNrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgcHJvamVjdE1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbiAgfTtcclxuICB0YXNrQnV0dG9uLm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG4gIH07XHJcbiAgd2luZG93Lm9uY2xpY2sgPSBmdW5jdGlvbiAoZXZlbnQpIHtcclxuICAgIGlmIChldmVudC50YXJnZXQgPT0gbW9kYWwpIHtcclxuICAgICAgY29uc29sZS5sb2coXCJjbG9zZSBtb2RhbFwiKTtcclxuICAgICAgbW9kYWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgfVxyXG4gICAgaWYgKGV2ZW50LnRhcmdldCA9PSBlZGl0TW9kYWwpIHtcclxuICAgICAgZWRpdE1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgIH1cclxuICAgIGlmIChldmVudC50YXJnZXQgPT0gcHJvamVjdE1vZGFsKSB7XHJcbiAgICAgIHByb2plY3RNb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICB9XHJcbiAgICBpZiAoZXZlbnQudGFyZ2V0ID09IHNvcnRNb2RhbCkge1xyXG4gICAgICBzb3J0TW9kYWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgfVxyXG4gIH07XHJcbiAgbGV0IHN1Ym1pdGJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3VibWl0LXRhc2stYnRuXCIpO1xyXG4gIHN1Ym1pdGJ1dHRvbi5vbmNsaWNrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgYWRkVG9EbygpO1xyXG4gICAgbGV0IG1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0YXNrTW9kYWxcIik7XHJcbiAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRhc2tOYW1lSW5wdXRcIikudmFsdWUgPSBcIlwiO1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkZXNjcmlwdGlvbklucHV0XCIpLnZhbHVlID0gXCJcIjtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGF0ZUlucHV0XCIpLnZhbHVlID0gXCJcIjtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJpb3JpdHlJbnB1dFwiKS5zZWxlY3RlZEluZGV4ID0gMDtcclxuICB9O1xyXG5cclxuICAvLyBsZXQgc29ydEJ1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic29ydFRhc2tCdG5cIik7XHJcbiAgLy8gc29ydEJ1dHRvbi5vbmNsaWNrID0gZnVuY3Rpb24gKCkge1xyXG4gIC8vICAgbGV0IHNvcnRNb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic29ydE1vZGFsXCIpO1xyXG4gIC8vICAgc29ydE1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbiAgLy8gfTtcclxuXHJcbiAgbGV0IHN1Ym1pdFNvcnRCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInN1Ym1pdC1zb3J0LWJ0blwiKTtcclxuICBzdWJtaXRTb3J0QnRuLm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBsZXQgc29ydFR5cGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNvcnRUeXBlXCIpLnZhbHVlO1xyXG4gICAgc29ydENvbnRlbnQoc29ydFR5cGUpO1xyXG4gICAgbGV0IHNvcnRNb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic29ydE1vZGFsXCIpO1xyXG4gICAgc29ydE1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic29ydFR5cGVcIikuc2VsZWN0ZWRJbmRleCA9IDA7XHJcbiAgfTtcclxuXHJcbiAgbGV0IHNvcnRTZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNvcnRUeXBlXCIpO1xyXG4gIHNvcnRTZWxlY3Qub25jaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBjb25zb2xlLmxvZyhcImhlcmVcIik7XHJcbiAgICBsZXQgc29ydFR5cGUgPSBzb3J0U2VsZWN0LnZhbHVlO1xyXG4gICAgc29ydENvbnRlbnQoc29ydFR5cGUpO1xyXG4gIH07XHJcblxyXG4gIGxldCBhZGRQcm9qQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzdWJtaXQtcHJvamVjdC1idG5cIik7XHJcbiAgYWRkUHJvakJ0bi5vbmNsaWNrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgYWRkUHJvamVjdCgpO1xyXG4gICAgcHJvamVjdE1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvamVjdE5hbWVcIikudmFsdWUgPSBcIlwiO1xyXG4gICAgcmVuZGVyUHJvamVjdHNGb3JUYXNrTWVudXMoKTtcclxuICB9O1xyXG5cclxuICBsZXQgcHJvamVjdFZpZXdCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByb2plY3Qtdmlld1wiKTtcclxuICBwcm9qZWN0Vmlld0J0bi5vbmNsaWNrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgcHJlcGFyZURpdigpO1xyXG4gIH07XHJcblxyXG4gIGxldCBhbGxUYXNrc0J1dHRvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWxsLXRhc2tzXCIpO1xyXG4gIGFsbFRhc2tzQnV0dG9uLm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICByZW1vdmVIZWFkZXJzKCk7XHJcbiAgICByZW1vdmVQcm9qZWN0Um93cygpO1xyXG4gICAgcmVuZGVyVG9Eb3MoVG9Eb0xpc3QubWFzdGVyTGlzdCk7XHJcbiAgfTtcclxuXHJcbiAgbGV0IGNvbXBsZXRlZFRhc2tCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvbXBsZXRlLXRhc2tzXCIpO1xyXG4gIGNvbXBsZXRlZFRhc2tCdG4ub25jbGljayA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHJlbW92ZUhlYWRlcnMoKTtcclxuICAgIHJlbW92ZVByb2plY3RSb3dzKCk7XHJcbiAgICByZW5kZXJUb0RvcyhUb0RvTGlzdC5tYXN0ZXJMaXN0LmZpbHRlcigodGFzaykgPT4gdGFzay5jb21wbGV0ZSA9PSB0cnVlKSk7XHJcbiAgfTtcclxuXHJcbiAgbGV0IGluY29tcGxldGVUYXNrQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJpbmNvbXBsZXRlLXRhc2tzXCIpO1xyXG4gIGluY29tcGxldGVUYXNrQnRuLm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICByZW1vdmVIZWFkZXJzKCk7XHJcbiAgICByZW1vdmVQcm9qZWN0Um93cygpO1xyXG4gICAgcmVuZGVyVG9Eb3MoVG9Eb0xpc3QubWFzdGVyTGlzdC5maWx0ZXIoKHRhc2spID0+IHRhc2suY29tcGxldGUgPT0gZmFsc2UpKTtcclxuICB9O1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgaW5pdEJ1dHRvbnM7XHJcbiJdLCJuYW1lcyI6WyJUb0RvTGlzdCIsIm1hc3Rlckxpc3QiLCJsb3dQcmlvIiwibWVkUHJpbyIsImhpZ2hQcmlvIiwiaXNTb3J0ZWQiLCJwcm9qZWN0cyIsInNldFByaW9BcnJheXMiLCJmaWx0ZXIiLCJ0YXNrcyIsInByaW9yaXR5IiwicmVuZGVyVG9Eb3MiLCJhcnJheSIsImhlYWRlckFyciIsInRhc2tIZWFkZXIiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiaGVhZGVyRGl2IiwiY3JlYXRlRWxlbWVudCIsInByZXBlbmQiLCJzIiwibGVuZ3RoIiwidGgiLCJpbm5lckhUTUwiLCJhcHBlbmRDaGlsZCIsImkiLCJyZW5kZXJSb3ciLCJkZWxCdG5zIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsImNvbnNvbGUiLCJsb2ciLCJqIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZVRhc2siLCJlZGl0QnRucyIsImsiLCJlZGl0VGFzayIsImNvbXBsZXRlQnRucyIsImwiLCJpZCIsImNvbXBsZXRlVGFzayIsInRhYmxlQm9keSIsInF1ZXJ5U2VsZWN0b3IiLCJkayIsInJvdyIsImNvbXBsZXRlIiwiY2xhc3NMaXN0IiwiYWRkIiwic2V0QXR0cmlidXRlIiwidGl0bGUiLCJ0YXNrTmFtZSIsImRlc2NyaXB0aW9uIiwicHJvamVjdCIsImR1ZURhdGUiLCJwcmlvIiwiYnV0dG9ucyIsImRlbEJ0biIsImNvbXBCdG4iLCJlZGl0QnRuIiwicmVtb3ZlUm93cyIsImNvbnRlbnREaXYiLCJmaXJzdENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJlIiwidGFyZ2V0IiwicGFyZW50Tm9kZSIsImdldEF0dHJpYnV0ZSIsImZpbHRlckFyciIsInRhc2siLCJyZWZyZXNoQ29udGVudCIsInJvd0lkIiwicmVtb3ZlIiwic29ydENvbnRlbnQiLCJzb3J0VHlwZSIsInByb2pBcnIiLCJyZW5kZXJQcm9qZWN0c0ZvclRhc2tNZW51cyIsInByb2plY3RJbnB1dERpdiIsImVkaXRQcm9qRGl2IiwiY2hpbGROb2RlcyIsImxhc3RDaGlsZCIsIm9wdCIsInZhbHVlIiwicmVtb3ZlSGVhZGVycyIsImhlYWRlciIsIlRvRG8iLCJ0aGlzIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwibW9kYWwiLCJzdHlsZSIsImRpc3BsYXkiLCJpbmRleCIsIm9uY2xpY2siLCJyZW5kZXJQcm9qZWN0cyIsInJlbmRlclByb2plY3RSb3ciLCJkZWxldGVCdXR0b25zIiwicmVtb3ZlUHJvamVjdCIsInByb2plY3ROYW1lIiwicmVtb3ZlUHJvamVjdFJvd3MiLCJmaWx0ZXJlZEFyciIsInRkMiIsInB1c2giLCJ0ZDEiLCJ0ZDMiLCJ0YXNrQnV0dG9uIiwiZWRpdE1vZGFsIiwicHJvamVjdE1vZGFsIiwiYWRkUHJvaiIsInNvcnRNb2RhbCIsIndpbmRvdyIsImV2ZW50IiwidGFza0Rlc2MiLCJ0YXNrRGF0ZSIsInRhc2tQcmlvIiwibmV3VGFzayIsImFkZFRvRG8iLCJzZWxlY3RlZEluZGV4Iiwic29ydFNlbGVjdCIsIm9uY2hhbmdlIiwicHJvaklucHV0IiwiYWRkUHJvamVjdCIsInRhYmxlRGl2IiwicHJvamVjdEhlYWRlcnMiLCJyZW5kZXJQcm9qZWN0SGVhZGVycyJdLCJzb3VyY2VSb290IjoiIn0=