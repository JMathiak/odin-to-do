(()=>{"use strict";var e={d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{cF:()=>f,HR:()=>h,rs:()=>I});const n=e=>{let t=["Task Name","Description","Project","Due Date","Priority",""],n=document.getElementById("task-table"),l=document.createElement("tr");n.prepend(l);for(let e=0;e<t.length;e++){let n=document.createElement("th");n.innerHTML=t[e],l.appendChild(n)}for(let t=0;t<e.length;t++)o(t,e);const r=document.getElementsByClassName("del-btn");for(let e=0;e<r.length;e++)r[e].addEventListener("click",i);const a=document.getElementsByClassName("edit-btn");for(let e=0;e<a.length;e++)a[e].addEventListener("click",k);const s=document.getElementsByClassName("comp-btn");for(let e=0;e<s.length;e++)s[e].id,s[e].addEventListener("click",d)},o=(e,t)=>{let n=document.querySelector("#task-table-body"),o=t[e].id,l=document.createElement("tr");1==t[e].complete&&l.classList.add("complete"),l.setAttribute("data-key",o),l.id="task-"+o,l.classList.add("task-item");let i=document.createElement("td");i.innerHTML=t[e].taskName,l.appendChild(i);let d=document.createElement("td");d.innerHTML=t[e].description,l.appendChild(d);let r=document.createElement("td");r.innerHTML=t[e].project,l.appendChild(r);let a=document.createElement("td"),s=t[e].dueDate.split("-"),c=s[1]+"-"+s[2]+"-"+s[0];a.innerHTML=c,l.appendChild(a);let m=document.createElement("td");m.innerHTML=t[e].priority,l.appendChild(m);let u=document.createElement("td");u.setAttribute("data-key",o);let p=document.createElement("button");u.appendChild(p),p.setAttribute("type","button"),p.innerHTML='<i class="fa-solid fa-check"></i>',p.classList.add("comp-btn"),p.id=o;let y=document.createElement("button");u.appendChild(y),y.setAttribute("type","button"),y.innerHTML='<i class="fa-solid fa-trash"></i>',y.classList.add("del-btn");let g=document.createElement("button");u.appendChild(g),g.setAttribute("type","button"),g.innerHTML='<i class="fa-solid fa-pencil"></i>',g.classList.add("edit-btn"),l.appendChild(u),n.appendChild(l)},l=()=>{let e=document.querySelector("#task-table-body");for(;e.firstChild;)e.removeChild(e.firstChild)},i=e=>{let t=e.target.parentNode.parentNode.getAttribute("data-key"),n="task-"+L.masterList.indexOf(L.masterList.find((e=>e.id==t))),o=L.masterList.filter((e=>e.id!=t));L.masterList=o,b(),r(),localStorage.removeItem(n)},d=e=>{let t=e.target.parentNode.parentNode.getAttribute("data-key"),n='[data-key="'+t+'"]',o=document.querySelector(n);for(let e=0;e<L.masterList.length;e++)L.masterList[e].id==t&&(!1===L.masterList[e].complete?(o.classList.add("complete"),L.masterList[e].complete=!0):!0===L.masterList[e].complete&&(o.classList.remove("complete"),L.masterList[e].complete=!1))},r=()=>{l(),c(),n(L.masterList)},a=e=>{if(c(),"default"===e&&(l(),n(L.masterList)),"lowToHigh"===e&&(l(),n(L.lowPrio),n(L.medPrio),n(L.highPrio)),"highToLow"===e&&(l(),n(L.highPrio),n(L.medPrio),n(L.lowPrio)),"projectSorting"===e){l();for(let e=0;e<L.projects.length;e++){let t=L.masterList.filter((t=>t.project==L.projects[e]));n(t.filter((e=>"High"===e.priority))),n(t.filter((e=>"Medium"===e.priority))),n(t.filter((e=>"Low"===e.priority)))}}},s=()=>{let e=document.getElementById("projectInput"),t=document.getElementById("projectEdit");for(;e.childNodes.length>2;)e.removeChild(e.lastChild);for(;t.childNodes.length>2;)t.removeChild(t.lastChild);for(let t=0;t<L.projects.length;t++){let n=document.createElement("option");n.value=L.projects[t],n.innerHTML=L.projects[t],e.appendChild(n)}for(let e=0;e<L.projects.length;e++){let n=document.createElement("option");n.value=L.projects[e],n.innerHTML=L.projects[e],t.appendChild(n)}},c=()=>{let e=document.getElementById("task-table");e.removeChild(e.firstChild)},m=()=>{document.getElementById("task-table-body");for(let e=1;e<L.projects.length;e++)u(e);const e=document.getElementsByClassName("del-btn");for(let t=0;t<e.length;t++)e[t].addEventListener("click",g);const t=document.getElementsByClassName("edit-btn");for(let e=0;e<t.length;e++)t[e].addEventListener("click",E)},u=e=>{let t=document.querySelector("#task-table-body"),n=document.createElement("tr");n.setAttribute("data-key",e),n.id="task-"+e,n.classList.add("task-item");let o=document.createElement("td");o.innerHTML=L.projects[e],n.appendChild(o);let l=document.createElement("td");l.id=e,l.setAttribute("data-key",e);let i=document.createElement("button");l.appendChild(i),i.setAttribute("type","button"),i.innerHTML='<i class="fa-solid fa-trash"></i>',i.classList.add("del-btn"),i.id=e;let d=document.createElement("button");l.appendChild(d),d.setAttribute("type","button"),d.innerHTML='<i class="fa-solid fa-pencil"></i>',d.classList.add("edit-btn"),d.id=e,n.appendChild(l),t.appendChild(n)},p=()=>{let e=document.querySelector("#task-table-body");for(;e.firstChild;)e.removeChild(e.firstChild)},y=()=>{p(),m()},g=e=>{let t=e.target.parentNode.id,n=L.projects[t],o=L.projects.filter((e=>e!=n));L.projects=o,y();let l="project-"+t;localStorage.removeItem(l)},E=e=>{let t=document.getElementById("editProjectModal");t.style.display="block";let n=e.target.parentNode.id,o=L.projects[n];document.getElementById("editProjectName").value=o,document.getElementById("submit-project-edit-btn").onclick=function(){L.projects[n]=document.getElementById("editProjectName").value;let e=document.getElementById("editProjectName").value;for(let t=0;t<L.masterList.length;t++)L.masterList[t].project===o&&(L.masterList[t].project=e);t.style.display="none",y();let l="project-"+n;localStorage.removeItem(l),localStorage.setItem(l,L.projects[n])}},h=(e,t)=>{let n="project-"+e;localStorage.setItem(n,t)},I=(e,t)=>{let n="task-"+e,o=JSON.stringify(t);localStorage.setItem(n,o)},f=()=>{Object.keys(localStorage).forEach((function(e){if(e.includes("task")){const t=JSON.parse(localStorage.getItem(e));let n=new j(t.taskName,t.description,t.dueDate,t.priority,t.project);L.masterList.push(n)}e.includes("project")&&L.projects.push(localStorage.getItem(e))}))},L={masterList:[],lowPrio:[],medPrio:[],highPrio:[],isSorted:!1,projects:["None"],viewingProjects:!1},b=()=>{L.highPrio=L.masterList.filter((e=>"High"===e.priority)),L.medPrio=L.masterList.filter((e=>"Medium"===e.priority)),L.lowPrio=L.masterList.filter((e=>"Low"===e.priority))},j=function(e,t,n,o,l){this.taskName=e,this.description=t,this.dueDate=n,this.priority=o,this.complete=!1,this.project=l,this.id=Math.floor(1e3*Math.random())},k=e=>{let t=document.getElementById("editModal");t.style.display="block";let n=e.target.parentNode.parentNode.getAttribute("data-key"),o=0;for(let e=0;e<L.masterList.length;e++)n==L.masterList[e].id&&(o=e);document.getElementById("taskNameEdit").value=L.masterList[o].taskName,document.getElementById("descriptionEdit").value=L.masterList[o].description,document.getElementById("dateEdit").value=L.masterList[o].dueDate,document.getElementById("priorityEdit").value=L.masterList[o].priority,document.getElementById("projectEdit").value=L.masterList[o].project,document.getElementById("submit-edit-btn").onclick=function(){L.masterList[o].taskName=document.getElementById("taskNameEdit").value,L.masterList[o].description=document.getElementById("descriptionEdit").value,L.masterList[o].dueDate=document.getElementById("dateEdit").value,L.masterList[o].priority=document.getElementById("priorityEdit").value,L.masterList[o].project=document.getElementById("projectEdit").value,L.highPrio=L.masterList.filter((e=>"High"===e.priority)),L.medPrio=L.masterList.filter((e=>"Medium"===e.priority)),L.lowPrio=L.masterList.filter((e=>"Low"===e.priority)),r(),t.style.display="none";let e="task-"+o;localStorage.removeItem(e),localStorage.setItem(e,JSON.stringify(L.masterList[o]))}};f(),b(),n(L.masterList),(()=>{let e=document.getElementById("taskModal"),o=document.getElementById("newTaskBtn"),i=document.getElementById("editModal"),d=document.getElementById("projectModal"),u=document.getElementById("newProject"),g=document.getElementById("sortModal"),E=document.getElementById("editProjectModal"),f=document.getElementById("submit-task-btn"),b=document.getElementById("sortType"),k=document.getElementById("submit-project-btn"),B=document.getElementById("project-view"),v=document.getElementById("all-tasks"),P=document.getElementById("complete-tasks"),N=document.getElementById("incomplete-tasks");u.onclick=function(){d.style.display="block"},o.onclick=function(){e.style.display="block"},window.onclick=function(t){t.target==e&&(e.style.display="none",document.getElementById("taskNameInput").value="",document.getElementById("descriptionInput").value="",document.getElementById("dateInput").value="",document.getElementById("priorityInput").selectedIndex=0),t.target==i&&(i.style.display="none"),t.target==d&&(d.style.display="none",document.getElementById("projectName").value=""),t.target==g&&(g.style.display="none"),t.target==E&&(E.style.display="none")},f.onclick=function(){(()=>{let e=document.getElementById("taskNameInput").value,t=document.getElementById("descriptionInput").value,n=document.getElementById("dateInput").value,o=document.getElementById("priorityInput").value,l=document.getElementById("projectInput").value,i=new j(e,t,n,o,l);L.masterList.push(i),"Low"===i.priority&&L.lowPrio.push(i),"Medium"===i.priority&&L.medPrio.push(i),"High"===i.priority&&L.highPrio.push(i),!1===L.viewingProjects&&(!1===L.isSorted?r():a());let d=L.masterList.indexOf(i);I(d,i)})(),document.getElementById("taskModal").style.display="none",document.getElementById("taskNameInput").value="",document.getElementById("descriptionInput").value="",document.getElementById("dateInput").value="",document.getElementById("priorityInput").selectedIndex=0},b.onchange=function(){let e=b.value;a(e)},k.onclick=function(){(()=>{let e=document.getElementById("projectName").value;L.projects.push(e);let n=L.projects.indexOf(e);h(n,e),(0,t.logLocal)(),1==L.viewingProjects&&y()})(),d.style.display="none",document.getElementById("projectName").value="",s()},B.onclick=function(){L.viewingProjects=!0,l(),c(),(()=>{let e=document.getElementById("task-table"),t=["Project Name",""],n=document.createElement("tr");e.prepend(n);for(let e=0;e<t.length;e++){let o=document.createElement("th");o.innerHTML=t[e],n.appendChild(o)}})(),m()},v.onclick=function(){L.viewingProjects=!1,c(),p(),n(L.masterList)},P.onclick=function(){L.viewingProjects=!1,c(),p(),n(L.masterList.filter((e=>1==e.complete)))},N.onclick=function(){L.viewingProjects=!1,c(),p(),n(L.masterList.filter((e=>0==e.complete)))}})(),s()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Iiwid2VicGFjazovL29kaW4tdG8tZG8vd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL29kaW4tdG8tZG8vd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9vZGluLXRvLWRvL3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vb2Rpbi10by1kby8uL3NyYy9tb2R1bGVzL2NvbnRlbnQuanMiLCJ3ZWJwYWNrOi8vb2Rpbi10by1kby8uL3NyYy9tb2R1bGVzL3Byb2plY3RWaWV3LmpzIiwid2VicGFjazovL29kaW4tdG8tZG8vLi9zcmMvbW9kdWxlcy9zdG9yYWdlLmpzIiwid2VicGFjazovL29kaW4tdG8tZG8vLi9zcmMvbW9kdWxlcy9saXN0LmpzIiwid2VicGFjazovL29kaW4tdG8tZG8vLi9zcmMvbW9kdWxlcy90b2RvLmpzIiwid2VicGFjazovL29kaW4tdG8tZG8vLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vb2Rpbi10by1kby8uL3NyYy9tb2R1bGVzL2J1dHRvbnMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCJpbXBvcnQgeyBzZXRQcmlvQXJyYXlzLCBUb0RvTGlzdCB9IGZyb20gXCIuL2xpc3RcIjtcclxuaW1wb3J0IHsgZWRpdFRhc2ssIFRvRG8gfSBmcm9tIFwiLi90b2RvXCI7XHJcbmNvbnN0IHJlbmRlclRvRG9zID0gKGFycmF5KSA9PiB7XHJcbiAgbGV0IGhlYWRlckFyciA9IFtcclxuICAgIFwiVGFzayBOYW1lXCIsXHJcbiAgICBcIkRlc2NyaXB0aW9uXCIsXHJcbiAgICBcIlByb2plY3RcIixcclxuICAgIFwiRHVlIERhdGVcIixcclxuICAgIFwiUHJpb3JpdHlcIixcclxuICAgIFwiXCIsXHJcbiAgXTtcclxuICBsZXQgdGFza0hlYWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGFzay10YWJsZVwiKTtcclxuICBsZXQgaGVhZGVyRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRyXCIpO1xyXG4gIHRhc2tIZWFkZXIucHJlcGVuZChoZWFkZXJEaXYpO1xyXG4gIGZvciAobGV0IHMgPSAwOyBzIDwgaGVhZGVyQXJyLmxlbmd0aDsgcysrKSB7XHJcbiAgICBsZXQgdGggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGhcIik7XHJcbiAgICB0aC5pbm5lckhUTUwgPSBoZWFkZXJBcnJbc107XHJcbiAgICBoZWFkZXJEaXYuYXBwZW5kQ2hpbGQodGgpO1xyXG4gIH1cclxuICAvL0l0ZXJhdGVzIHRocm91Z2ggdGhlIGFycmF5IHBhc3NlZCB0byB0aGUgZnVuY3Rpb24gYW5kIGNhbGxzIHRoZSBmdW5jdGlvbiB0aGF0IHdpbGwgcmVuZGVyIHRoZSBvYmplY3QgYXQgdGhlIGluZGV4IG9mIHRoZSBhcnJheVxyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYXJyYXkubGVuZ3RoOyBpKyspIHtcclxuICAgIHJlbmRlclJvdyhpLCBhcnJheSk7XHJcbiAgfVxyXG4gIC8vSXRlcmF0ZXMgdGhyb3VnaCB0aGUgZGVsZXRlIC8gZWRpdCAvIGNvbXBsZXRlIGJ1dHRvbnMgaW4gZWFjaCByb3cgYW5kIGxpbmtzIHRoZW0gdG8gdGhlaXIgcmVzcGVjdGl2ZSByb3dcclxuICAvLyBhbmQgZ2l2ZXMgdGhlbSBhbiBvbiBjbGljayBmdW5jdGlvblxyXG4gIGNvbnN0IGRlbEJ0bnMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiZGVsLWJ0blwiKTtcclxuICBmb3IgKGxldCBqID0gMDsgaiA8IGRlbEJ0bnMubGVuZ3RoOyBqKyspIHtcclxuICAgIGRlbEJ0bnNbal0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHJlbW92ZVRhc2spO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgZWRpdEJ0bnMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKFwiZWRpdC1idG5cIik7XHJcbiAgZm9yIChsZXQgayA9IDA7IGsgPCBlZGl0QnRucy5sZW5ndGg7IGsrKykge1xyXG4gICAgZWRpdEJ0bnNba10uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGVkaXRUYXNrKTtcclxuICB9XHJcblxyXG4gIGNvbnN0IGNvbXBsZXRlQnRucyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJjb21wLWJ0blwiKTtcclxuICBmb3IgKGxldCBsID0gMDsgbCA8IGNvbXBsZXRlQnRucy5sZW5ndGg7IGwrKykge1xyXG4gICAgbGV0IGJ0bklkID0gY29tcGxldGVCdG5zW2xdLmlkO1xyXG4gICAgY29tcGxldGVCdG5zW2xdLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBjb21wbGV0ZVRhc2spO1xyXG4gIH1cclxufTtcclxuXHJcbmNvbnN0IHJlbmRlclJvdyA9IChpLCBhcnJheSkgPT4ge1xyXG4gIGxldCB0YWJsZUJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Rhc2stdGFibGUtYm9keVwiKTtcclxuXHJcbiAgbGV0IGRrID0gYXJyYXlbaV0uaWQ7IC8vVGhlIGRhdGEga2V5IHVzZWQgdG8gYWNjZXNzIHJvd3NcclxuICAvL0NyZWF0ZXMgdGhlIHJvdyB0YWcgYW5kIGNoZWNrcyBpZiB0aGUgbmVlZCB0byBhZGQgc3R5bGluZyBmb3IgYSBjb21wbGV0ZWQgdGFza1xyXG4gIGxldCByb3cgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidHJcIik7XHJcbiAgaWYgKGFycmF5W2ldLmNvbXBsZXRlID09IHRydWUpIHtcclxuICAgIHJvdy5jbGFzc0xpc3QuYWRkKFwiY29tcGxldGVcIik7XHJcbiAgfVxyXG4gIHJvdy5zZXRBdHRyaWJ1dGUoXCJkYXRhLWtleVwiLCBkayk7XHJcbiAgcm93LmlkID0gXCJ0YXNrLVwiICsgZGs7XHJcbiAgcm93LmNsYXNzTGlzdC5hZGQoXCJ0YXNrLWl0ZW1cIik7XHJcblxyXG4gIC8vVGhlIGZvbGxvd2luZyBjb2RlIHNlY3Rpb25zIGNyZWF0ZXMgdGhlIGRhdGEgY2VsbHMgZm9yIGVhY2ggcGFydCBvZiB0aGUgdGFzayB0byBiZSBkaXNwbGF5ZWRcclxuICBsZXQgdGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGRcIik7XHJcbiAgdGl0bGUuaW5uZXJIVE1MID0gYXJyYXlbaV0udGFza05hbWU7XHJcbiAgcm93LmFwcGVuZENoaWxkKHRpdGxlKTtcclxuXHJcbiAgbGV0IGRlc2NyaXB0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRkXCIpO1xyXG4gIGRlc2NyaXB0aW9uLmlubmVySFRNTCA9IGFycmF5W2ldLmRlc2NyaXB0aW9uO1xyXG4gIHJvdy5hcHBlbmRDaGlsZChkZXNjcmlwdGlvbik7XHJcblxyXG4gIGxldCBwcm9qZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRkXCIpO1xyXG4gIHByb2plY3QuaW5uZXJIVE1MID0gYXJyYXlbaV0ucHJvamVjdDtcclxuICByb3cuYXBwZW5kQ2hpbGQocHJvamVjdCk7XHJcblxyXG4gIGxldCBkdWVEYXRlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRkXCIpO1xyXG4gIC8vSSB3YW50ZWQgdG8gY2hhbmdlIHRoZSB3YXkgdGhlIERhdGUgd2FzIHJlbmRlcmVkIHNvIEkgc3BsaXQgdGhlIHN0cmluZyB0byBtYW5pcHVsYXRlIGhvdyBpdHMgcmVuZGVyZWRcclxuICBsZXQgc3BsaXREYXRlID0gYXJyYXlbaV0uZHVlRGF0ZS5zcGxpdChcIi1cIik7XHJcbiAgbGV0IGZvcm1hdHRlZERhdGUgPSBzcGxpdERhdGVbMV0gKyBcIi1cIiArIHNwbGl0RGF0ZVsyXSArIFwiLVwiICsgc3BsaXREYXRlWzBdO1xyXG4gIGR1ZURhdGUuaW5uZXJIVE1MID0gZm9ybWF0dGVkRGF0ZTtcclxuICByb3cuYXBwZW5kQ2hpbGQoZHVlRGF0ZSk7XHJcblxyXG4gIGxldCBwcmlvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRkXCIpO1xyXG4gIHByaW8uaW5uZXJIVE1MID0gYXJyYXlbaV0ucHJpb3JpdHk7XHJcbiAgcm93LmFwcGVuZENoaWxkKHByaW8pO1xyXG5cclxuICAvL0ZvbGxvd2luZyBjb2RlIHNlY3Rpb24gY3JlYXRlcyB0aGUgYnV0dG9uc1xyXG5cclxuICAvL0NyZWF0ZXMgdGhlIGJ1dHRvbiBjZWxsXHJcbiAgbGV0IGJ1dHRvbnMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGRcIik7XHJcbiAgYnV0dG9ucy5zZXRBdHRyaWJ1dGUoXCJkYXRhLWtleVwiLCBkayk7XHJcblxyXG4gIC8vQ3JlYXRlcyB0aGUgY29tcGxldGUgYnV0dG9uXHJcbiAgbGV0IGNvbXBCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xyXG4gIGJ1dHRvbnMuYXBwZW5kQ2hpbGQoY29tcEJ0bik7XHJcbiAgY29tcEJ0bi5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwiYnV0dG9uXCIpO1xyXG4gIGNvbXBCdG4uaW5uZXJIVE1MID0gYDxpIGNsYXNzPVwiZmEtc29saWQgZmEtY2hlY2tcIj48L2k+YDtcclxuICBjb21wQnRuLmNsYXNzTGlzdC5hZGQoXCJjb21wLWJ0blwiKTtcclxuICBjb21wQnRuLmlkID0gZGs7XHJcblxyXG4gIC8vQ3JlYXRlcyB0aGUgZGVsZXRlIGJ1dHRvblxyXG4gIGxldCBkZWxCdG4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xyXG4gIGJ1dHRvbnMuYXBwZW5kQ2hpbGQoZGVsQnRuKTtcclxuICBkZWxCdG4uc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcImJ1dHRvblwiKTtcclxuICBkZWxCdG4uaW5uZXJIVE1MID0gYDxpIGNsYXNzPVwiZmEtc29saWQgZmEtdHJhc2hcIj48L2k+YDtcclxuICBkZWxCdG4uY2xhc3NMaXN0LmFkZChcImRlbC1idG5cIik7XHJcblxyXG4gIC8vQ3JlYXRlcyB0aGUgZWRpdCBidXR0b25cclxuICBsZXQgZWRpdEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcbiAgYnV0dG9ucy5hcHBlbmRDaGlsZChlZGl0QnRuKTtcclxuICBlZGl0QnRuLnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJidXR0b25cIik7XHJcbiAgZWRpdEJ0bi5pbm5lckhUTUwgPSBgPGkgY2xhc3M9XCJmYS1zb2xpZCBmYS1wZW5jaWxcIj48L2k+YDtcclxuICBlZGl0QnRuLmNsYXNzTGlzdC5hZGQoXCJlZGl0LWJ0blwiKTtcclxuICByb3cuYXBwZW5kQ2hpbGQoYnV0dG9ucyk7XHJcblxyXG4gIHRhYmxlQm9keS5hcHBlbmRDaGlsZChyb3cpO1xyXG59O1xyXG5cclxuLy9GdW5jdGlvbiB1c2VkIHRvIGNsZWFyIHRoZSB0YWJsZSB0aGF0IGlzIGJlaW5nIGN1cnJlbnRseSBkaXNwbGF5ZWRcclxuY29uc3QgcmVtb3ZlUm93cyA9ICgpID0+IHtcclxuICBsZXQgY29udGVudERpdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdGFzay10YWJsZS1ib2R5XCIpO1xyXG4gIHdoaWxlIChjb250ZW50RGl2LmZpcnN0Q2hpbGQpIHtcclxuICAgIGNvbnRlbnREaXYucmVtb3ZlQ2hpbGQoY29udGVudERpdi5maXJzdENoaWxkKTtcclxuICB9XHJcbn07XHJcblxyXG4vL09uIGNsaWNrIGZ1bmN0aW9uIGZvciBkZWxldGUgdGFzayBidXR0b25zXHJcbmNvbnN0IHJlbW92ZVRhc2sgPSAoZSkgPT4ge1xyXG4gIC8vR2V0cyB0aGUgaWQgYnkgYWNjZXNzaW5nIHRoZSBkYXRhIGtleSBmb3IgdGhlIHJvd1xyXG4gIGxldCBpZCA9IGUudGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZS5nZXRBdHRyaWJ1dGUoXCJkYXRhLWtleVwiKTtcclxuXHJcbiAgLy9HZXRzIHRoZSBpbmRleCB1c2VkIHdpdGggbG9jYWwgc3RvcmFnZVxyXG4gIGxldCBpbmQgPSBUb0RvTGlzdC5tYXN0ZXJMaXN0LmluZGV4T2YoXHJcbiAgICBUb0RvTGlzdC5tYXN0ZXJMaXN0LmZpbmQoKHRhc2spID0+IHRhc2suaWQgPT0gaWQpXHJcbiAgKTtcclxuICBsZXQga2V5ID0gXCJ0YXNrLVwiICsgaW5kO1xyXG5cclxuICAvL0ZpbHRlcnMgdGhlIGFycmF5LCBnZXR0aW5nIHJpZCBvZiB0aGUgdGFzayB0aGF0IG1hdGNoZXMgdGhlIElEIG9mIHRoZSByb3dcclxuICBsZXQgZmlsdGVyQXJyID0gVG9Eb0xpc3QubWFzdGVyTGlzdC5maWx0ZXIoKHRhc2spID0+IHRhc2suaWQgIT0gaWQpO1xyXG4gIFRvRG9MaXN0Lm1hc3Rlckxpc3QgPSBmaWx0ZXJBcnI7XHJcbiAgc2V0UHJpb0FycmF5cygpO1xyXG4gIHJlZnJlc2hDb250ZW50KCk7XHJcblxyXG4gIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGtleSk7XHJcbn07XHJcblxyXG4vL0Z1bmN0aW9uIHVzZWQgdG8gdG9nZ2xlIGlmIGEgdGFzayBpcyBjb21wbGV0ZVxyXG5jb25zdCBjb21wbGV0ZVRhc2sgPSAoZSkgPT4ge1xyXG4gIGxldCBpZCA9IGUudGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZS5nZXRBdHRyaWJ1dGUoXCJkYXRhLWtleVwiKTtcclxuICBsZXQgcm93SWQgPSBcIltkYXRhLWtleT1cIiArIGBcImAgKyBpZCArIGBcIl1gO1xyXG4gIGxldCByb3cgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHJvd0lkKTtcclxuICAvL0l0ZXJhdGVzIHRocm91Z2ggYWxsIHRhc2tzIGFuZCBhZGRzL3JlbW92ZXMgc3R5bGluZyB1c2VkIHRvIGluZGljYXRlIGEgdGFzayBjb21wbGV0aW9uXHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBUb0RvTGlzdC5tYXN0ZXJMaXN0Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICBpZiAoVG9Eb0xpc3QubWFzdGVyTGlzdFtpXS5pZCA9PSBpZCkge1xyXG4gICAgICBpZiAoVG9Eb0xpc3QubWFzdGVyTGlzdFtpXS5jb21wbGV0ZSA9PT0gZmFsc2UpIHtcclxuICAgICAgICByb3cuY2xhc3NMaXN0LmFkZChcImNvbXBsZXRlXCIpO1xyXG4gICAgICAgIFRvRG9MaXN0Lm1hc3Rlckxpc3RbaV0uY29tcGxldGUgPSB0cnVlO1xyXG4gICAgICB9IGVsc2UgaWYgKFRvRG9MaXN0Lm1hc3Rlckxpc3RbaV0uY29tcGxldGUgPT09IHRydWUpIHtcclxuICAgICAgICByb3cuY2xhc3NMaXN0LnJlbW92ZShcImNvbXBsZXRlXCIpO1xyXG4gICAgICAgIFRvRG9MaXN0Lm1hc3Rlckxpc3RbaV0uY29tcGxldGUgPSBmYWxzZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxufTtcclxuXHJcbi8vUmVmcmVzaGVzIHRoZSB0YWJsZSB0byByZS1yZW5kZXIgdGhlIHRhYmxlLiBVc2VkIHRvIHVwZGF0ZSB0aGUgdGFibGUgd2hlbiBjaGFuZ2VzIGFyZSBtYWRlLlxyXG5jb25zdCByZWZyZXNoQ29udGVudCA9ICgpID0+IHtcclxuICByZW1vdmVSb3dzKCk7XHJcbiAgcmVtb3ZlSGVhZGVycygpO1xyXG4gIHJlbmRlclRvRG9zKFRvRG9MaXN0Lm1hc3Rlckxpc3QpO1xyXG59O1xyXG5cclxuLy9SZW5kZXJzIHRoZSB0YXNrcyBpbiBvcmRlciBvZiB0aGUgc2VsZWN0ZWQgc29ydCB0eXBlXHJcbmNvbnN0IHNvcnRDb250ZW50ID0gKHNvcnRUeXBlKSA9PiB7XHJcbiAgcmVtb3ZlSGVhZGVycygpO1xyXG4gIGlmIChzb3J0VHlwZSA9PT0gXCJkZWZhdWx0XCIpIHtcclxuICAgIHJlbW92ZVJvd3MoKTtcclxuICAgIHJlbmRlclRvRG9zKFRvRG9MaXN0Lm1hc3Rlckxpc3QpO1xyXG4gIH1cclxuXHJcbiAgLy9Tb3J0aW5nIGJ5IHByaW9yaXR5IGlzIGRvbmUgYnkgcmVuZGVyaW5nIHN1Yi1hcnJheXMgaW4gYSBjZXJ0YWluIG9yZGVyLlxyXG4gIGlmIChzb3J0VHlwZSA9PT0gXCJsb3dUb0hpZ2hcIikge1xyXG4gICAgcmVtb3ZlUm93cygpO1xyXG4gICAgcmVuZGVyVG9Eb3MoVG9Eb0xpc3QubG93UHJpbyk7XHJcbiAgICByZW5kZXJUb0RvcyhUb0RvTGlzdC5tZWRQcmlvKTtcclxuICAgIHJlbmRlclRvRG9zKFRvRG9MaXN0LmhpZ2hQcmlvKTtcclxuICB9XHJcblxyXG4gIGlmIChzb3J0VHlwZSA9PT0gXCJoaWdoVG9Mb3dcIikge1xyXG4gICAgcmVtb3ZlUm93cygpO1xyXG4gICAgcmVuZGVyVG9Eb3MoVG9Eb0xpc3QuaGlnaFByaW8pO1xyXG4gICAgcmVuZGVyVG9Eb3MoVG9Eb0xpc3QubWVkUHJpbyk7XHJcbiAgICByZW5kZXJUb0RvcyhUb0RvTGlzdC5sb3dQcmlvKTtcclxuICB9XHJcblxyXG4gIC8vSXRlcmF0ZXMgdGhyb3VnaCB0aGUgcHJvamVjdHMgYXJyYXkgYW5kIHRoZW4gdGhlIGxpc3Qgb2YgdGFza3Mgb25seSByZW5kZXJpbmcgdGhlIHRhc2tzIHdpdGggbWF0Y2hpbmcgcHJvamVjdHMuXHJcbiAgLy8gQWxsIHRhc2tzIHdpbGwgaGF2ZSBiZWVuIGl0ZXJhdGVkIGJ5IHRoZSB0aW1lIGl0ZXJhdGlvbiBpcyBkb25lXHJcbiAgaWYgKHNvcnRUeXBlID09PSBcInByb2plY3RTb3J0aW5nXCIpIHtcclxuICAgIHJlbW92ZVJvd3MoKTtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgVG9Eb0xpc3QucHJvamVjdHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgbGV0IHByb2pBcnIgPSBUb0RvTGlzdC5tYXN0ZXJMaXN0LmZpbHRlcihcclxuICAgICAgICAodGFza3MpID0+IHRhc2tzLnByb2plY3QgPT0gVG9Eb0xpc3QucHJvamVjdHNbaV1cclxuICAgICAgKTtcclxuICAgICAgcmVuZGVyVG9Eb3MocHJvakFyci5maWx0ZXIoKHRhc2tzKSA9PiB0YXNrcy5wcmlvcml0eSA9PT0gXCJIaWdoXCIpKTtcclxuICAgICAgcmVuZGVyVG9Eb3MocHJvakFyci5maWx0ZXIoKHRhc2tzKSA9PiB0YXNrcy5wcmlvcml0eSA9PT0gXCJNZWRpdW1cIikpO1xyXG4gICAgICByZW5kZXJUb0Rvcyhwcm9qQXJyLmZpbHRlcigodGFza3MpID0+IHRhc2tzLnByaW9yaXR5ID09PSBcIkxvd1wiKSk7XHJcbiAgICB9XHJcbiAgfVxyXG59O1xyXG5cclxuLy9VcGRhdGVzIHNlbGVjdCBib3hlcyB3aGVuIHByb2plY3RzIGhhdmUgYmVlbiBhZGRlZC9yZW1vdmVkLlxyXG5jb25zdCByZW5kZXJQcm9qZWN0c0ZvclRhc2tNZW51cyA9ICgpID0+IHtcclxuICBsZXQgcHJvamVjdElucHV0RGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcm9qZWN0SW5wdXRcIik7XHJcbiAgbGV0IGVkaXRQcm9qRGl2ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcm9qZWN0RWRpdFwiKTtcclxuICB3aGlsZSAocHJvamVjdElucHV0RGl2LmNoaWxkTm9kZXMubGVuZ3RoID4gMikge1xyXG4gICAgcHJvamVjdElucHV0RGl2LnJlbW92ZUNoaWxkKHByb2plY3RJbnB1dERpdi5sYXN0Q2hpbGQpO1xyXG4gIH1cclxuICB3aGlsZSAoZWRpdFByb2pEaXYuY2hpbGROb2Rlcy5sZW5ndGggPiAyKSB7XHJcbiAgICBlZGl0UHJvakRpdi5yZW1vdmVDaGlsZChlZGl0UHJvakRpdi5sYXN0Q2hpbGQpO1xyXG4gIH1cclxuICBmb3IgKGxldCBpID0gMDsgaSA8IFRvRG9MaXN0LnByb2plY3RzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICBsZXQgb3B0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtcclxuICAgIG9wdC52YWx1ZSA9IFRvRG9MaXN0LnByb2plY3RzW2ldO1xyXG4gICAgb3B0LmlubmVySFRNTCA9IFRvRG9MaXN0LnByb2plY3RzW2ldO1xyXG4gICAgcHJvamVjdElucHV0RGl2LmFwcGVuZENoaWxkKG9wdCk7XHJcbiAgfVxyXG4gIGZvciAobGV0IGogPSAwOyBqIDwgVG9Eb0xpc3QucHJvamVjdHMubGVuZ3RoOyBqKyspIHtcclxuICAgIGxldCBvcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO1xyXG4gICAgb3B0LnZhbHVlID0gVG9Eb0xpc3QucHJvamVjdHNbal07XHJcbiAgICBvcHQuaW5uZXJIVE1MID0gVG9Eb0xpc3QucHJvamVjdHNbal07XHJcbiAgICBlZGl0UHJvakRpdi5hcHBlbmRDaGlsZChvcHQpO1xyXG4gIH1cclxufTtcclxuXHJcbi8vUmVtb3ZlcyB0YWJsZSBoZWFkZXJzLiBVc2VkIGZvciBzd2l0Y2hpbmcgYmV0d2VlbiB0YXNrIHZpZXdzIGFuZCB2aWV3aW5nIHByb2plY3RzXHJcbmNvbnN0IHJlbW92ZUhlYWRlcnMgPSAoKSA9PiB7XHJcbiAgbGV0IGhlYWRlciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGFzay10YWJsZVwiKTtcclxuICBoZWFkZXIucmVtb3ZlQ2hpbGQoaGVhZGVyLmZpcnN0Q2hpbGQpO1xyXG59O1xyXG5leHBvcnQge1xyXG4gIHJlbmRlclRvRG9zLFxyXG4gIHJlZnJlc2hDb250ZW50LFxyXG4gIHNvcnRDb250ZW50LFxyXG4gIHJlbmRlclByb2plY3RzRm9yVGFza01lbnVzLFxyXG4gIGNvbXBsZXRlVGFzayxcclxuICByZW1vdmVSb3dzLFxyXG4gIHJlbW92ZUhlYWRlcnMsXHJcbn07XHJcblxyXG4vL1VzZSBxdWVyeSBzZWxlY3RvciB0byBnZXQgYXJyYXkgb2YgZGl2cyB0aGF0IGhhcyB0aGUgZGF0YSBhdHRyaWJ1dGUgSSB3YW50IHRvIHJlbW92ZVxyXG4iLCJpbXBvcnQge1xyXG4gIHJlbW92ZUhlYWRlcnMsXHJcbiAgcmVtb3ZlUm93cyxcclxuICByZW5kZXJQcm9qZWN0c0ZvclRhc2tNZW51cyxcclxufSBmcm9tIFwiLi9jb250ZW50XCI7XHJcbmltcG9ydCB7IFRvRG9MaXN0IH0gZnJvbSBcIi4vbGlzdFwiO1xyXG5cclxuLy9GdW5jdGlvbiB0aGF0IGNsZWFycyBjb250ZW50IG9mIHRoZSB0YWJsZSBib2R5IGFuZCB0YWJsZSBoZWFkZXJzLiBDYWxscyB0aGVcclxuLy8gZnVuY3Rpb24gdGhhdCByZW5kZXJzIGV2ZXJ5dGhpbmcgZm9yIHByb2plY3QgdmlldyBhcyB3ZWxsLlxyXG5jb25zdCBwcmVwYXJlRGl2ID0gKCkgPT4ge1xyXG4gIHJlbW92ZVJvd3MoKTtcclxuICByZW1vdmVIZWFkZXJzKCk7XHJcbiAgcmVuZGVyUHJvamVjdEhlYWRlcnMoKTtcclxuICByZW5kZXJQcm9qZWN0cygpO1xyXG59O1xyXG5cclxuLy9GdW5jdGlvbiB0byByZW5kZXIgdGhlIHRhYmxlIGhlYWRlcnMgZm9yIHByb2plY3Qgdmlld1xyXG5jb25zdCByZW5kZXJQcm9qZWN0SGVhZGVycyA9ICgpID0+IHtcclxuICBsZXQgdGFibGVEaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRhc2stdGFibGVcIik7XHJcbiAgbGV0IHByb2plY3RIZWFkZXJzID0gW1wiUHJvamVjdCBOYW1lXCIsIFwiXCJdO1xyXG4gIGxldCBoZWFkZXJEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidHJcIik7XHJcbiAgdGFibGVEaXYucHJlcGVuZChoZWFkZXJEaXYpO1xyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgcHJvamVjdEhlYWRlcnMubGVuZ3RoOyBpKyspIHtcclxuICAgIGxldCB0aCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0aFwiKTtcclxuICAgIHRoLmlubmVySFRNTCA9IHByb2plY3RIZWFkZXJzW2ldO1xyXG4gICAgaGVhZGVyRGl2LmFwcGVuZENoaWxkKHRoKTtcclxuICB9XHJcbn07XHJcblxyXG4vL0Z1bmN0aW9uIHRoYXQgY2FsbHMgbWV0aG9kcyB0byByZW5kZXIgZWFjaCBwcm9qZWN0IHJvdyBhbmQgY2FsbHMgZnVuY3Rpb25zIHRvXHJcbi8vIGFkZCBmdW5jdGlvbmFsaXR5IHRvIHRoZSBidXR0b25zICsgbGlua3MgdGhlbSB0byB0aGUgY29ycmVjdCByb3dcclxuY29uc3QgcmVuZGVyUHJvamVjdHMgPSAoKSA9PiB7XHJcbiAgbGV0IHRhYmxlQm9keSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGFzay10YWJsZS1ib2R5XCIpO1xyXG5cclxuICBmb3IgKGxldCBqID0gMTsgaiA8IFRvRG9MaXN0LnByb2plY3RzLmxlbmd0aDsgaisrKSB7XHJcbiAgICByZW5kZXJQcm9qZWN0Um93KGopO1xyXG4gIH1cclxuXHJcbiAgY29uc3QgZGVsZXRlQnV0dG9ucyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJkZWwtYnRuXCIpO1xyXG4gIGZvciAobGV0IGsgPSAwOyBrIDwgZGVsZXRlQnV0dG9ucy5sZW5ndGg7IGsrKykge1xyXG4gICAgZGVsZXRlQnV0dG9uc1trXS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgcmVtb3ZlUHJvamVjdCk7XHJcbiAgfVxyXG5cclxuICBjb25zdCBlZGl0QnV0dG9ucyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoXCJlZGl0LWJ0blwiKTtcclxuICBmb3IgKGxldCBsID0gMDsgbCA8IGVkaXRCdXR0b25zLmxlbmd0aDsgbCsrKSB7XHJcbiAgICBlZGl0QnV0dG9uc1tsXS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZWRpdFByb2plY3QpO1xyXG4gIH1cclxufTtcclxuXHJcbi8vRnVuY3Rpb24gdGhhdCByZW5kZXJzIGVhY2ggcHJvamVjdCBhbmQgdGhlIGVkaXQgYW5kIGRlbGV0ZSBidXR0b25zXHJcbmNvbnN0IHJlbmRlclByb2plY3RSb3cgPSAoaSkgPT4ge1xyXG4gIGxldCB0YWJsZUJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Rhc2stdGFibGUtYm9keVwiKTtcclxuICBsZXQgcm93ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRyXCIpO1xyXG4gIHJvdy5zZXRBdHRyaWJ1dGUoXCJkYXRhLWtleVwiLCBpKTtcclxuICByb3cuaWQgPSBcInRhc2stXCIgKyBpO1xyXG4gIHJvdy5jbGFzc0xpc3QuYWRkKFwidGFzay1pdGVtXCIpO1xyXG5cclxuICBsZXQgcHJvamVjdE5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGRcIik7XHJcbiAgcHJvamVjdE5hbWUuaW5uZXJIVE1MID0gVG9Eb0xpc3QucHJvamVjdHNbaV07XHJcbiAgcm93LmFwcGVuZENoaWxkKHByb2plY3ROYW1lKTtcclxuXHJcbiAgbGV0IGJ1dHRvbnMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGRcIik7XHJcbiAgYnV0dG9ucy5pZCA9IGk7XHJcbiAgYnV0dG9ucy5zZXRBdHRyaWJ1dGUoXCJkYXRhLWtleVwiLCBpKTtcclxuXHJcbiAgbGV0IGRlbEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcbiAgYnV0dG9ucy5hcHBlbmRDaGlsZChkZWxCdG4pO1xyXG4gIGRlbEJ0bi5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwiYnV0dG9uXCIpO1xyXG4gIGRlbEJ0bi5pbm5lckhUTUwgPSBgPGkgY2xhc3M9XCJmYS1zb2xpZCBmYS10cmFzaFwiPjwvaT5gO1xyXG4gIGRlbEJ0bi5jbGFzc0xpc3QuYWRkKFwiZGVsLWJ0blwiKTtcclxuICBkZWxCdG4uaWQgPSBpO1xyXG5cclxuICBsZXQgZWRpdEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XHJcbiAgYnV0dG9ucy5hcHBlbmRDaGlsZChlZGl0QnRuKTtcclxuICBlZGl0QnRuLnNldEF0dHJpYnV0ZShcInR5cGVcIiwgXCJidXR0b25cIik7XHJcbiAgZWRpdEJ0bi5pbm5lckhUTUwgPSBgPGkgY2xhc3M9XCJmYS1zb2xpZCBmYS1wZW5jaWxcIj48L2k+YDtcclxuICBlZGl0QnRuLmNsYXNzTGlzdC5hZGQoXCJlZGl0LWJ0blwiKTtcclxuICBlZGl0QnRuLmlkID0gaTtcclxuXHJcbiAgcm93LmFwcGVuZENoaWxkKGJ1dHRvbnMpO1xyXG5cclxuICB0YWJsZUJvZHkuYXBwZW5kQ2hpbGQocm93KTtcclxufTtcclxuXHJcbi8vUmVtb3ZlcyBhbGwgdGhlIHJvd3Mgb2YgdGhlIHRhYmxlIGJvZHlcclxuY29uc3QgcmVtb3ZlUHJvamVjdFJvd3MgPSAoKSA9PiB7XHJcbiAgbGV0IGNvbnRlbnREaXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Rhc2stdGFibGUtYm9keVwiKTtcclxuICB3aGlsZSAoY29udGVudERpdi5maXJzdENoaWxkKSB7XHJcbiAgICBjb250ZW50RGl2LnJlbW92ZUNoaWxkKGNvbnRlbnREaXYuZmlyc3RDaGlsZCk7XHJcbiAgfVxyXG59O1xyXG5cclxuLy9SZW1vdmVzIGFsbCBwcm9qZWN0cyBhbmQgcmUtcmVuZGVycyB0aGUgcHJvamVjdCBhcnJheS4gVXNlZCBmb3IgdXBkYXRpbmcgdGhlIHRhYmxlXHJcbi8vdG8gbWF0Y2ggdGhlIHByb2plY3RzIGFycmF5XHJcbmNvbnN0IHJlZnJlc2hQcm9qZWN0cyA9ICgpID0+IHtcclxuICByZW1vdmVQcm9qZWN0Um93cygpO1xyXG4gIHJlbmRlclByb2plY3RzKCk7XHJcbn07XHJcblxyXG4vL1JlbW92ZXMgdGhlIHByb2plY3QgZnJvbSB0aGUgYXJyYXkgYW5kIGxvY2FsIHN0b3JhZ2UgYW5kIHJlLXJlbmRlcnMgdGhlIHRhYmxlXHJcbmNvbnN0IHJlbW92ZVByb2plY3QgPSAoZSkgPT4ge1xyXG4gIGxldCBpZCA9IGUudGFyZ2V0LnBhcmVudE5vZGUuaWQ7XHJcbiAgbGV0IHRhcmdldCA9IFRvRG9MaXN0LnByb2plY3RzW2lkXTtcclxuICBsZXQgZmlsdGVyZWRBcnIgPSBUb0RvTGlzdC5wcm9qZWN0cy5maWx0ZXIoKHRhc2spID0+IHRhc2sgIT0gdGFyZ2V0KTtcclxuICBUb0RvTGlzdC5wcm9qZWN0cyA9IGZpbHRlcmVkQXJyO1xyXG4gIHJlZnJlc2hQcm9qZWN0cygpO1xyXG4gIGxldCBrZXkgPSBcInByb2plY3QtXCIgKyBpZDtcclxuICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShrZXkpO1xyXG59O1xyXG5cclxuLy8gUHVsbHMgdXAgdGhlIGVkaXQgcHJvamVjdCBtb2RhbCBhbmQgcG9wdWxhdGVzIHRoZSBmb3JtIHdpdGggdGhlIHByb2plY3QgdG8gYmUgZWRpdGVkLlxyXG4vLyBXaGVuIGEgY2hhbmdlIGlzIHN1Ym1pdHRlZCwgdGhlIGVudHJ5IGlzIGNoYW5nZWQgaW4gdGhlIGFycmF5IGFuZCB0aGUgcHJvamVjdCB2aWV3IHRhYmxlXHJcbi8vIGlzIHJlLXJlbmRlcmVkLlxyXG5jb25zdCBlZGl0UHJvamVjdCA9IChlKSA9PiB7XHJcbiAgbGV0IG1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJlZGl0UHJvamVjdE1vZGFsXCIpO1xyXG4gIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbiAgbGV0IGlkID0gZS50YXJnZXQucGFyZW50Tm9kZS5pZDtcclxuICBsZXQgb2xkUHJvamVjdE5hbWUgPSBUb0RvTGlzdC5wcm9qZWN0c1tpZF07XHJcblxyXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZWRpdFByb2plY3ROYW1lXCIpLnZhbHVlID0gb2xkUHJvamVjdE5hbWU7XHJcblxyXG4gIGxldCBzYXZlQ2hhbmdlc0J0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic3VibWl0LXByb2plY3QtZWRpdC1idG5cIik7XHJcbiAgc2F2ZUNoYW5nZXNCdG4ub25jbGljayA9IGZ1bmN0aW9uICgpIHtcclxuICAgIFRvRG9MaXN0LnByb2plY3RzW2lkXSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZWRpdFByb2plY3ROYW1lXCIpLnZhbHVlO1xyXG4gICAgbGV0IG5ld1Byb2ogPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImVkaXRQcm9qZWN0TmFtZVwiKS52YWx1ZTtcclxuICAgIGZvciAobGV0IG0gPSAwOyBtIDwgVG9Eb0xpc3QubWFzdGVyTGlzdC5sZW5ndGg7IG0rKykge1xyXG4gICAgICBpZiAoVG9Eb0xpc3QubWFzdGVyTGlzdFttXS5wcm9qZWN0ID09PSBvbGRQcm9qZWN0TmFtZSkge1xyXG4gICAgICAgIFRvRG9MaXN0Lm1hc3Rlckxpc3RbbV0ucHJvamVjdCA9IG5ld1Byb2o7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIG1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgIHJlZnJlc2hQcm9qZWN0cygpO1xyXG4gICAgbGV0IGtleSA9IFwicHJvamVjdC1cIiArIGlkO1xyXG4gICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oa2V5KTtcclxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGtleSwgVG9Eb0xpc3QucHJvamVjdHNbaWRdKTtcclxuICB9O1xyXG59O1xyXG5cclxuZXhwb3J0IHsgcHJlcGFyZURpdiwgcmVtb3ZlUHJvamVjdFJvd3MsIHJlZnJlc2hQcm9qZWN0cyB9O1xyXG4iLCJpbXBvcnQgeyBUb0RvTGlzdCB9IGZyb20gXCIuL2xpc3RcIjtcclxuaW1wb3J0IHsgVG9EbyB9IGZyb20gXCIuL3RvZG9cIjtcclxuXHJcbi8vIEhlbHBlciBmdW5jdGlvbiB0byBzdG9yZSBwcm9qZWN0cyBpbiBsb2NhbCBzdG9yYWdlLlxyXG5jb25zdCBzdG9yZVByb2plY3RzID0gKGluZCwgaW5wdXQpID0+IHtcclxuICBsZXQga2V5ID0gXCJwcm9qZWN0LVwiICsgaW5kO1xyXG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKGtleSwgaW5wdXQpO1xyXG59O1xyXG5cclxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIHN0b3JlIHRhc2tzIGluIGxvY2FsIHN0b3JhZ2VcclxuY29uc3Qgc3RvcmVUYXNrID0gKGluZCwgaW5wdXQpID0+IHtcclxuICBsZXQga2V5ID0gXCJ0YXNrLVwiICsgaW5kO1xyXG4gIGxldCBzdHJ1bmcgPSBKU09OLnN0cmluZ2lmeShpbnB1dCk7XHJcbiAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCBzdHJ1bmcpO1xyXG59O1xyXG5cclxuLy8gUG9wdWxhdGVzIHRoZSBuZWNlc3NhcnkgYXJyYXlzIHdoZW4gcGFnZSBpcyBsb2FkZWQuXHJcbmNvbnN0IGdldFN0b3JhZ2UgPSAoKSA9PiB7XHJcbiAgT2JqZWN0LmtleXMobG9jYWxTdG9yYWdlKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcclxuICAgIGlmIChrZXkuaW5jbHVkZXMoXCJ0YXNrXCIpKSB7XHJcbiAgICAgIGNvbnN0IG9iaiA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KSk7XHJcbiAgICAgIGxldCByZXN0b3JlVGFzayA9IG5ldyBUb0RvKFxyXG4gICAgICAgIG9iai50YXNrTmFtZSxcclxuICAgICAgICBvYmouZGVzY3JpcHRpb24sXHJcbiAgICAgICAgb2JqLmR1ZURhdGUsXHJcbiAgICAgICAgb2JqLnByaW9yaXR5LFxyXG4gICAgICAgIG9iai5wcm9qZWN0XHJcbiAgICAgICk7XHJcbiAgICAgIFRvRG9MaXN0Lm1hc3Rlckxpc3QucHVzaChyZXN0b3JlVGFzayk7XHJcbiAgICB9XHJcbiAgICBpZiAoa2V5LmluY2x1ZGVzKFwicHJvamVjdFwiKSkge1xyXG4gICAgICBUb0RvTGlzdC5wcm9qZWN0cy5wdXNoKGxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSkpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG59O1xyXG5leHBvcnQgeyBzdG9yZVByb2plY3RzLCBzdG9yZVRhc2ssIGdldFN0b3JhZ2UgfTtcclxuIiwiaW1wb3J0IHsgcmVuZGVyUHJvamVjdHNGb3JUYXNrTWVudXMgfSBmcm9tIFwiLi9jb250ZW50XCI7XHJcbmltcG9ydCB7IHJlZnJlc2hQcm9qZWN0cyB9IGZyb20gXCIuL3Byb2plY3RWaWV3XCI7XHJcbmltcG9ydCB7IGxvZ0xvY2FsLCBzdG9yZVByb2plY3RzIH0gZnJvbSBcIi4vc3RvcmFnZVwiO1xyXG5cclxuY29uc3QgVG9Eb0xpc3QgPSAoKCkgPT4ge1xyXG4gIGxldCBpc1NvcnRlZCA9IGZhbHNlO1xyXG4gIGxldCB2aWV3aW5nUHJvamVjdHMgPSBmYWxzZTtcclxuICBsZXQgbWFzdGVyTGlzdCA9IFtdO1xyXG4gIGxldCBsb3dQcmlvID0gW107XHJcbiAgbGV0IG1lZFByaW8gPSBbXTtcclxuICBsZXQgaGlnaFByaW8gPSBbXTtcclxuICBsZXQgcHJvamVjdHMgPSBbXCJOb25lXCJdO1xyXG4gIHJldHVybiB7XHJcbiAgICBtYXN0ZXJMaXN0LFxyXG4gICAgbG93UHJpbyxcclxuICAgIG1lZFByaW8sXHJcbiAgICBoaWdoUHJpbyxcclxuICAgIGlzU29ydGVkLFxyXG4gICAgcHJvamVjdHMsXHJcbiAgICB2aWV3aW5nUHJvamVjdHMsXHJcbiAgfTtcclxufSkoKTtcclxuXHJcbi8vRnVuY3Rpb24gdG8gcG9wdWxhdGUgdGhlIGFycmF5cyB0aGF0IGhvbGQgdGFza3Mgb2YgZWFjaCBwcmlvcml0eVxyXG5jb25zdCBzZXRQcmlvQXJyYXlzID0gKCkgPT4ge1xyXG4gIFRvRG9MaXN0LmhpZ2hQcmlvID0gVG9Eb0xpc3QubWFzdGVyTGlzdC5maWx0ZXIoXHJcbiAgICAodGFza3MpID0+IHRhc2tzLnByaW9yaXR5ID09PSBcIkhpZ2hcIlxyXG4gICk7XHJcbiAgVG9Eb0xpc3QubWVkUHJpbyA9IFRvRG9MaXN0Lm1hc3Rlckxpc3QuZmlsdGVyKFxyXG4gICAgKHRhc2tzKSA9PiB0YXNrcy5wcmlvcml0eSA9PT0gXCJNZWRpdW1cIlxyXG4gICk7XHJcbiAgVG9Eb0xpc3QubG93UHJpbyA9IFRvRG9MaXN0Lm1hc3Rlckxpc3QuZmlsdGVyKFxyXG4gICAgKHRhc2tzKSA9PiB0YXNrcy5wcmlvcml0eSA9PT0gXCJMb3dcIlxyXG4gICk7XHJcbn07XHJcblxyXG4vL0Z1bmN0aW9uIHRvIGFkZCBhIG5ldyBwcm9qZWN0IHRvIHRoZSBwcm9qZWN0cyBzdWItYXJyYXkuIEFsc28gc3RvcmVzIHRoZSBwcm9qZWN0IGluIGxvY2FsIHN0b3JhZ2VcclxuY29uc3QgYWRkUHJvamVjdCA9ICgpID0+IHtcclxuICBsZXQgcHJvaklucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcm9qZWN0TmFtZVwiKS52YWx1ZTtcclxuICBUb0RvTGlzdC5wcm9qZWN0cy5wdXNoKHByb2pJbnB1dCk7XHJcbiAgbGV0IGluZCA9IFRvRG9MaXN0LnByb2plY3RzLmluZGV4T2YocHJvaklucHV0KTtcclxuICBzdG9yZVByb2plY3RzKGluZCwgcHJvaklucHV0KTtcclxuICBsb2dMb2NhbCgpO1xyXG4gIGlmIChUb0RvTGlzdC52aWV3aW5nUHJvamVjdHMgPT0gdHJ1ZSkge1xyXG4gICAgcmVmcmVzaFByb2plY3RzKCk7XHJcbiAgfVxyXG59O1xyXG5leHBvcnQgeyBUb0RvTGlzdCwgc2V0UHJpb0FycmF5cywgYWRkUHJvamVjdCB9O1xyXG4iLCJpbXBvcnQgeyBUb0RvTGlzdCB9IGZyb20gXCIuL2xpc3RcIjtcclxuaW1wb3J0IHsgcmVmcmVzaENvbnRlbnQsIHNvcnRDb250ZW50IH0gZnJvbSBcIi4vY29udGVudFwiO1xyXG5pbXBvcnQgeyBzdG9yZVRhc2sgfSBmcm9tIFwiLi9zdG9yYWdlXCI7XHJcblxyXG5jb25zdCBUb0RvID0gZnVuY3Rpb24gKHRhc2tOYW1lLCBkZXNjcmlwdGlvbiwgZHVlRGF0ZSwgcHJpb3JpdHksIHByb2plY3QpIHtcclxuICB0aGlzLnRhc2tOYW1lID0gdGFza05hbWU7XHJcbiAgdGhpcy5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xyXG4gIHRoaXMuZHVlRGF0ZSA9IGR1ZURhdGU7XHJcbiAgdGhpcy5wcmlvcml0eSA9IHByaW9yaXR5O1xyXG4gIHRoaXMuY29tcGxldGUgPSBmYWxzZTtcclxuICB0aGlzLnByb2plY3QgPSBwcm9qZWN0O1xyXG4gIHRoaXMuaWQgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDAwKTtcclxufTtcclxuXHJcbi8vRmV0Y2hlcyB0aGUgdmFsdWVzIGZyb20gdGhlIGFkZCB0YXNrIG1vZGFsIGFuZCBjcmVhdGVzIGEgbmV3IFRhc2sgYW5kIGFkZHMgaXQgdG9cclxuLy8gdGhlIGxpc3Qgb2YgdGFza3MgYW5kIHRoZSBjb3JyZWN0IHByaW9yaXR5IHN1Yi1hcnJheS5cclxuLy8gQ2FsbHMgdGhlIGNvcnJlY3QgbWV0aG9kIHRvIHJlLXJlbmRlciB0aGUgdGFibGUgYmFzZWQgb24gc29ydGluZyBvcHRpb24gYW5kIGlmXHJcbi8vIHRoZSB1c2VyIGlzIHZpZXdpbmcgdGFza3Mgb3Igbm90LlxyXG5jb25zdCBhZGRUb0RvID0gKCkgPT4ge1xyXG4gIGxldCB0YXNrTmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGFza05hbWVJbnB1dFwiKS52YWx1ZTtcclxuICBsZXQgdGFza0Rlc2MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRlc2NyaXB0aW9uSW5wdXRcIikudmFsdWU7XHJcbiAgbGV0IHRhc2tEYXRlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkYXRlSW5wdXRcIikudmFsdWU7XHJcbiAgbGV0IHRhc2tQcmlvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcmlvcml0eUlucHV0XCIpLnZhbHVlO1xyXG4gIGxldCB0YXNrUHJvaiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvamVjdElucHV0XCIpLnZhbHVlO1xyXG4gIGxldCBuZXdUYXNrID0gbmV3IFRvRG8odGFza05hbWUsIHRhc2tEZXNjLCB0YXNrRGF0ZSwgdGFza1ByaW8sIHRhc2tQcm9qKTtcclxuICBUb0RvTGlzdC5tYXN0ZXJMaXN0LnB1c2gobmV3VGFzayk7XHJcbiAgaWYgKG5ld1Rhc2sucHJpb3JpdHkgPT09IFwiTG93XCIpIHtcclxuICAgIFRvRG9MaXN0Lmxvd1ByaW8ucHVzaChuZXdUYXNrKTtcclxuICB9XHJcblxyXG4gIGlmIChuZXdUYXNrLnByaW9yaXR5ID09PSBcIk1lZGl1bVwiKSB7XHJcbiAgICBUb0RvTGlzdC5tZWRQcmlvLnB1c2gobmV3VGFzayk7XHJcbiAgfVxyXG5cclxuICBpZiAobmV3VGFzay5wcmlvcml0eSA9PT0gXCJIaWdoXCIpIHtcclxuICAgIFRvRG9MaXN0LmhpZ2hQcmlvLnB1c2gobmV3VGFzayk7XHJcbiAgfVxyXG4gIGlmIChUb0RvTGlzdC52aWV3aW5nUHJvamVjdHMgPT09IGZhbHNlKSB7XHJcbiAgICBpZiAoVG9Eb0xpc3QuaXNTb3J0ZWQgPT09IGZhbHNlKSB7XHJcbiAgICAgIHJlZnJlc2hDb250ZW50KCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBzb3J0Q29udGVudCgpO1xyXG4gICAgfVxyXG4gIH1cclxuICBsZXQgaW5kID0gVG9Eb0xpc3QubWFzdGVyTGlzdC5pbmRleE9mKG5ld1Rhc2spO1xyXG4gIHN0b3JlVGFzayhpbmQsIG5ld1Rhc2spO1xyXG59O1xyXG5cclxuLy9PcGVucyB0aGUgZWRpdCB0YXNrIG1vZGFsIGFuZCBxdWVyaWVzIHRoZSBtYXN0ZXIgbGlzdHMgb2YgdGFza3MgdG8gZmluZCB0aGUgY29ycmVjdCB0YXNrIGJhc2VkIG9uIElEIG51bWJlci5cclxuLy8gUG9wdWxhdGVzIHRoZSBmb3JtIHdpdGggdGhlIG9yaWdpbmFsIGRhdGEuIEZ1bmN0aW9uIGFsc28gYWRkcyB0aGUgb25jbGljayBmdW5jdGlvbiBmb3IgdGhlIHNhdmUgY2hhbmdlcyBidXR0b24uXHJcbi8vIFRoZSBvbmNsaWNrIGZ1bmN0aW9uIGZldGNoZXMgdGhlIHZhbHVlcyBmcm9tIHRoZSBmb3JtIGFuZCB1cGRhdGVzIHRoZSB0YXNrIHdpdGggdGhlIG5ldyBkYXRhLlxyXG5jb25zdCBlZGl0VGFzayA9IChlKSA9PiB7XHJcbiAgbGV0IG1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJlZGl0TW9kYWxcIik7XHJcbiAgbW9kYWwuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuXHJcbiAgbGV0IGlkID0gZS50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlLmdldEF0dHJpYnV0ZShcImRhdGEta2V5XCIpO1xyXG4gIGxldCBpbmRleCA9IDA7XHJcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBUb0RvTGlzdC5tYXN0ZXJMaXN0Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICBpZiAoaWQgPT0gVG9Eb0xpc3QubWFzdGVyTGlzdFtpXS5pZCkge1xyXG4gICAgICBpbmRleCA9IGk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRhc2tOYW1lRWRpdFwiKS52YWx1ZSA9XHJcbiAgICBUb0RvTGlzdC5tYXN0ZXJMaXN0W2luZGV4XS50YXNrTmFtZTtcclxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRlc2NyaXB0aW9uRWRpdFwiKS52YWx1ZSA9XHJcbiAgICBUb0RvTGlzdC5tYXN0ZXJMaXN0W2luZGV4XS5kZXNjcmlwdGlvbjtcclxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImRhdGVFZGl0XCIpLnZhbHVlID1cclxuICAgIFRvRG9MaXN0Lm1hc3Rlckxpc3RbaW5kZXhdLmR1ZURhdGU7XHJcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcmlvcml0eUVkaXRcIikudmFsdWUgPVxyXG4gICAgVG9Eb0xpc3QubWFzdGVyTGlzdFtpbmRleF0ucHJpb3JpdHk7XHJcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcm9qZWN0RWRpdFwiKS52YWx1ZSA9XHJcbiAgICBUb0RvTGlzdC5tYXN0ZXJMaXN0W2luZGV4XS5wcm9qZWN0O1xyXG5cclxuICBsZXQgc2F2ZUNoYW5nZXNCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInN1Ym1pdC1lZGl0LWJ0blwiKTtcclxuICBzYXZlQ2hhbmdlc0J0bi5vbmNsaWNrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgVG9Eb0xpc3QubWFzdGVyTGlzdFtpbmRleF0udGFza05hbWUgPVxyXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRhc2tOYW1lRWRpdFwiKS52YWx1ZTtcclxuICAgIFRvRG9MaXN0Lm1hc3Rlckxpc3RbaW5kZXhdLmRlc2NyaXB0aW9uID1cclxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkZXNjcmlwdGlvbkVkaXRcIikudmFsdWU7XHJcbiAgICBUb0RvTGlzdC5tYXN0ZXJMaXN0W2luZGV4XS5kdWVEYXRlID1cclxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkYXRlRWRpdFwiKS52YWx1ZTtcclxuICAgIFRvRG9MaXN0Lm1hc3Rlckxpc3RbaW5kZXhdLnByaW9yaXR5ID1cclxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcmlvcml0eUVkaXRcIikudmFsdWU7XHJcbiAgICBUb0RvTGlzdC5tYXN0ZXJMaXN0W2luZGV4XS5wcm9qZWN0ID1cclxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcm9qZWN0RWRpdFwiKS52YWx1ZTtcclxuICAgIFRvRG9MaXN0LmhpZ2hQcmlvID0gVG9Eb0xpc3QubWFzdGVyTGlzdC5maWx0ZXIoXHJcbiAgICAgICh0YXNrKSA9PiB0YXNrLnByaW9yaXR5ID09PSBcIkhpZ2hcIlxyXG4gICAgKTtcclxuICAgIFRvRG9MaXN0Lm1lZFByaW8gPSBUb0RvTGlzdC5tYXN0ZXJMaXN0LmZpbHRlcihcclxuICAgICAgKHRhc2spID0+IHRhc2sucHJpb3JpdHkgPT09IFwiTWVkaXVtXCJcclxuICAgICk7XHJcbiAgICBUb0RvTGlzdC5sb3dQcmlvID0gVG9Eb0xpc3QubWFzdGVyTGlzdC5maWx0ZXIoXHJcbiAgICAgICh0YXNrKSA9PiB0YXNrLnByaW9yaXR5ID09PSBcIkxvd1wiXHJcbiAgICApO1xyXG5cclxuICAgIHJlZnJlc2hDb250ZW50KCk7XHJcbiAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICBsZXQga2V5ID0gXCJ0YXNrLVwiICsgaW5kZXg7XHJcbiAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShrZXkpO1xyXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCBKU09OLnN0cmluZ2lmeShUb0RvTGlzdC5tYXN0ZXJMaXN0W2luZGV4XSkpO1xyXG4gIH07XHJcbn07XHJcblxyXG5leHBvcnQgeyBUb0RvLCBhZGRUb0RvLCBlZGl0VGFzayB9O1xyXG4iLCJpbXBvcnQgeyBUb0RvIH0gZnJvbSBcIi4vbW9kdWxlcy90b2RvXCI7XHJcbmltcG9ydCB7IHNldFByaW9BcnJheXMsIFRvRG9MaXN0IH0gZnJvbSBcIi4vbW9kdWxlcy9saXN0XCI7XHJcbmltcG9ydCB7IHJlbmRlclByb2plY3RzRm9yVGFza01lbnVzLCByZW5kZXJUb0RvcyB9IGZyb20gXCIuL21vZHVsZXMvY29udGVudFwiO1xyXG5pbXBvcnQgaW5pdEJ1dHRvbnMgZnJvbSBcIi4vbW9kdWxlcy9idXR0b25zXCI7XHJcbmltcG9ydCB7IGdldFN0b3JhZ2UgfSBmcm9tIFwiLi9tb2R1bGVzL3N0b3JhZ2VcIjtcclxuXHJcbi8vQ2FsbHMgZnVuY3Rpb25zIG5lY2Vzc2FyeSB3aGVuIHBhZ2UgaXMgbG9hZGVkLlxyXG5nZXRTdG9yYWdlKCk7XHJcbnNldFByaW9BcnJheXMoKTtcclxucmVuZGVyVG9Eb3MoVG9Eb0xpc3QubWFzdGVyTGlzdCk7XHJcbmluaXRCdXR0b25zKCk7XHJcbnJlbmRlclByb2plY3RzRm9yVGFza01lbnVzKCk7XHJcblxyXG4vLyBCZWxvdyBpcyBub3RlcyBJIHVzZWQgdGhyb3VnaG91dCB0aGUgZGV2ZWxvcG1lbnQgcHJvY2Vzcy4gV2FzIGp1c3QgYSB3YXkgdG8gb3JnYW5pemUgbXkgdGhvdWdodHMgYW5kIHRyYWNrIHdoYXQgbmVlZGVkIHRvIGJlIGRvbmUuXHJcblxyXG4vKlxyXG5Ob3RlczpcclxuLU9uIGFkZCB0YXNrIGZvcm0gbmVlZCBhIHBsYWNlIHRvIHNlbGVjdCB3aGljaCBwcm9qZWN0IHRvIGFkZCB0aGUgdG8gZG8gdG8uIEFsbG93IGZvciBtdWx0aXBsZSBwcm9qZWN0IHNlbGVjdGlvbiAoTWF5YmUgbm90KVxyXG4tTmVlZCBhbiBlZGl0IHRhc2sgYnV0dG9uIG9uIGVhY2ggdGFzayByb3dcclxuLU5lZWQgdG8gZmlndXJlIG91dCB3aGVyZSB0byBjcmVhdGUgbmV3IHByb2plY3RzXHJcbi1WaWV3IGFsbCB0YXNrcyBuZWVkcyB0byBkaXNwbGF5IHByb2plY3QgbmFtZXNcclxuXHJcblBsYW4gb2YgYXR0YWNrOlxyXG4qQWRkIGEgZmV3IGR1bW15IHRvIGRvIG9iamVjdHMgYW5kIGdldCB0aGVtIHJlbmRlcmluZyB0byB0aGUgZG9tXHJcbipTZXQgdXAgdGhlIGFkZCB0YXNrIGJ1dHRvbiBcclxuKlNldCB1cCB0YXNrIGVkaXRpbmcgPC0tIE1vZGFsIHdpdGggdGhlIHRhc2tzIGRhdGEgcHJlLWZpbGxlZCBpbnRvIGEgZm9ybS4gXHJcbi0tTmVlZCBhIGRpc2NhcmQgY2hhbmdlIGJ1dHRvbiBcclxuKipOZWVkIGEgc2F2ZSBjaGFuZ2UgYnV0dG9uIFxyXG4qU2V0IHVwIHNvcnRpbmcgXHJcbi0tTWF5YmUgYWRkIHdoaWNoIHdheSB0byBiZSBzb3J0ZWQ/IFN0cmVjaCBnb2FsP1xyXG4qU2V0IHVwIHJldmVydGluZyBzb3J0aW5nIDwtLSBSZSByZW5kZXIgZnJvbSBtYXN0ZXIgYnkgY2hlY2tpbmcgaXNTb3J0aW5nIGZvciBmYWxzZVxyXG4tU2V0IHVwIHByb2plY3RzXHJcbioqIEFkZCBwcm9qZWN0IGJ1dHRvblxyXG4qKiBBZGQgcHJvamVjdCBzZWxlY3Rpb24gb24gYWRkIHRhc2sgZm9ybVxyXG4qKiBFZGl0IFByb2plY3RzIE1vZGFsLiAoPylcclxuKiogQWRkIHByb2plY3Qgdmlld3MgPC0tIENhbiBkZWZpbml0ZWx5IGRvXHJcbioqIFJlIHJlbmRlciB0YWJsZSB3aXRoIGEgZmlsdGVyZWQgYXJyYXkgZm9yIHRoZSBwcm9qZWN0IHRoZXkgd2FudCB0byB2aWV3LiBcclxuXHJcblxyXG5Tb3J0aW5nIE1vZGFsOlxyXG4qKkRyb3Bkb3duIHdpdGggZGVmYXVsdCwgbG93IHRvIGhpZ2ggcHJpb3JpdHksIGhpZ2ggdG8gbG93LCBwcm9qZWN0ICh3aGljaCBqdXN0IGdyb3VwcyB0aGUgdGFza3MgYnkgcHJvamVjdHMpXHJcbioqKiBUbyBkbyB0aGUgbGFzdCBvbmUsIGl0ZXJhdGUgdGhyb3VnaCBwcm9qZWN0cyBhcnJheSBmaWx0ZXJpbmcgdGhlIG1haW4gYXJyYXkgYW5kIHJlbmRlcmluZyB0aGUgcmVzdWx0aW5nIGFycmF5IFxyXG5cclxuKipjaGFuZ2Ugc29ydGluZyBtb2RhbCB0byBhIGRyb3Bkb3duIHcvb3V0IG1vZGFsICsgb25jaGFuZ2UgcmF0aGVyIHRoYW4gYSBzdWJtaXRcclxuXHJcbi0tUHJvamVjdHMgY29sbGFwc2libGUgb24gc2lkZWJhciBvciBhIGRyb3AgZG93bj8gb3IgYSBtb2RhbD8gb3I/Pz8gU29tZXRoaW5nIHRvIHZpZXcgb25seSB0YXNrcyBvZiBhIHByb2plY3QuIFxyXG4qKkJ1dHRvbi9SYWRpbyBmb3IgbWFya2luZyBhIHRhc2sgY29tcGxldGUgdGhhdCBjcm9zc2VzIG91dCB0aGUgcm93XHJcbioqQ2hhbmdlIGJ1dHRvbnMgdG8gaWNvbnMgb2Ygc29tZSBzb3J0LiBQZW5jaWwgZm9yIGVkaXQsIHRyYXNoY2FuIGZvciBkZWxldGVcclxuXHJcbipDU1MgZm9yIE1vZGFsc1xyXG5cclxuXHJcblxyXG4qQ2hhbmdlIHRhYmxlIHJlbmRlcmluZyB0byBhbGwgb2NjdXIgaW4gSlNcclxuLVByb2plY3RzIGJ1dHRvbiBpbiBzaWRlIGJhciByZW5kZXJzIHRhYmxlIHdpdGggcHJvamVjdCBuYW1lICsgYnV0dG9ucyBmb3IgZWRpdCArIGRlbGV0ZVxyXG5cclxuLVNldCB1cCBkYXRlIHBpY2tlclxyXG4tQ2xlYW4gdXAgY29uc29sZSBsb2dzICsgY29kZSBvcmdhbml6YXRpb24gKGFsbCBsZXRzIGdyb3VwZWQgdG9nZXRoZXIgYXQgdG9wIG9mIG1ldGhvZHMpXHJcbiovXHJcbiIsImltcG9ydCB7IGFkZFRvRG8gfSBmcm9tIFwiLi90b2RvXCI7XHJcbmltcG9ydCB7XHJcbiAgcmVtb3ZlSGVhZGVycyxcclxuICByZW5kZXJOZXdQcm9qZWN0cyxcclxuICByZW5kZXJQcm9qZWN0c0ZvclRhc2tNZW51cyxcclxuICByZW5kZXJUb0RvcyxcclxuICBzb3J0Q29udGVudCxcclxufSBmcm9tIFwiLi9jb250ZW50XCI7XHJcbmltcG9ydCB7IGFkZFByb2plY3QsIFRvRG9MaXN0IH0gZnJvbSBcIi4vbGlzdFwiO1xyXG5pbXBvcnQgeyBwcmVwYXJlRGl2LCByZW1vdmVQcm9qZWN0Um93cyB9IGZyb20gXCIuL3Byb2plY3RWaWV3XCI7XHJcbmNvbnN0IGluaXRCdXR0b25zID0gKCkgPT4ge1xyXG4gIC8vVmFyaWFibGUgc2V0dGluZyBmb3IgYWxsIHRoZSBkaWZmZXJlbnQgSFRNTCBjb21wb25lbnRzXHJcbiAgbGV0IHRhc2tNb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidGFza01vZGFsXCIpO1xyXG4gIGxldCB0YXNrQnV0dG9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJuZXdUYXNrQnRuXCIpO1xyXG4gIGxldCBlZGl0TW9kYWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImVkaXRNb2RhbFwiKTtcclxuICBsZXQgcHJvamVjdE1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcm9qZWN0TW9kYWxcIik7XHJcbiAgbGV0IGFkZFByb2ogPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm5ld1Byb2plY3RcIik7XHJcbiAgbGV0IHNvcnRNb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic29ydE1vZGFsXCIpO1xyXG4gIGxldCBlZGl0UHJvak1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJlZGl0UHJvamVjdE1vZGFsXCIpO1xyXG4gIGxldCBzdWJtaXRidXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInN1Ym1pdC10YXNrLWJ0blwiKTtcclxuICBsZXQgc29ydFNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic29ydFR5cGVcIik7XHJcbiAgbGV0IGFkZFByb2pCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInN1Ym1pdC1wcm9qZWN0LWJ0blwiKTtcclxuICBsZXQgcHJvamVjdFZpZXdCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByb2plY3Qtdmlld1wiKTtcclxuICBsZXQgYWxsVGFza3NCdXR0b24gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFsbC10YXNrc1wiKTtcclxuICBsZXQgY29tcGxldGVkVGFza0J0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29tcGxldGUtdGFza3NcIik7XHJcbiAgbGV0IGluY29tcGxldGVUYXNrQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJpbmNvbXBsZXRlLXRhc2tzXCIpO1xyXG5cclxuICAvLyBSZXNwZWN0aXZlIGJ1dHRvbnMgd2lsbCBvcGVuIHRoZWlyIGNvcnJlc3BvbmRpbmcgbW9kYWxzXHJcbiAgYWRkUHJvai5vbmNsaWNrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgcHJvamVjdE1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XHJcbiAgfTtcclxuICB0YXNrQnV0dG9uLm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICB0YXNrTW9kYWwuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxuICB9O1xyXG5cclxuICAvLyBDbGlja2luZyBvdXRzaWRlIG9mIG1vZGFscyB3aWxsIGNsb3NlIHRoZSBtb2RhbHNcclxuICB3aW5kb3cub25jbGljayA9IGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgaWYgKGV2ZW50LnRhcmdldCA9PSB0YXNrTW9kYWwpIHtcclxuICAgICAgdGFza01vZGFsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0YXNrTmFtZUlucHV0XCIpLnZhbHVlID0gXCJcIjtcclxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkZXNjcmlwdGlvbklucHV0XCIpLnZhbHVlID0gXCJcIjtcclxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkYXRlSW5wdXRcIikudmFsdWUgPSBcIlwiO1xyXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByaW9yaXR5SW5wdXRcIikuc2VsZWN0ZWRJbmRleCA9IDA7XHJcbiAgICB9XHJcbiAgICBpZiAoZXZlbnQudGFyZ2V0ID09IGVkaXRNb2RhbCkge1xyXG4gICAgICBlZGl0TW9kYWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgfVxyXG4gICAgaWYgKGV2ZW50LnRhcmdldCA9PSBwcm9qZWN0TW9kYWwpIHtcclxuICAgICAgcHJvamVjdE1vZGFsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJwcm9qZWN0TmFtZVwiKS52YWx1ZSA9IFwiXCI7XHJcbiAgICB9XHJcbiAgICBpZiAoZXZlbnQudGFyZ2V0ID09IHNvcnRNb2RhbCkge1xyXG4gICAgICBzb3J0TW9kYWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgfVxyXG4gICAgaWYgKGV2ZW50LnRhcmdldCA9PSBlZGl0UHJvak1vZGFsKSB7XHJcbiAgICAgIGVkaXRQcm9qTW9kYWwuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIC8vRnVuY3Rpb25hbGl0eSBpbXBsZW1lbnRhdGlvbiBmb3IgdGhlIGJ1dHRvbiB0aGF0IGhhbmRsZXMgYWRkaW5nIGEgdGFza1xyXG4gIHN1Ym1pdGJ1dHRvbi5vbmNsaWNrID0gZnVuY3Rpb24gKCkge1xyXG4gICAgYWRkVG9EbygpO1xyXG4gICAgbGV0IG1vZGFsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0YXNrTW9kYWxcIik7XHJcbiAgICBtb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRhc2tOYW1lSW5wdXRcIikudmFsdWUgPSBcIlwiO1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJkZXNjcmlwdGlvbklucHV0XCIpLnZhbHVlID0gXCJcIjtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZGF0ZUlucHV0XCIpLnZhbHVlID0gXCJcIjtcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJpb3JpdHlJbnB1dFwiKS5zZWxlY3RlZEluZGV4ID0gMDtcclxuICB9O1xyXG5cclxuICAvL0ltcGxlbWVudGF0aW9uIG9mIHRoZSBvbiBjaGFuZ2UgZnVuY3Rpb24gZm9yIHRoZSBzb3J0aW5nIHNlbGVjdCBib3hcclxuICBzb3J0U2VsZWN0Lm9uY2hhbmdlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgbGV0IHNvcnRUeXBlID0gc29ydFNlbGVjdC52YWx1ZTtcclxuICAgIHNvcnRDb250ZW50KHNvcnRUeXBlKTtcclxuICB9O1xyXG5cclxuICAvLyBPbiBjbGljayBmdW5jdGlvbiBmb3IgYWRkaW5nIGEgcHJvamVjdFxyXG4gIGFkZFByb2pCdG4ub25jbGljayA9IGZ1bmN0aW9uICgpIHtcclxuICAgIGFkZFByb2plY3QoKTtcclxuICAgIHByb2plY3RNb2RhbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInByb2plY3ROYW1lXCIpLnZhbHVlID0gXCJcIjtcclxuICAgIHJlbmRlclByb2plY3RzRm9yVGFza01lbnVzKCk7XHJcbiAgfTtcclxuXHJcbiAgLy9TaWRlIGJhciBvbiBjbGljayBmdW5jdGlvbnMgZm9yIGNoYW5naW5nIHRoZSB2aWV3c1xyXG4gIHByb2plY3RWaWV3QnRuLm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBUb0RvTGlzdC52aWV3aW5nUHJvamVjdHMgPSB0cnVlO1xyXG4gICAgcHJlcGFyZURpdigpO1xyXG4gIH07XHJcblxyXG4gIGFsbFRhc2tzQnV0dG9uLm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBUb0RvTGlzdC52aWV3aW5nUHJvamVjdHMgPSBmYWxzZTtcclxuICAgIHJlbW92ZUhlYWRlcnMoKTtcclxuICAgIHJlbW92ZVByb2plY3RSb3dzKCk7XHJcbiAgICByZW5kZXJUb0RvcyhUb0RvTGlzdC5tYXN0ZXJMaXN0KTtcclxuICB9O1xyXG5cclxuICBjb21wbGV0ZWRUYXNrQnRuLm9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICBUb0RvTGlzdC52aWV3aW5nUHJvamVjdHMgPSBmYWxzZTtcclxuICAgIHJlbW92ZUhlYWRlcnMoKTtcclxuICAgIHJlbW92ZVByb2plY3RSb3dzKCk7XHJcbiAgICByZW5kZXJUb0RvcyhUb0RvTGlzdC5tYXN0ZXJMaXN0LmZpbHRlcigodGFzaykgPT4gdGFzay5jb21wbGV0ZSA9PSB0cnVlKSk7XHJcbiAgfTtcclxuXHJcbiAgaW5jb21wbGV0ZVRhc2tCdG4ub25jbGljayA9IGZ1bmN0aW9uICgpIHtcclxuICAgIFRvRG9MaXN0LnZpZXdpbmdQcm9qZWN0cyA9IGZhbHNlO1xyXG4gICAgcmVtb3ZlSGVhZGVycygpO1xyXG4gICAgcmVtb3ZlUHJvamVjdFJvd3MoKTtcclxuICAgIHJlbmRlclRvRG9zKFRvRG9MaXN0Lm1hc3Rlckxpc3QuZmlsdGVyKCh0YXNrKSA9PiB0YXNrLmNvbXBsZXRlID09IGZhbHNlKSk7XHJcbiAgfTtcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGluaXRCdXR0b25zO1xyXG4iXSwibmFtZXMiOlsiX193ZWJwYWNrX3JlcXVpcmVfXyIsImV4cG9ydHMiLCJkZWZpbml0aW9uIiwia2V5IiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsIm9iaiIsInByb3AiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwicmVuZGVyVG9Eb3MiLCJhcnJheSIsImhlYWRlckFyciIsInRhc2tIZWFkZXIiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiaGVhZGVyRGl2IiwiY3JlYXRlRWxlbWVudCIsInByZXBlbmQiLCJzIiwibGVuZ3RoIiwidGgiLCJpbm5lckhUTUwiLCJhcHBlbmRDaGlsZCIsImkiLCJyZW5kZXJSb3ciLCJkZWxCdG5zIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSIsImoiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlVGFzayIsImVkaXRCdG5zIiwiayIsImVkaXRUYXNrIiwiY29tcGxldGVCdG5zIiwibCIsImlkIiwiY29tcGxldGVUYXNrIiwidGFibGVCb2R5IiwicXVlcnlTZWxlY3RvciIsImRrIiwicm93IiwiY29tcGxldGUiLCJjbGFzc0xpc3QiLCJhZGQiLCJzZXRBdHRyaWJ1dGUiLCJ0aXRsZSIsInRhc2tOYW1lIiwiZGVzY3JpcHRpb24iLCJwcm9qZWN0IiwiZHVlRGF0ZSIsInNwbGl0RGF0ZSIsInNwbGl0IiwiZm9ybWF0dGVkRGF0ZSIsInByaW8iLCJwcmlvcml0eSIsImJ1dHRvbnMiLCJjb21wQnRuIiwiZGVsQnRuIiwiZWRpdEJ0biIsInJlbW92ZVJvd3MiLCJjb250ZW50RGl2IiwiZmlyc3RDaGlsZCIsInJlbW92ZUNoaWxkIiwiZSIsInRhcmdldCIsInBhcmVudE5vZGUiLCJnZXRBdHRyaWJ1dGUiLCJUb0RvTGlzdCIsIm1hc3Rlckxpc3QiLCJpbmRleE9mIiwiZmluZCIsInRhc2siLCJmaWx0ZXJBcnIiLCJmaWx0ZXIiLCJzZXRQcmlvQXJyYXlzIiwicmVmcmVzaENvbnRlbnQiLCJsb2NhbFN0b3JhZ2UiLCJyZW1vdmVJdGVtIiwicm93SWQiLCJyZW1vdmUiLCJyZW1vdmVIZWFkZXJzIiwic29ydENvbnRlbnQiLCJzb3J0VHlwZSIsImxvd1ByaW8iLCJtZWRQcmlvIiwiaGlnaFByaW8iLCJwcm9qZWN0cyIsInByb2pBcnIiLCJ0YXNrcyIsInJlbmRlclByb2plY3RzRm9yVGFza01lbnVzIiwicHJvamVjdElucHV0RGl2IiwiZWRpdFByb2pEaXYiLCJjaGlsZE5vZGVzIiwibGFzdENoaWxkIiwib3B0IiwiaGVhZGVyIiwicmVuZGVyUHJvamVjdHMiLCJyZW5kZXJQcm9qZWN0Um93IiwiZGVsZXRlQnV0dG9ucyIsInJlbW92ZVByb2plY3QiLCJlZGl0QnV0dG9ucyIsImVkaXRQcm9qZWN0IiwicHJvamVjdE5hbWUiLCJyZW1vdmVQcm9qZWN0Um93cyIsInJlZnJlc2hQcm9qZWN0cyIsImZpbHRlcmVkQXJyIiwibW9kYWwiLCJzdHlsZSIsImRpc3BsYXkiLCJvbGRQcm9qZWN0TmFtZSIsIm9uY2xpY2siLCJuZXdQcm9qIiwibSIsInNldEl0ZW0iLCJzdG9yZVByb2plY3RzIiwiaW5kIiwiaW5wdXQiLCJzdG9yZVRhc2siLCJzdHJ1bmciLCJKU09OIiwic3RyaW5naWZ5IiwiZ2V0U3RvcmFnZSIsImtleXMiLCJmb3JFYWNoIiwiaW5jbHVkZXMiLCJwYXJzZSIsImdldEl0ZW0iLCJyZXN0b3JlVGFzayIsIlRvRG8iLCJwdXNoIiwiaXNTb3J0ZWQiLCJ2aWV3aW5nUHJvamVjdHMiLCJ0aGlzIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiaW5kZXgiLCJ0YXNrTW9kYWwiLCJ0YXNrQnV0dG9uIiwiZWRpdE1vZGFsIiwicHJvamVjdE1vZGFsIiwiYWRkUHJvaiIsInNvcnRNb2RhbCIsImVkaXRQcm9qTW9kYWwiLCJzdWJtaXRidXR0b24iLCJzb3J0U2VsZWN0IiwiYWRkUHJvakJ0biIsInByb2plY3RWaWV3QnRuIiwiYWxsVGFza3NCdXR0b24iLCJjb21wbGV0ZWRUYXNrQnRuIiwiaW5jb21wbGV0ZVRhc2tCdG4iLCJ3aW5kb3ciLCJldmVudCIsInNlbGVjdGVkSW5kZXgiLCJ0YXNrRGVzYyIsInRhc2tEYXRlIiwidGFza1ByaW8iLCJ0YXNrUHJvaiIsIm5ld1Rhc2siLCJhZGRUb0RvIiwib25jaGFuZ2UiLCJwcm9qSW5wdXQiLCJsb2dMb2NhbCIsImFkZFByb2plY3QiLCJ0YWJsZURpdiIsInByb2plY3RIZWFkZXJzIiwicmVuZGVyUHJvamVjdEhlYWRlcnMiXSwic291cmNlUm9vdCI6IiJ9